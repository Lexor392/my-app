/*! For license information please see main.1a81225b.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,n){var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case N:return"Suspense";case S:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return P(e(t))}catch(Fn){}}return null}var D=Array.isArray,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B,q,H=U(null),W=U(null),K=U(null),G=U(null);function Q(e,t){switch(z(K,t),z(W,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(H),z(H,e)}function X(){V(H),V(W),V(K)}function J(e){null!==e.memoizedState&&z(G,e);var t=H.current,n=bd(t,e.type);t!==n&&(z(W,e),z(H,n))}function Y(e){W.current===e&&(V(H),V(W)),G.current===e&&(V(G),dh._currentValue=L)}function $(e){if(void 0===B)try{throw Error()}catch(Fn){var t=Fn.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",q=-1<Fn.stack.indexOf("\n    at")?" (<anonymous>)":-1<Fn.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+q}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Fn){var r=Fn}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(Fn){return"\nError generating stack: "+Fn.message+"\n"+Fn.stack}}var re=Object.prototype.hasOwnProperty,se=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,me=r.unstable_IdlePriority,pe=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof pe&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(xe(e)/ke|0)|0},xe=Math.log,ke=Math.LN2;var Ne=256,Se=262144,Ee=4194304;function _e(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=_e(r):0!==(a&=o)?s=_e(a):n||0!==(n=o&~e)&&(s=_e(n)):0!==(o=r&~i)?s=_e(o):0!==a?s=_e(a):n||0!==(n=r&~e)&&(s=_e(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Oe(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function Ue(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}var Ve=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ve,Be="__reactProps$"+Ve,qe="__reactContainer$"+Ve,He="__reactEvents$"+Ve,We="__reactListeners$"+Ve,Ke="__reactHandles$"+Ve,Ge="__reactResources$"+Ve,Qe="__reactMarker$"+Ve;function Xe(e){delete e[ze],delete e[Be],delete e[He],delete e[We],delete e[Ke]}function Je(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[ze])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function Ye(e){if(e=e[ze]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(s=t,re.call(ot,s)||!re.call(at,s)&&(it.test(s)?ot[s]=!0:(at[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?wt(e,a,dt(t)):null!=n?wt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function wt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Nt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(D(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&_t(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&_t(e,i,t[i])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return jt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Dt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Lt=null;function Mt(e){var t=Ye(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Be]||null;if(!s)throw Error(a(90));yt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&mt(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Ut(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Ot||null!==Lt)&&(eu(),Ot&&(t=Ot,e=Lt,Lt=Ot=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(zt)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch($h){Bt=!1}var Ht=null,Wt=null,Kt=null;function Gt(){if(Kt)return Kt;var e,t,n=Wt,r=n.length,s="value"in Ht?Ht.value:Ht.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Kt=s.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Jt(){return!1}function Yt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Xt:Jt,this.isPropagationStopped=Jt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var $t,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Yt(tn),rn=f({},tn,{view:0,detail:0}),sn=Yt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=Yt(an),ln=Yt(f({},an,{dataTransfer:0})),cn=Yt(f({},rn,{relatedTarget:0})),un=Yt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Yt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Yt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function vn(){return gn}var yn=Yt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Yt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Yt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),xn=Yt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Yt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nn=Yt(f({},tn,{newState:0,oldState:0})),Sn=[9,13,27,32],En=zt&&"CompositionEvent"in window,_n=null;zt&&"documentMode"in document&&(_n=document.documentMode);var Cn=zt&&"TextEvent"in window&&!_n,Tn=zt&&(!En||_n&&8<_n&&11>=_n),In=String.fromCharCode(32),jn=!1;function An(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Ln(e,t,n,r){Ot?Lt?Lt.push(r):Lt=[r]:Ot=r,0<(t=sd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Un=null;function Vn(e){Ju(e,0)}function zn(e){if(mt($e(e)))return e}function Bn(e,t){if("change"===e)return t}var qn=!1;if(zt){var Hn;if(zt){var Wn="oninput"in document;if(!Wn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Wn="function"===typeof Kn.oninput}Hn=Wn}else Hn=!1;qn=Hn&&(!document.documentMode||9<document.documentMode)}function Gn(){Mn&&(Mn.detachEvent("onpropertychange",Qn),Un=Mn=null)}function Qn(e){if("value"===e.propertyName&&zn(Un)){var t=[];Ln(t,Un,e,Rt(e)),Ut(Vn,t)}}function Xn(e,t,n){"focusin"===e?(Gn(),Un=n,(Mn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Gn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(Un)}function Yn(e,t){if("click"===e)return zn(t)}function $n(e,t){if("input"===e||"change"===e)return zn(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function er(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!re.call(t,s)||!Zn(e[s],t[s]))return!1}return!0}function tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nr(e,t){var n,r=tr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tr(r)}}function rr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?rr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function sr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=zt&&"documentMode"in document&&11>=document.documentMode,or=null,lr=null,cr=null,ur=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ur||null==or||or!==pt(r)||("selectionStart"in(r=or)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},cr&&er(cr,r)||(cr=r,0<(r=sd(lr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},mr={},pr={};function gr(e){if(mr[e])return mr[e];if(!fr[e])return e;var t,n=fr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return mr[e]=n[t];return e}zt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);var vr=gr("animationend"),yr=gr("animationiteration"),br=gr("animationstart"),wr=gr("transitionrun"),xr=gr("transitionstart"),kr=gr("transitioncancel"),Nr=gr("transitionend"),Sr=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Sr.set(e,t),rt(t,[e])}Er.push("scrollEnd");var Cr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Tr=[],Ir=0,jr=0;function Ar(){for(var e=Ir,t=jr=Ir=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var s=Tr[t];Tr[t++]=null;var i=Tr[t];if(Tr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Or(n,s,i)}}function Pr(e,t,n,r){Tr[Ir++]=e,Tr[Ir++]=t,Tr[Ir++]=n,Tr[Ir++]=r,jr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return Pr(e,t,n,r),Lr(e)}function Rr(e,t){return Pr(e,null,null,t),Lr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-we(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Lr(e){if(50<Wc)throw Wc=0,Kc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Fr(e,t,n,r)}function Vr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Vr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Ur(31,n,t,s)).elementType=C,e.lanes=i,e;case v:return Hr(n.children,s,i,t);case y:o=8,s|=24;break;case b:return(e=Ur(12,n,t,2|s)).elementType=b,e.lanes=i,e;case N:return(e=Ur(13,n,t,s)).elementType=N,e.lanes=i,e;case S:return(e=Ur(19,n,t,s)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case w:o=9;break e;case k:o=11;break e;case E:o=14;break e;case _:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Ur(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Hr(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Kr(e){var t=Ur(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qr=new WeakMap;function Xr(e,t){if("object"===typeof e&&null!==e){var n=Qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Jr=[],Yr=0,$r=null,Zr=0,es=[],ts=0,ns=null,rs=1,ss="";function is(e,t){Jr[Yr++]=Zr,Jr[Yr++]=$r,$r=e,Zr=t}function as(e,t,n){es[ts++]=rs,es[ts++]=ss,es[ts++]=ns,ns=e;var r=rs;e=ss;var s=32-we(r)-1;r&=~(1<<s),n+=1;var i=32-we(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,rs=1<<32-we(t)+s|n<<s|r,ss=i+e}else rs=1<<i|n<<s|r,ss=e}function os(e){null!==e.return&&(is(e,1),as(e,1,0))}function ls(e){for(;e===$r;)$r=Jr[--Yr],Jr[Yr]=null,Zr=Jr[--Yr],Jr[Yr]=null;for(;e===ns;)ns=es[--ts],es[ts]=null,ss=es[--ts],es[ts]=null,rs=es[--ts],es[ts]=null}function cs(e,t){es[ts++]=rs,es[ts++]=ss,es[ts++]=ns,rs=t.id,ss=t.overflow,ns=e}var us=null,ds=null,hs=!1,fs=null,ms=!1,ps=Error(a(519));function gs(e){throw ks(Xr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ps}function vs(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Be]=r,n){case"dialog":Yu("cancel",t),Yu("close",t);break;case"iframe":case"object":case"embed":Yu("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)Yu(Qu[n],t);break;case"source":Yu("error",t);break;case"img":case"image":case"link":Yu("error",t),Yu("load",t);break;case"details":Yu("toggle",t);break;case"input":Yu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Yu("invalid",t);break;case"textarea":Yu("invalid",t),Nt(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ud(t.textContent,n)?(null!=r.popover&&(Yu("beforetoggle",t),Yu("toggle",t)),null!=r.onScroll&&Yu("scroll",t),null!=r.onScrollEnd&&Yu("scrollend",t),null!=r.onClick&&(t.onclick=Pt),t=!0):t=!1,t||gs(e,!0)}function ys(e){for(us=e.return;us;)switch(us.tag){case 5:case 31:case 13:return void(ms=!1);case 27:case 3:return void(ms=!0);default:us=us.return}}function bs(e){if(e!==us)return!1;if(!hs)return ys(e),hs=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&ds&&gs(e),ys(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ds=Ld(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ds=Ld(e)}else 27===n?(n=ds,Cd(e.type)?(e=Od,Od=null,ds=e):ds=n):ds=us?Rd(e.stateNode.nextSibling):null;return!0}function ws(){ds=us=null,hs=!1}function xs(){var e=fs;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),fs=null),e}function ks(e){null===fs?fs=[e]:fs.push(e)}var Ns=U(null),Ss=null,Es=null;function _s(e,t,n){z(Ns,t._currentValue),t._currentValue=n}function Cs(e){e._currentValue=Ns.current,V(Ns)}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ts(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Ts(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function js(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Zn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(dh):e=[dh])}s=s.return}null!==e&&Is(t,e,n,r),t.flags|=262144}function As(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ps(e){Ss=e,Es=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ds(e){return Os(Ss,e)}function Rs(e,t){return null===Ss&&Ps(e),Os(e,t)}function Os(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Es){if(null===e)throw Error(a(308));Es=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Es=Es.next=t;return n}var Ls="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ms=r.unstable_scheduleCallback,Fs=r.unstable_NormalPriority,Us={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vs(){return{controller:new Ls,data:new Map,refCount:0}}function zs(e){e.refCount--,0===e.refCount&&Ms(Fs,function(){e.controller.abort()})}var Bs=null,qs=0,Hs=0,Ws=null;function Ks(){if(0===--qs&&null!==Bs){null!==Ws&&(Ws.status="fulfilled");var e=Bs;Bs=null,Hs=0,Ws=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gs=R.S;R.S=function(e,t){Rc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bs){var n=Bs=[];qs=0,Hs=qu(),Ws={status:"pending",value:void 0,then:function(e){n.push(e)}}}qs++,t.then(Ks,Ks)}(0,t),null!==Gs&&Gs(e,t)};var Qs=U(null);function Xs(){var e=Qs.current;return null!==e?e:pc.pooledCache}function Js(e,t){z(Qs,null===t?Qs.current:t.pool)}function Ys(){var e=Xs();return null===e?null:{parent:Us._currentValue,pool:e}}var $s=Error(a(460)),Zs=Error(a(474)),ei=Error(a(542)),ti={then:function(){}};function ni(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ri(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Pt,Pt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(Pt,Pt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw ii=t,$s}}function si(e){try{return(0,e._init)(e._payload)}catch(Fn){if(null!==Fn&&"object"===typeof Fn&&"function"===typeof Fn.then)throw ii=Fn,$s;throw Fn}}var ii=null;function ai(){if(null===ii)throw Error(a(459));var e=ii;return ii=null,e}function oi(e){if(e===$s||e===ei)throw Error(a(483))}var li=null,ci=0;function ui(e){var t=ci;return ci+=1,null===li&&(li=[]),ri(li,e,t)}function di(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hi(e,t){if(t.$$typeof===m)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===_&&si(i)===t.type)?(di(t=s(t,n.props),n),t.return=e,t):(di(t=qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return di(n=qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Gr(t,e.mode,n)).return=e,t;case _:return h(e,t=si(t),n)}if(D(t)||j(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ui(t),n);if(t.$$typeof===x)return h(e,Rs(e,t),n);hi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,r):null;case g:return n.key===s?u(e,t,n,r):null;case _:return f(e,t,n=si(n),r)}if(D(n)||j(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ui(n),r);if(n.$$typeof===x)return f(e,t,Rs(e,n),r);hi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return m(e,t,n,r=si(r),s)}if(D(r)||j(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return m(e,t,n,ui(r),s);if(r.$$typeof===x)return m(e,t,n,Rs(t,r),s);hi(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===v){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===_&&si(b)===c.type){n(l,c.sibling),di(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(di(d=qr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Gr(u,l.mode,d)).return=l,l=d}return o(l);case _:return y(l,c,u=si(u),d)}if(D(u))return function(s,a,o,l){for(var c=null,u=null,d=a,p=a=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=f(s,d,o[p],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(s,d),a=i(v,a,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===o.length)return n(s,d),hs&&is(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(a=i(d,a,p),null===u?c=d:u.sibling=d,u=d);return hs&&is(s,p),c}for(d=r(d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),a=i(g,a,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),hs&&is(s,p),c}(l,c,u,d);if(j(u)){if("function"!==typeof(b=j(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,g=o=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var b=f(s,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(s,p),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(s,p),hs&&is(s,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return hs&&is(s,g),u}for(p=r(p);!y.done;g++,y=l.next())null!==(y=m(p,s,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(s,e)}),hs&&is(s,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,ui(u),d);if(u.$$typeof===x)return y(l,c,Rs(l,u),d);hi(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Wr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ci=0;var s=y(e,t,n,r);return li=null,s}catch(Fn){if(Fn===$s||Fn===ei)throw Fn;var i=Ur(29,Fn,null,e.mode);return i.lanes=r,i.return=e,i}}}var mi=fi(!0),pi=fi(!1),gi=!1;function vi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&mc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Lr(e),Or(e,null,n),t}return Pr(e,r,t,n),Lr(e)}function xi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function ki(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ni=!1;function Si(){if(Ni){if(null!==Ws)throw Ws}}function Ei(e,t,n,r){Ni=!1;var s=e.updateQueue;gi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(vc&h)===h:(r&h)===h){0!==h&&h===Hs&&(Ni=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;h=t;var v=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(v,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(v,d,h):p)||void 0===h)break e;d=f({},d,h);break e;case 2:gi=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),Ec|=a,e.lanes=a,e.memoizedState=d}}function _i(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Ci(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)_i(n[e],t)}var Ti=U(null),Ii=U(0);function ji(e,t){z(Ii,e=Nc),z(Ti,t),Nc=e|t.baseLanes}function Ai(){z(Ii,Nc),z(Ti,Ti.current)}function Pi(){Nc=Ii.current,V(Ti),V(Ii)}var Di=U(null),Ri=null;function Oi(e){var t=e.alternate;z(Vi,1&Vi.current),z(Di,e),null===Ri&&(null===t||null!==Ti.current||null!==t.memoizedState)&&(Ri=e)}function Li(e){z(Vi,Vi.current),z(Di,e),null===Ri&&(Ri=e)}function Mi(e){22===e.tag?(z(Vi,Vi.current),z(Di,e),null===Ri&&(Ri=e)):Fi()}function Fi(){z(Vi,Vi.current),z(Di,Di.current)}function Ui(e){V(Di),Ri===e&&(Ri=null),V(Vi)}var Vi=U(0);function zi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||Dd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=0,qi=null,Hi=null,Wi=null,Ki=!1,Gi=!1,Qi=!1,Xi=0,Ji=0,Yi=null,$i=0;function Zi(){throw Error(a(321))}function ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function ta(e,t,n,r,s,i){return Bi=i,qi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?vo:yo,Qi=!1,i=n(r,s),Qi=!1,Gi&&(i=ra(t,n,r,s)),na(e),i}function na(e){R.H=go;var t=null!==Hi&&null!==Hi.next;if(Bi=0,Wi=Hi=qi=null,Ki=!1,Ji=0,Yi=null,t)throw Error(a(300));null===e||Ro||null!==(e=e.dependencies)&&As(e)&&(Ro=!0)}function ra(e,t,n,r){qi=e;var s=0;do{if(Gi&&(Yi=null),Ji=0,Gi=!1,25<=s)throw Error(a(301));if(s+=1,Wi=Hi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}R.H=bo,i=t(n,r)}while(Gi);return i}function sa(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?ua(t):t,e=e.useState()[0],(null!==Hi?Hi.memoizedState:null)!==e&&(qi.flags|=1024),t}function ia(){var e=0!==Xi;return Xi=0,e}function aa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oa(e){if(Ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ki=!1}Bi=0,Wi=Hi=qi=null,Gi=!1,Ji=Xi=0,Yi=null}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?qi.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function ca(){if(null===Hi){var e=qi.alternate;e=null!==e?e.memoizedState:null}else e=Hi.next;var t=null===Wi?qi.memoizedState:Wi.next;if(null!==t)Wi=t,Hi=e;else{if(null===e){if(null===qi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Hi=e).memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},null===Wi?qi.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function ua(e){var t=Ji;return Ji+=1,null===Yi&&(Yi=[]),e=ri(Yi,e,t),t=qi,null===(null===Wi?t.memoizedState:Wi.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?vo:yo),e}function da(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ua(e);if(e.$$typeof===x)return Ds(e)}throw Error(a(438,String(e)))}function ha(e){var t=null,n=qi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=qi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function fa(e,t){return"function"===typeof t?t(e):t}function ma(e){return pa(ca(),Hi,e)}function pa(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(vc&h)===h:(Bi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hs&&(d=!0);else{if((Bi&f)===f){u=u.next,f===Hs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,qi.lanes|=f,Ec|=f}h=u.action,Qi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,qi.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Zn(i,e.memoizedState)&&(Ro=!0,d&&null!==(n=Ws)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ga(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Zn(i,t.memoizedState)||(Ro=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function va(e,t,n){var r=qi,s=ca(),i=hs;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Zn((Hi||s).memoizedState,n);if(o&&(s.memoizedState=n,Ro=!0),s=s.queue,Ba(wa.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Wi&&1&Wi.memoizedState.tag){if(r.flags|=2048,Ma(9,{destroy:void 0},ba.bind(null,r,s,n,t),null),null===pc)throw Error(a(349));i||0!==(127&Bi)||ya(r,t,n)}return n}function ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=qi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ba(e,t,n,r){t.value=n,t.getSnapshot=r,xa(t)&&ka(e)}function wa(e,t,n){return n(function(){xa(t)&&ka(e)})}function xa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(r){return!0}}function ka(e){var t=Rr(e,2);null!==t&&Xc(t,e,2)}function Na(e){var t=la();if("function"===typeof e){var n=e;if(e=n(),Qi){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function Sa(e,t,n,r){return e.baseState=n,pa(e,Hi,"function"===typeof r?r:fa)}function Ea(e,t,n,r,s){if(fo(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==R.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,_a(t,i)):(i.next=n.next,t.pending=n.next=i)}}function _a(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=R.T,a={};R.T=a;try{var o=n(s,r),l=R.S;null!==l&&l(a,o),Ca(e,t,o)}catch(c){Ia(e,t,c)}finally{null!==i&&null!==a.types&&(i.types=a.types),R.T=i}}else try{Ca(e,t,i=n(s,r))}catch(u){Ia(e,t,u)}}function Ca(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ta(e,t,n)},function(n){return Ia(e,t,n)}):Ta(e,t,n)}function Ta(e,t,n){t.status="fulfilled",t.value=n,ja(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,_a(e,n)))}function Ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ja(t),t=t.next}while(t!==r)}e.action=null}function ja(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Aa(e,t){return t}function Pa(e,t){if(hs){var n=pc.formState;if(null!==n){e:{var r=qi;if(hs){if(ds){t:{for(var s=ds,i=ms;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=Rd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ds=Rd(s.nextSibling),r="F!"===s.data;break e}}gs(r)}r=!1}r&&(t=n[0])}}return(n=la()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:t},n.queue=r,n=co.bind(null,qi,r),r.dispatch=n,r=Na(!1),i=ho.bind(null,qi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=la()).queue=s,n=Ea.bind(null,qi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Da(e){return Ra(ca(),Hi,e)}function Ra(e,t,n){if(t=pa(e,t,Aa)[0],e=ma(fa)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ua(t)}catch(Fn){if(Fn===$s)throw ei;throw Fn}else r=t;var s=(t=ca()).queue,i=s.dispatch;return n!==t.memoizedState&&(qi.flags|=2048,Ma(9,{destroy:void 0},Oa.bind(null,s,n),null)),[r,i,e]}function Oa(e,t){e.action=t}function La(e){var t=ca(),n=Hi;if(null!==n)return Ra(t,n,e);ca(),t=t.memoizedState;var r=(n=ca()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=qi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return ca().memoizedState}function Ua(e,t,n,r){var s=la();qi.flags|=e,s.memoizedState=Ma(1|t,{destroy:void 0},n,void 0===r?null:r)}function Va(e,t,n,r){var s=ca();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==Hi&&null!==r&&ea(r,Hi.memoizedState.deps)?s.memoizedState=Ma(t,i,n,r):(qi.flags|=e,s.memoizedState=Ma(1|t,i,n,r))}function za(e,t){Ua(8390656,8,e,t)}function Ba(e,t){Va(2048,8,e,t)}function qa(e){var t=ca().memoizedState;return function(e){qi.flags|=4;var t=qi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&mc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ha(e,t){return Va(4,2,e,t)}function Wa(e,t){return Va(4,4,e,t)}function Ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ga(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Va(4,4,Ka.bind(null,t,e),n)}function Qa(){}function Xa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ea(t,r[1]))return r[0];if(r=e(),Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Ya(e,t,n){return void 0===n||0!==(1073741824&Bi)&&0===(261930&vc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),qi.lanes|=e,Ec|=e,n)}function $a(e,t,n,r){return Zn(n,t)?n:null!==Ti.current?(e=Ya(e,n,r),Zn(e,t)||(Ro=!0),e):0===(42&Bi)||0!==(1073741824&Bi)&&0===(261930&vc)?(Ro=!0,e.memoizedState=n):(e=Qc(),qi.lanes|=e,Ec|=e,t)}function Za(e,t,n,r,s){var i=O.p;O.p=0!==i&&8>i?i:8;var a=R.T,o={};R.T=o,ho(e,!1,t,n);try{var l=s(),c=R.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Gc());else uo(e,t,r,Gc())}catch(u){uo(e,t,{then:function(){},status:"rejected",reason:u},Gc())}finally{O.p=i,null!==a&&null!==o.types&&(a.types=o.types),R.T=a}}function eo(){}function to(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=no(e).queue;Za(e,s,t,L,null===n?eo:function(){return ro(e),n(r)})}function no(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ro(e){var t=no(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},Gc())}function so(){return Ds(dh)}function io(){return ca().memoizedState}function ao(){return ca().memoizedState}function oo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=wi(t,e=bi(n),n);return null!==r&&(Xc(r,t,n),xi(r,t,n)),t={cache:Vs()},void(e.payload=t)}t=t.return}}function lo(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fo(e)?mo(t,n):null!==(n=Dr(e,t,n,r))&&(Xc(n,e,r),po(n,t,r))}function co(e,t,n){uo(e,t,n,Gc())}function uo(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fo(e))mo(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Zn(o,a))return Pr(e,t,s,0),null===pc&&Ar(),!1}catch(l){}if(null!==(n=Dr(e,t,s,r)))return Xc(n,e,r),po(n,t,r),!0}return!1}function ho(e,t,n,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(a(479))}else null!==(t=Dr(e,n,r,2))&&Xc(t,e,2)}function fo(e){var t=e.alternate;return e===qi||null!==t&&t===qi}function mo(e,t){Gi=Ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function po(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var go={readContext:Ds,use:da,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi};go.useEffectEvent=Zi;var vo={readContext:Ds,use:da,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:za,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){Ua(4,2,e,t)},useMemo:function(e,t){var n=la();t=void 0===t?null:t;var r=e();if(Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=la();if(void 0!==n){var s=n(t);if(Qi){be(!0);try{n(t)}finally{be(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=lo.bind(null,qi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},la().memoizedState=e},useState:function(e){var t=(e=Na(e)).queue,n=co.bind(null,qi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qa,useDeferredValue:function(e,t){return Ya(la(),e,t)},useTransition:function(){var e=Na(!1);return e=Za.bind(null,qi,e.queue,!0,!1),la().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=qi,s=la();if(hs){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===pc)throw Error(a(349));0!==(127&vc)||ya(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,za(wa.bind(null,r,i,e),[e]),r.flags|=2048,Ma(9,{destroy:void 0},ba.bind(null,r,i,n,t),null),n},useId:function(){var e=la(),t=pc.identifierPrefix;if(hs){var n=ss;t="_"+t+"R_"+(n=(rs&~(1<<32-we(rs)-1)).toString(32)+n),0<(n=Xi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$i++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:so,useFormState:Pa,useActionState:Pa,useOptimistic:function(e){var t=la();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ho.bind(null,qi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return la().memoizedState=oo.bind(null,qi)},useEffectEvent:function(e){var t=la(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&mc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Ds,use:da,useCallback:Xa,useContext:Ds,useEffect:Ba,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Ja,useReducer:ma,useRef:Fa,useState:function(){return ma(fa)},useDebugValue:Qa,useDeferredValue:function(e,t){return $a(ca(),Hi.memoizedState,e,t)},useTransition:function(){var e=ma(fa)[0],t=ca().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:va,useId:io,useHostTransitionStatus:so,useFormState:Da,useActionState:Da,useOptimistic:function(e,t){return Sa(ca(),0,e,t)},useMemoCache:ha,useCacheRefresh:ao};yo.useEffectEvent=qa;var bo={readContext:Ds,use:da,useCallback:Xa,useContext:Ds,useEffect:Ba,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Ja,useReducer:ga,useRef:Fa,useState:function(){return ga(fa)},useDebugValue:Qa,useDeferredValue:function(e,t){var n=ca();return null===Hi?Ya(n,e,t):$a(n,Hi.memoizedState,e,t)},useTransition:function(){var e=ga(fa)[0],t=ca().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:va,useId:io,useHostTransitionStatus:so,useFormState:La,useActionState:La,useOptimistic:function(e,t){var n=ca();return null!==Hi?Sa(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:ao};function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=qa;var xo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),s=bi(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=wi(e,s,r))&&(Xc(t,e,r),xi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),s=bi(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=wi(e,s,r))&&(Xc(t,e,r),xi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=bi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=wi(e,r,n))&&(Xc(t,e,n),xi(t,e,n))}};function ko(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!er(n,r)||!er(s,i))}function No(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function So(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=f({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function Eo(e){Cr(e)}function _o(e){console.error(e)}function Co(e){Cr(e)}function To(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Io(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function jo(e,t,n){return(n=bi(n)).tag=3,n.payload={element:null},n.callback=function(){To(e,t)},n}function Ao(e){return(e=bi(e)).tag=3,e}function Po(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){Io(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Io(t,n,r),"function"!==typeof s&&(null===Mc?Mc=new Set([this]):Mc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Do=Error(a(461)),Ro=!1;function Oo(e,t,n,r){t.child=null===e?pi(t,null,n,r):mi(t,e.child,n,r)}function Lo(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ps(t),r=ta(e,t,n,a,i,s),o=ia(),null===e||Ro?(hs&&o&&os(t),t.flags|=1,Oo(e,t,r,s),t.child):(aa(e,t,s),il(e,t,s))}function Mo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Vr(i)||void 0!==i.defaultProps||null!==n.compare?((e=qr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Fo(e,t,i,r,s))}if(i=e.child,!al(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:er)(a,r)&&e.ref===t.ref)return il(e,t,s)}return t.flags|=1,(e=zr(i,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(er(i,r)&&e.ref===t.ref){if(Ro=!1,t.pendingProps=r=i,!al(e,s))return t.lanes=e.lanes,il(e,t,s);0!==(131072&e.flags)&&(Ro=!0)}}return Wo(e,t,n,r,s)}function Uo(e,t,n,r){var s=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~i}else r=0,t.child=null;return zo(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,zo(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Js(0,null!==i?i.cachePool:null),null!==i?ji(t,i):Ai(),Mi(t)}else null!==i?(Js(0,i.cachePool),ji(t,i),Fi(),t.memoizedState=null):(null!==e&&Js(0,null),Ai(),Fi());return Oo(e,t,s,n),t.child}function Vo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zo(e,t,n,r,s){var i=Xs();return i=null===i?null:{parent:Us._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Js(0,null),Ai(),Mi(t),null!==e&&js(e,t,r,!0),t.childLanes=s,null}function Bo(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return mi(t,e.child,null,n),(e=Bo(t,t.pendingProps)).flags|=2,Ui(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wo(e,t,n,r,s){return Ps(t),n=ta(e,t,n,r,void 0,s),r=ia(),null===e||Ro?(hs&&r&&os(t),t.flags|=1,Oo(e,t,n,s),t.child):(aa(e,t,s),il(e,t,s))}function Ko(e,t,n,r,s,i){return Ps(t),t.updateQueue=null,n=ra(t,r,n,s),na(e),r=ia(),null===e||Ro?(hs&&r&&os(t),t.flags|=1,Oo(e,t,n,i),t.child):(aa(e,t,i),il(e,t,i))}function Go(e,t,n,r,s){if(Ps(t),null===t.stateNode){var i=Mr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Ds(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=xo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},vi(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Ds(a):Mr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(wo(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&xo.enqueueReplaceState(i,i.state,null),Ei(t,r,i,s),Si(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=So(n,o);i.props=l;var c=i.context,u=n.contextType;a=Mr,"object"===typeof u&&null!==u&&(a=Ds(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&No(t,i,r,a),gi=!1;var h=t.memoizedState;i.state=h,Ei(t,r,i,s),Si(),c=t.memoizedState,o||h!==c||gi?("function"===typeof d&&(wo(t,n,d,r),c=t.memoizedState),(l=gi||ko(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,yi(e,t),u=So(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Mr,"object"===typeof c&&null!==c&&(l=Ds(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&No(t,i,r,l),gi=!1,h=t.memoizedState,i.state=h,Ei(t,r,i,s),Si();var f=t.memoizedState;a!==d||h!==f||gi||null!==e&&null!==e.dependencies&&As(e.dependencies)?("function"===typeof o&&(wo(t,n,o,r),f=t.memoizedState),(u=gi||ko(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&As(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ho(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=mi(t,e.child,null,s),t.child=mi(t,null,n,s)):Oo(e,t,n,s),t.memoizedState=i.state,e=t.child):e=il(e,t,s),e}function Qo(e,t,n,r){return ws(),t.flags|=256,Oo(e,t,n,r),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:Ys()}}function Yo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tc),e}function $o(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Vi.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hs){if(i?Oi(t):Fi(),(e=ds)?null!==(e=null!==(e=Ad(e,ms))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ns?{id:rs,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,us=t,ds=null):e=null,null===e)throw gs(t);return Dd(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(Fi(),l=el({mode:"hidden",children:l},i=t.mode),s=Hr(s,i,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Jo(n),s.childLanes=Yo(e,r,n),t.memoizedState=Xo,Vo(null,s)):(Oi(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Oi(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Fi(),t.child=e.child,t.flags|=128,t=null):(Fi(),l=s.fallback,i=t.mode,s=el({mode:"visible",children:s.children},i),(l=Hr(l,i,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,mi(t,e.child,null,n),(s=t.child).memoizedState=Jo(n),s.childLanes=Yo(e,r,n),t.memoizedState=Xo,t=Vo(null,s));else if(Oi(t),Dd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ks({value:s,source:null,stack:null}),t=tl(e,t,n)}else if(Ro||js(e,t,n,!1),r=0!==(n&e.childLanes),Ro||r){if(null!==(r=pc)&&(0!==(s=Oe(r,n))&&s!==c.retryLane))throw c.retryLane=s,Rr(e,s),Xc(r,e,s),Do;Pd(l)||ou(),t=tl(e,t,n)}else Pd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ds=Rd(l.nextSibling),us=t,hs=!0,fs=null,ms=!1,null!==e&&cs(t,e),(t=Zo(t,s.children)).flags|=4096);return t}return i?(Fi(),l=s.fallback,i=t.mode,u=(c=e.child).sibling,(s=zr(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=zr(u,l):(l=Hr(l,i,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,Vo(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Jo(n):(null!==(i=l.cachePool)?(c=Us._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Ys(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=Yo(e,r,n),t.memoizedState=Xo,Vo(e.child,s)):(Oi(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Ur(22,e,null,t)).lanes=0,e}function tl(e,t,n){return mi(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function rl(e,t,n,r,s,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s,a.treeForkCount=i)}function sl(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;r=r.children;var a=Vi.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,z(Vi,a),Oo(e,t,r,n),r=hs?Zr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===zi(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),rl(t,!1,s,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===zi(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}rl(t,!0,n,null,i,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(js(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!As(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ro=!0;else{if(!al(e,n)&&0===(128&t.flags))return Ro=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),_s(0,Us,e.memoizedState.cache),ws();break;case 27:case 5:J(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:_s(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Li(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Oi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$o(e,t,n):(Oi(t),null!==(e=il(e,t,n))?e.sibling:null);Oi(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(js(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return sl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(Vi,Vi.current),r)break;return null;case 22:return t.lanes=0,Uo(e,t,n,t.pendingProps);case 24:_s(0,Us,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Ro=0!==(131072&e.flags)}else Ro=!1,hs&&0!==(1048576&t.flags)&&as(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=si(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var s=e.$$typeof;if(s===k){t.tag=11,t=Lo(null,t,e,r,n);break e}if(s===E){t.tag=14,t=Mo(null,t,e,r,n);break e}}throw t=P(e)||e,Error(a(306,t,""))}Vr(e)?(r=So(e,r),t.tag=1,t=Go(null,t,e,r,n)):(t.tag=0,t=Wo(null,t,e,r,n))}return t;case 0:return Wo(e,t,t.type,t.pendingProps,n);case 1:return Go(e,t,r=t.type,s=So(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,yi(e,t),Ei(t,r,null,n);var o=t.memoizedState;if(r=o.cache,_s(0,Us,r),r!==i.cache&&Is(t,[Us],n,!0),Si(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Qo(e,t,r,n);break e}if(r!==s){ks(s=Xr(Error(a(424)),t)),t=Qo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ds=Rd(e.firstChild),us=t,hs=!0,fs=null,ms=!0,n=pi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ws(),r===s){t=il(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:hs||(n=t.type,e=t.pendingProps,(r=vd(K.current).createElement(n))[ze]=t,r[Be]=e,fd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&hs&&(r=t.stateNode=Fd(t.type,t.pendingProps,K.current),us=t,ms=!0,s=ds,Cd(t.type)?(Od=s,ds=Rd(r.firstChild)):ds=s),Oo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hs&&((s=r=ds)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=Rd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ms))?(t.stateNode=r,us=t,ds=Rd(r.firstChild),ms=!1,s=!0):s=!1),s||gs(t)),J(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,wd(s,i)?r=null:null!==o&&wd(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ta(e,t,sa,null,null,n),dh._currentValue=s),Ho(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&hs&&((e=n=ds)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}(n,t.pendingProps,ms))?(t.stateNode=n,us=t,ds=null,e=!0):e=!1),e||gs(t)),null;case 13:return $o(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=mi(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return Lo(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_s(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ps(t),r=r(s=Ds(s)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Mo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return sl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,s=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hs){if("hidden"===r.mode)return e=Bo(t,r),t.lanes=536870912,Vo(null,e);if(Li(t),(e=ds)?null!==(e=null!==(e=Ad(e,ms))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ns?{id:rs,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,us=t,ds=null):e=null,null===e)throw gs(t);return t.lanes=536870912,null}return Bo(t,r)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Li(t),s)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Ro||js(e,t,n,!1),s=0!==(n&e.childLanes),Ro||s){if(null!==(r=pc)&&0!==(o=Oe(r,n))&&o!==i.retryLane)throw i.retryLane=o,Rr(e,o),Xc(r,e,o),Do;ou(),t=qo(e,t,n)}else e=i.treeContext,ds=Rd(o.nextSibling),us=t,hs=!0,fs=null,ms=!1,null!==e&&cs(t,e),(t=Bo(t,r)).flags|=4096;return t}return(e=zr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Uo(e,t,n,t.pendingProps);case 24:return Ps(t),r=Ds(Us),null===e?(null===(s=Xs())&&(s=pc,i=Vs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},vi(t),_s(0,Us,s)):(0!==(e.lanes&n)&&(yi(e,t),Ei(t,null,null,n),Si()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),_s(0,Us,r)):(r=i.cache,_s(0,Us,r),r!==s.cache&&Is(t,[Us],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,s){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!su())throw ii=ti,Zs;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!su())throw ii=ti,Zs;e.flags|=8192}}function dl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?je():536870912,e.lanes|=t,Ic|=t)}function hl(e,t){if(!hs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ml(e,t,n){var r=t.pendingProps;switch(ls(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Cs(Us),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bs(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,xs())),fl(t),null;case 26:var s=t.type,i=t.memoizedState;return null===e?(ll(t),null!==i?(fl(t),ul(t,i)):(fl(t),cl(t,s,0,0,n))):i?i!==e.memoizedState?(ll(t),fl(t),ul(t,i)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,s,0,0,n)),null;case 27:if(Y(t),n=K.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return fl(t),null}e=H.current,bs(t)?vs(t):(e=Fd(s,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if(Y(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return fl(t),null}if(i=H.current,bs(t))vs(t);else{var o=vd(K.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?o.createElement(s,{is:r.is}):o.createElement(s)}}i[ze]=t,i[Be]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(fd(i,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=K.current,bs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=us))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ud(e.nodeValue,n)))||gs(t,!0)}else(e=vd(e).createTextNode(r))[ze]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bs(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[ze]=t}else ws(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=xs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ui(t),t):(Ui(t),null);if(0!==(128&t.flags))throw Error(a(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=bs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[ze]=t}else ws(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),s=!1}else s=xs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Ui(t),t):(Ui(t),null)}return Ui(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),fl(t),null);case 4:return X(),null===e&&ed(t.stateNode.containerInfo),fl(t),null;case 10:return Cs(t.type),fl(t),null;case 19:if(V(Vi),null===(r=t.memoizedState))return fl(t),null;if(s=0!==(128&t.flags),null===(i=r.rendering))if(s)hl(r,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=zi(e))){for(t.flags|=128,hl(r,!1),e=i.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return z(Vi,1&Vi.current|2),hs&&is(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=zi(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!hs)return fl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Vi.current,z(Vi,s?1&n|2:1&n),hs&&is(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return Ui(t),Pi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&dl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Qs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Cs(Us),fl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function pl(e,t){switch(ls(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Cs(Us),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 31:if(null!==t.memoizedState){if(Ui(t),null===t.alternate)throw Error(a(340));ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ui(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Vi),null;case 4:return X(),null;case 10:return Cs(t.type),null;case 22:case 23:return Ui(t),Pi(),null!==e&&V(Qs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Cs(Us),null;default:return null}}function gl(e,t){switch(ls(t),t.tag){case 3:Cs(Us),X();break;case 26:case 27:case 5:Y(t);break;case 4:X();break;case 31:null!==t.memoizedState&&Ui(t);break;case 13:Ui(t);break;case 19:V(Vi);break;case 10:Cs(t.type);break;case 22:case 23:Ui(t),Pi(),null!==e&&V(Qs);break;case 24:Cs(Us)}}function vl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){Su(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){Su(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){Su(t,t.return,u)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ci(t,n)}catch(r){Su(e,e.return,r)}}}function wl(e,t,n){n.props=So(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Su(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){Su(e,t,s)}}function kl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){Su(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Su(e,t,i)}else n.current=null}function Nl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){Su(e,e.return,s)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||dd(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&dd(e,t,f,m,r,h)}}return void yt(e,o,l,c,u,d,i,s);case"select":for(i in m=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(i)||dd(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&dd(e,t,s,i,r,c)}return t=l,n=o,r=m,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:dd(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&dd(e,t,o,s,r,i)}return void kt(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else dd(e,t,p,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else dd(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&dd(e,t,g,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:dd(e,t,u,f,r,m)}return;default:if(Tt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&hd(e,t,v,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||hd(e,t,d,f,r,m);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&dd(e,t,y,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||dd(e,t,h,f,r,m)}(r,e.type,n,t),r[Be]=t}catch(s){Su(e,e.return,s)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function _l(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pt));else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);fd(t,r,n),t[ze]=e,t[Be]=n}catch(i){Su(e,e.return,i)}}var jl=!1,Al=!1,Pl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Rl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Xl(e,n),4&r&&vl(5,n);break;case 1:if(Xl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Su(n,n.return,a)}else{var s=So(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Su(n,n.return,o)}}64&r&&bl(n),512&r&&xl(n,n.return);break;case 3:if(Xl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ci(e,t)}catch(a){Su(n,n.return,a)}}break;case 27:null===t&&4&r&&Il(n);case 26:case 5:Xl(e,n),null===t&&4&r&&Nl(n),512&r&&xl(n,n.return);break;case 12:Xl(e,n);break;case 31:Xl(e,n),4&r&&zl(e,n);break;case 13:Xl(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Tu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||jl)){t=null!==t&&null!==t.memoizedState||Al,s=jl;var i=Al;jl=r,(Al=t)&&!i?Yl(e,n,0!==(8772&n.subtreeFlags)):Xl(e,n),jl=s,Al=i}break;case 30:break;default:Xl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ml=null,Fl=!1;function Ul(e,t,n){for(n=n.child;null!==n;)Vl(e,t,n),n=n.sibling}function Vl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(i){}switch(n.tag){case 26:Al||kl(n,t),Ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Al||kl(n,t);var r=Ml,s=Fl;Cd(n.type)&&(Ml=n.stateNode,Fl=!1),Ul(e,t,n),Ud(n.stateNode),Ml=r,Fl=s;break;case 5:Al||kl(n,t);case 6:if(r=Ml,s=Fl,Ml=null,Ul(e,t,n),Fl=s,null!==(Ml=r))if(Fl)try{(9===Ml.nodeType?Ml.body:"HTML"===Ml.nodeName?Ml.ownerDocument.body:Ml).removeChild(n.stateNode)}catch(a){Su(n,t,a)}else try{Ml.removeChild(n.stateNode)}catch(a){Su(n,t,a)}break;case 18:null!==Ml&&(Fl?(Td(9===(e=Ml).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):Td(Ml,n.stateNode));break;case 4:r=Ml,s=Fl,Ml=n.stateNode.containerInfo,Fl=!0,Ul(e,t,n),Ml=r,Fl=s;break;case 0:case 11:case 14:case 15:yl(2,n,t),Al||yl(4,n,t),Ul(e,t,n);break;case 1:Al||(kl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),Ul(e,t,n);break;case 21:Ul(e,t,n);break;case 22:Al=(r=Al)||null!==n.memoizedState,Ul(e,t,n),Al=r;break;default:Ul(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){Su(t,t.return,n)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){Su(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Iu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Cd(l.type)){Ml=l.stateNode,Fl=!1;break e}break;case 5:Ml=l.stateNode,Fl=!1;break e;case 3:case 4:Ml=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Ml)throw Error(a(160));Vl(i,o,s),Ml=null,Fl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Gl(e),4&r&&(yl(3,e,e.return),vl(3,e),yl(5,e,e.return));break;case 1:Hl(t,e),Gl(e),512&r&&(Al||null===n||kl(n,n.return)),64&r&&jl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Wl;if(Hl(t,e),Gl(e),512&r&&(Al||null===n||kl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Qe]||i[ze]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),fd(i,r,n),i[ze]=e,et(i),r=i;break e;case"link":var o=rh("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}fd(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=rh("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}fd(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[ze]=e,et(i),r=i}e.stateNode=r}else sh(s,e.type,e.stateNode);else e.stateNode=$d(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?sh(s,e.type,e.stateNode):$d(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Gl(e),512&r&&(Al||null===n||kl(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Gl(e),512&r&&(Al||null===n||kl(n,n.return)),32&e.flags){s=e.stateNode;try{St(s,"")}catch(p){Su(e,e.return,p)}}4&r&&null!=e.stateNode&&Sl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(Pl=!0);break;case 6:if(Hl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){Su(e,e.return,p)}}break;case 3:if(nh=null,s=Wl,Wl=Bd(t.containerInfo),Hl(t,e),Wl=s,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(p){Su(e,e.return,p)}Pl&&(Pl=!1,Ql(e));break;case 4:r=Wl,Wl=Bd(e.stateNode.containerInfo),Hl(t,e),Gl(e),Wl=r;break;case 12:default:Hl(t,e),Gl(e);break;case 31:case 19:Hl(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 13:Hl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=jl,d=Al;if(jl=u||s,Al=d||c,Hl(t,e),Al=d,jl=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||jl||Al||Jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){Su(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){Su(c,c.return,p)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;s?Id(m,!0):Id(c.stateNode,!1)}catch(p){Su(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,ql(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;Tl(e,_l(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(St(i,""),n.flags&=-33),Tl(e,_l(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;Cl(e,_l(e),o);break;default:throw Error(a(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Xl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Jl(t);break;case 1:kl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),Jl(t);break;case 27:Ud(t.stateNode);case 26:case 5:kl(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function Yl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Yl(s,i,n),vl(4,i);break;case 1:if(Yl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Su(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)_i(l[s],o)}catch(c){Su(r,r.return,c)}}n&&64&a&&bl(i),xl(i,i.return);break;case 27:Il(i);case 26:case 5:Yl(s,i,n),n&&null===r&&4&a&&Nl(i),xl(i,i.return);break;case 12:Yl(s,i,n);break;case 31:Yl(s,i,n),n&&4&a&&zl(s,i);break;case 13:Yl(s,i,n),n&&4&a&&Bl(s,i);break;case 22:null===i.memoizedState&&Yl(s,i,n),xl(i,i.return);break;case 30:break;default:Yl(s,i,n)}t=t.sibling}}function $l(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&zs(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zs(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&s&&vl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zs(e)));break;case 12:if(2048&s){ec(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Su(t,t.return,l)}}else ec(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?ec(e,t,n,r):rc(e,t):2&i._visibility?ec(e,t,n,r):(i._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&s&&$l(a,t);break;case 24:ec(e,t,n,r),2048&s&&Zl(t.alternate,t)}}function nc(e,t,n,r,s){for(s=s&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:nc(i,a,o,l,s),vl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?nc(i,a,o,l,s):rc(i,a):(u._visibility|=2,nc(i,a,o,l,s)),s&&2048&c&&$l(a.alternate,a);break;case 24:nc(i,a,o,l,s),s&&2048&c&&Zl(a.alternate,a);break;default:nc(i,a,o,l,s)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:rc(n,r),2048&s&&$l(r.alternate,r);break;case 24:rc(n,r),2048&s&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var sc=8192;function ic(e,t,n){if(e.subtreeFlags&sc)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&sc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var s=Gd(r.href),i=t.querySelector(Qd(s));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Xd(r),(s=Vd.get(s))&&eh(r,s),et(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=Wl;Wl=Bd(e.stateNode.containerInfo),ic(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=sc,sc=16777216,ic(e,t,n),sc=r):ic(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Rl=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function dc(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:zs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Rl=r;else e:for(n=e;null!==Rl;){var s=(r=Rl).sibling,i=r.return;if(Ll(r),r===n){Rl=null;break e}if(null!==s){s.return=i,Rl=s;break e}Rl=i}}}var hc={getCacheForType:function(e){var t=Ds(Us),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ds(Us).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,mc=0,pc=null,gc=null,vc=0,yc=0,bc=null,wc=!1,xc=!1,kc=!1,Nc=0,Sc=0,Ec=0,_c=0,Cc=0,Tc=0,Ic=0,jc=null,Ac=null,Pc=!1,Dc=0,Rc=0,Oc=1/0,Lc=null,Mc=null,Fc=0,Uc=null,Vc=null,zc=0,Bc=0,qc=null,Hc=null,Wc=0,Kc=null;function Gc(){return 0!==(2&mc)&&0!==vc?vc&-vc:null!==R.T?qu():Fe()}function Qc(){if(0===Tc)if(0===(536870912&vc)||hs){var e=Se;0===(3932160&(Se<<=1))&&(Se=262144),Tc=e}else Tc=536870912;return null!==(e=Di.current)&&(e.flags|=32),Tc}function Xc(e,t,n){(e!==pc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,vc,Tc,!1)),Pe(e,n),0!==(2&mc)&&e===pc||(e===pc&&(0===(2&mc)&&(_c|=n),4===Sc&&Zc(e,vc,Tc,!1)),Lu(e))}function Jc(e,t,n){if(0!==(6&mc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),s=r?function(e,t){var n=mc;mc|=2;var r=iu(),s=au();pc!==e||vc!==t?(Lc=null,Oc=le()+500,nu(e,t)):xc=Te(e,t);e:for(;;)try{if(0!==yc&&null!==gc){t=gc;var i=bc;t:switch(yc){case 1:yc=0,bc=null,fu(e,t,i,1);break;case 2:case 9:if(ni(i)){yc=0,bc=null,hu(t);break}t=function(){2!==yc&&9!==yc||pc!==e||(yc=7),Lu(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ni(i)?(yc=0,bc=null,hu(t)):(yc=0,bc=null,fu(e,t,i,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?ih(o):l.stateNode.complete){yc=0,bc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,mu(u)):gc=null}break t}}yc=0,bc=null,fu(e,t,i,5);break;case 6:yc=0,bc=null,fu(e,t,i,6);break;case 8:tu(),Sc=6;break e;default:throw Error(a(462))}}uu();break}catch(d){ru(e,d)}return Es=Ss=null,R.H=r,R.A=s,mc=n,null!==gc?0:(pc=null,vc=0,Ar(),Sc)}(e,t):lu(e,t,!0),i=r;;){if(0===s){xc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!i||$c(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=jc;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,o).flags|=256),2!==(o=lu(l,o,!1))){if(kc&&!c){l.errorRecoveryDisabledLanes|=i,_c|=i,s=4;break e}i=Ac,Ac=s,null!==i&&(null===Ac?Ac=i:Ac.push.apply(Ac,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Tc,!wc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=Dc+300-le())){if(Zc(r,t,Tc,!wc),0!==Ce(r,0,!0))break e;zc=t,r.timeoutHandle=kd(Yc.bind(null,r,n,Ac,Lc,Pc,t,Tc,_c,Ic,wc,i,"Throttled",-0,0),s)}else Yc(r,n,Ac,Lc,Pc,t,Tc,_c,Ic,wc,i,null,-0,0)}break}s=lu(e,t,!1),i=!1}Lu(e)}function Yc(e,t,n,r,s,i,a,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ac(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt});var m=(62914560&i)===i?Dc-le():(4194048&i)===i?Rc-le():0;if(m=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ah&&(ah=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],i=s.transferSize,a=s.initiatorType,o=s.duration;if(i&&o&&md(a)){for(a=0,o=s.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&md(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(i+a)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ah?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}(d,m),null!==m)return zc=i,e.cancelPendingCommit=m(gu.bind(null,e,t,i,n,r,s,a,o,l,u,d,null,h,f)),void Zc(e,i,a,!c)}gu(e,t,i,n,r,s,a,o,l)}function $c(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Cc,t&=~_c,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-we(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&De(e,n,t)}function eu(){return 0!==(6&mc)||(Mu(0,!1),!1)}function tu(){if(null!==gc){if(0===yc)var e=gc.return;else Es=Ss=null,oa(e=gc),li=null,ci=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Nd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc=0,tu(),pc=e,gc=n=zr(e.current,null),vc=t,yc=0,bc=null,wc=!1,xc=Te(e,t),kc=!1,Ic=Tc=Cc=_c=Ec=Sc=0,Ac=jc=null,Pc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-we(r),i=1<<s;t|=e[s],r&=~i}return Nc=t,Ar(),n}function ru(e,t){qi=null,R.H=go,t===$s||t===ei?(t=ai(),yc=3):t===Zs?(t=ai(),yc=4):yc=t===Do?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===gc&&(Sc=1,To(e,Xr(t,e.current)))}function su(){var e=Di.current;return null===e||((4194048&vc)===vc?null===Ri:((62914560&vc)===vc||0!==(536870912&vc))&&e===Ri)}function iu(){var e=R.H;return R.H=go,null===e?go:e}function au(){var e=R.A;return R.A=hc,e}function ou(){Sc=4,wc||(4194048&vc)!==vc&&null!==Di.current||(xc=!0),0===(134217727&Ec)&&0===(134217727&_c)||null===pc||Zc(pc,vc,Tc,!1)}function lu(e,t,n){var r=mc;mc|=2;var s=iu(),i=au();pc===e&&vc===t||(Lc=null,nu(e,t)),t=!1;var a=Sc;e:for(;;)try{if(0!==yc&&null!==gc){var o=gc,l=bc;switch(yc){case 8:tu(),a=6;break e;case 3:case 2:case 9:case 6:null===Di.current&&(t=!0);var c=yc;if(yc=0,bc=null,fu(e,o,l,c),n&&xc){a=0;break e}break;default:c=yc,yc=0,bc=null,fu(e,o,l,c)}}cu(),a=Sc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Es=Ss=null,mc=r,R.H=s,R.A=i,null===gc&&(pc=null,vc=0,Ar()),a}function cu(){for(;null!==gc;)du(gc)}function uu(){for(;null!==gc&&!ae();)du(gc)}function du(e){var t=ol(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?mu(e):gc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,vc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,vc);break;case 5:oa(t);default:gl(n,t),t=ol(n,t=gc=Br(t,Nc),Nc)}e.memoizedProps=e.pendingProps,null===t?mu(e):gc=t}function fu(e,t,n,r){Es=Ss=null,oa(t),li=null,ci=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&js(t,n,s,!0),null!==(n=Di.current)){switch(n.tag){case 31:case 13:return null===Ri?ou():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,s)),!1;case 22:return n.flags|=65536,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,s)),!1}throw Error(a(435,n.tag))}return Eu(e,r,s),ou(),!1}if(hs)return null!==(t=Di.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ps&&ks(Xr(e=Error(a(422),{cause:r}),n))):(r!==ps&&ks(Xr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Xr(r,n),ki(e,s=jo(e.stateNode,r,s)),4!==Sc&&(Sc=2)),!1;var i=Error(a(520),{cause:r});if(i=Xr(i,n),null===jc?jc=[i]:jc.push(i),4!==Sc&&(Sc=2),null===t)return!0;r=Xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ki(n,e=jo(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Mc||!Mc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,Po(s=Ao(s),e,n,r),ki(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,vc))return Sc=1,To(e,Xr(n,e.current)),void(gc=null)}catch(i){if(null!==s)throw gc=s,i;return Sc=1,To(e,Xr(n,e.current)),void(gc=null)}32768&t.flags?(hs||1===r?e=!0:xc||0!==(536870912&vc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Di.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):mu(t)}function mu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,wc);e=t.return;var n=ml(t.alternate,t,Nc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===Sc&&(Sc=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);Sc=6,gc=null}function gu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==Fc);if(0!==(6&mc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-we(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&De(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=jr,o,l,c),e===pc&&(gc=pc=null,vc=0),Vc=t,Uc=e,zc=n,Bc=i,qc=s,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,se(he,function(){return ku(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,s=O.p,O.p=2,o=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,pd=wh,ir(e=sr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},wh=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(i=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=So(n.type,s);e=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){Su(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))jd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{mc=o,O.p=s,R.T=r}}Fc=1,vu(),yu(),bu()}}function vu(){if(1===Fc){Fc=0;var e=Uc,t=Vc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var r=O.p;O.p=2;var s=mc;mc|=4;try{Kl(t,e);var i=gd,a=sr(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&rr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(a=g,g=p,p=a);var v=nr(o,p),y=nr(o,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}wh=!!pd,gd=pd=null}finally{mc=s,O.p=r,R.T=n}}e.current=t,Fc=2}}function yu(){if(2===Fc){Fc=0;var e=Uc,t=Vc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var r=O.p;O.p=2;var s=mc;mc|=4;try{Ol(e,t.alternate,t)}finally{mc=s,O.p=r,R.T=n}}Fc=3}}function bu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Uc,t=Vc,n=zc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Vc=Uc=null,wu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Mc=null),Me(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,s=O.p,O.p=2,R.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{R.T=t,O.p=s}}0!==(3&zc)&&xu(),Lu(e),s=e.pendingLanes,0!==(261930&n)&&0!==(42&s)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,Mu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,zs(t)))}function xu(){return vu(),yu(),bu(),ku()}function ku(){if(5!==Fc)return!1;var e=Uc,t=Bc;Bc=0;var n=Me(zc),r=R.T,s=O.p;try{O.p=32>n?32:n,R.T=null,n=qc,qc=null;var i=Uc,o=zc;if(Fc=0,Vc=Uc=null,zc=0,0!==(6&mc))throw Error(a(331));var l=mc;if(mc|=4,cc(i.current),tc(i,i.current,o,n),mc=l,Mu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,i)}catch(c){}return!0}finally{O.p=s,R.T=r,wu(e,t)}}function Nu(e,t,n){t=Xr(n,t),null!==(e=wi(e,t=jo(e.stateNode,t,2),2))&&(Pe(e,2),Lu(e))}function Su(e,t,n){if(3===e.tag)Nu(e,e,n);else for(;null!==t;){if(3===t.tag){Nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Mc||!Mc.has(r))){e=Xr(n,e),null!==(r=wi(t,n=Ao(2),2))&&(Po(n,r,t,e),Pe(r,2),Lu(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(kc=!0,s.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(vc&n)===n&&(4===Sc||3===Sc&&(62914560&vc)===vc&&300>le()-Dc?0===(2&mc)&&nu(e,0):Cc|=n,Ic===vc&&(Ic=0)),Lu(e)}function Cu(e,t){0===t&&(t=je()),null!==(e=Rr(e,t))&&(Pe(e,t),Lu(e))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cu(e,n)}var ju=null,Au=null,Pu=!1,Du=!1,Ru=!1,Ou=0;function Lu(e){e!==Au&&null===e.next&&(null===Au?ju=Au=e:Au=Au.next=e),Du=!0,Pu||(Pu=!0,Ed(function(){0!==(6&mc)?se(ue,Fu):Uu()}))}function Mu(e,t){if(!Ru&&Du){Ru=!0;do{for(var n=!1,r=ju;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-we(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Bu(r,i))}else i=vc,0===(3&(i=Ce(r,r===pc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,i)||(n=!0,Bu(r,i));r=r.next}}while(n);Ru=!1}}function Fu(){Uu()}function Uu(){Du=Pu=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xd&&(xd=e,!0);return xd=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=ju;null!==r;){var s=r.next,i=Vu(r,t);0===i?(r.next=null,null===n?ju=s:n.next=s,null===s&&(Au=n)):(n=r,(0!==e||0!==(3&i))&&(Du=!0)),r=s}0!==Fc&&5!==Fc||Mu(e,!1),0!==Ou&&(Ou=0)}function Vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-we(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=vc,n=Ce(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Me(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=me}return r=zu.bind(null,e),n=se(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=vc;return 0===(r=Ce(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Bu(e,t){if(xu())return null;Jc(e,t,!0)}function qu(){if(0===Ou){var e=Hs;0===e&&(e=Ne,0===(261888&(Ne<<=1))&&(Ne=256)),Ou=e}return Ou}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<Er.length;Ku++){var Gu=Er[Ku];_r(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}_r(vr,"onAnimationEnd"),_r(yr,"onAnimationIteration"),_r(br,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(wr,"onTransitionRun"),_r(xr,"onTransitionStart"),_r(kr,"onTransitionCancel"),_r(Nr,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function Ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Cr(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Cr(u)}s.currentTarget=null,i=l}}}}function Yu(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(td(t,e,2,!1),n.add(r))}function $u(e,t,n){var r=0;t&&(r|=4),td(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Xu.has(t)||$u(t,!1,e),$u(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,$u("selectionchange",!1,t))}}function td(e,t,n,r){switch(Ch(t)){case 2:var s=xh;break;case 8:s=kh;break;default:s=Nh}n=s.bind(null,t,n,e),s=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function nd(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=Je(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Ut(function(){var r=i,s=Rt(n),a=[];e:{var o=Sr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case vr:case yr:case br:c=un;break;case Nr:c=xn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Nn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Vt(p,f))&&d.push(rd(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!Je(u)&&!u[qe])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Je(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:$e(c),m=null==u?o:$e(u),(o=new d(g,p+"leave",c,n,s)).target=h,o.relatedTarget=m,g=null,Je(s)===r&&((d=new d(f,p+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=id,p=u,m=0,g=f=c;g;g=d(g))m++;g=0;for(var v=p;v;v=d(v))g++;for(;0<m-g;)f=d(f),m--;for(;0<g-m;)p=d(p),g--;for(;m--;){if(f===p||null!==p&&f===p.alternate){d=f;break e}f=d(f),p=d(p)}d=null}else d=null;null!==c&&ad(a,o,c,d,!1),null!==u&&null!==h&&ad(a,h,u,d,!0)}if("select"===(c=(o=r?$e(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Bn;else if(On(o))if(qn)y=$n;else{y=Jn;var b=Xn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(y=Bn):y=Yn;switch(y&&(y=y(e,r))?Ln(a,y,n,s):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&wt(o,"number",o.value)),b=r?$e(r):window,e){case"focusin":(On(b)||"true"===b.contentEditable)&&(or=b,lr=r,cr=null);break;case"focusout":cr=lr=or=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,dr(a,n,s);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":dr(a,n,s)}var w;if(En)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Dn?An(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Tn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Dn&&(w=Gt()):(Wt="value"in(Ht=s)?Ht.value:Ht.textContent,Dn=!0)),0<(b=sd(r,x)).length&&(x=new hn(x,e,null,n,s),a.push({event:x,listeners:b}),w?x.data=w:null!==(w=Pn(n))&&(x.data=w))),(w=Cn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(jn=!0,In);case"textInput":return(e=t.data)===In&&jn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!En&&An(e,t)?(e=Gt(),Kt=Wt=Ht=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=sd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,s),a.push({event:b,listeners:x}),b.data=w)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Hu((s[Be]||null).action),a=r.submitter;a&&null!==(t=(t=a[Be]||null)?Hu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new nn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=a?Wu(s,a):new FormData(s);to(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Wu(s,a):new FormData(s),to(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Ju(a,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sd(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Vt(e,n))&&r.unshift(rd(e,s,i)),null!=(s=Vt(e,t))&&r.push(rd(e,s,i))),3===e.tag)return r;e=e.return}return[]}function id(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ad(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Vt(n,i))&&a.unshift(rd(n,c,l)):s||null!=(c=Vt(n,i))&&a.push(rd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var od=/\r\n?/g,ld=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(ld,"")}function ud(e,t){return t=cd(t),cd(e)===t}function dd(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Ct(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&dd(e,t,"name",s.name,s,null),dd(e,t,"formEncType",s.formEncType,s,null),dd(e,t,"formMethod",s.formMethod,s,null),dd(e,t,"formTarget",s.formTarget,s,null)):(dd(e,t,"encType",s.encType,s,null),dd(e,t,"method",s.method,s,null),dd(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"onScroll":null!=r&&Yu("scroll",e);break;case"onScrollEnd":null!=r&&Yu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Yu("beforetoggle",e),Yu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function hd(e,t,n,r,s,i){switch(n){case"style":Ct(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Yu("scroll",e);break;case"onScrollEnd":null!=r&&Yu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Be]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function fd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yu("error",e),Yu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:dd(e,t,r,o,n,null)}}return i&&dd(e,t,"srcSet",n.srcSet,n,null),void(s&&dd(e,t,"src",n.src,n,null));case"input":Yu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:dd(e,t,s,d,n,null)}}return void bt(e,r,l,c,u,o,i,!1);case"select":for(i in Yu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:dd(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?xt(e,!!s,t,!1):null!=n&&xt(e,!!s,n,!0));case"textarea":for(o in Yu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:dd(e,t,o,l,n,null)}return void Nt(e,s,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else dd(e,t,c,s,n,null);return;case"dialog":Yu("beforetoggle",e),Yu("toggle",e),Yu("cancel",e),Yu("close",e);break;case"iframe":case"object":Yu("load",e);break;case"video":case"audio":for(s=0;s<Qu.length;s++)Yu(Qu[s],e);break;case"image":Yu("error",e),Yu("load",e);break;case"details":Yu("toggle",e);break;case"embed":case"source":case"link":Yu("error",e),Yu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:dd(e,t,u,s,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&hd(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&dd(e,t,l,s,n,null))}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,gd=null;function vd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xd=null;var kd="function"===typeof setTimeout?setTimeout:void 0,Nd="function"===typeof clearTimeout?clearTimeout:void 0,Sd="function"===typeof Promise?Promise:void 0,Ed="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sd?function(e){return Sd.resolve(null).then(e).catch(_d)}:kd;function _d(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function Td(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===r)return e.removeChild(s),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ud(e.ownerDocument.documentElement);else if("head"===n){Ud(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,o=i.nodeName;i[Qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&Ud(e.ownerDocument.body);n=s}while(n);Wh(t)}function Id(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function jd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jd(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ad(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rd(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function Dd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Ld(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=vd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ud(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var Vd=new Map,zd=new Set;function Bd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qd=O.d;O.d={f:function(){var e=qd.f(),t=eu();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?ro(t):qd.r(e)},D:function(e){qd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){qd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){qd.L(e,t,n);var r=Hd;if(r&&e&&t){var s='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+vt(n.imageSizes)+'"]')):s+='[href="'+vt(e)+'"]';var i=s;switch(t){case"style":i=Gd(e);break;case"script":i=Jd(e)}Vd.has(i)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Vd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Qd(i))||"script"===t&&r.querySelector(Yd(i))||(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){qd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Jd(e)}if(!Vd.has(i)&&(e=f({rel:"modulepreload",href:e},t),Vd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yd(i)))return}fd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){qd.X(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,s=Jd(e),i=r.get(s);i||((i=n.querySelector(Yd(s)))||(e=f({src:e,async:!0},t),(t=Vd.get(s))&&th(e,t),et(i=n.createElement("script")),fd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){qd.S(e,t,n);var r=Hd;if(r&&e){var s=Ze(r).hoistableStyles,i=Gd(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Qd(i)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Vd.get(i))&&eh(e,n);var l=a=r.createElement("link");et(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){qd.M(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,s=Jd(e),i=r.get(s);i||((i=n.querySelector(Yd(s)))||(e=f({src:e,async:!0,type:"module"},t),(t=Vd.get(s))&&th(e,t),et(i=n.createElement("script")),fd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Hd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var s=vt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),zd.has(s)||(zd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var s,i,o,l,c=(c=K.current)?Bd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Qd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Vd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Vd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),fd(i,"link",o),et(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Jd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Gd(e){return'href="'+vt(e)+'"'}function Qd(e){return'link[rel="stylesheet"]['+e+"]"}function Xd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Jd(e){return'[src="'+vt(e)+'"]'}function Yd(e){return"script[async]"+e}function $d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fd(r,"style",s),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Gd(n.href);var i=e.querySelector(Qd(s));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Xd(n),(s=Vd.get(s))&&eh(r,s),et(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fd(i,"link",r),t.state.loading|=4,Zd(i,n.precedence,e),t.instance=i;case"script":return i=Jd(n.src),(s=e.querySelector(Yd(i)))?(t.instance=s,et(s),s):(r=n,(s=Vd.get(i))&&th(r=f({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),fd(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nh=null;function rh(e,t,n){if(null===nh){var r=new Map,s=nh=new Map;s.set(n,r)}else(r=(s=nh).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Qe]||i[ze]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function sh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ah=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(uh,e),lh=null,oh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var r=n.get(null);else{n=new Map,lh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=oh.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var dh={$$typeof:x,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function hh(e,t,n,r,s,i,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fh(e,t,n,r,s,i,a,o,l,c,u,d){return e=new hh(e,t,n,a,l,c,u,d,o),t=1,!0===i&&(t|=24),i=Ur(3,null,null,t),e.current=i,i.stateNode=e,(t=Vs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},vi(i),e}function mh(e){return e?e=Mr:Mr}function ph(e,t,n,r,s,i){s=mh(s),null===r.context?r.context=s:r.pendingContext=s,(r=bi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=wi(e,r,t))&&(Xc(n,0,t),xi(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function vh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Rr(e,67108864);null!==t&&Xc(t,0,67108864),vh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Rr(e,t=Le(t));null!==n&&Xc(n,0,t),vh(e,t)}}var wh=!0;function xh(e,t,n,r){var s=R.T;R.T=null;var i=O.p;try{O.p=2,Nh(e,t,n,r)}finally{O.p=i,R.T=s}}function kh(e,t,n,r){var s=R.T;R.T=null;var i=O.p;try{O.p=8,Nh(e,t,n,r)}finally{O.p=i,R.T=s}}function Nh(e,t,n,r){if(wh){var s=Sh(r);if(null===s)nd(e,t,r,Eh,n),Lh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ih=Mh(Ih,e,t,n,r,s),!0;case"dragenter":return jh=Mh(jh,e,t,n,r,s),!0;case"mouseover":return Ah=Mh(Ah,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ph.set(i,Mh(Ph.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dh.set(i,Mh(Dh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lh(e,r),4&t&&-1<Oh.indexOf(e)){for(;null!==s;){var i=Ye(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=_e(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-we(a);o.entanglements[1]|=l,a&=~l}Lu(i),0===(6&mc)&&(Oc=le()+500,Mu(0,!1))}}break;case 31:case 13:null!==(o=Rr(i,2))&&Xc(o,0,2),eu(),vh(i,2)}if(null===(i=Sh(r))&&nd(e,t,r,Eh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else nd(e,t,r,null,n)}}function Sh(e){return _h(e=Rt(e))}var Eh=null;function _h(e){if(Eh=null,null!==(e=Je(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case me:return 268435456;default:return 32}default:return 32}}var Th=!1,Ih=null,jh=null,Ah=null,Ph=new Map,Dh=new Map,Rh=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lh(e,t){switch(e){case"focusin":case"focusout":Ih=null;break;case"dragenter":case"dragleave":jh=null;break;case"mouseover":case"mouseout":Ah=null;break;case"pointerover":case"pointerout":Ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function Mh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Ye(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Fh(e){var t=Je(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Uh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sh(e.nativeEvent);if(null!==n)return null!==(t=Ye(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Vh(e,t,n){Uh(e)&&n.delete(t)}function zh(){Th=!1,null!==Ih&&Uh(Ih)&&(Ih=null),null!==jh&&Uh(jh)&&(jh=null),null!==Ah&&Uh(Ah)&&(Ah=null),Ph.forEach(Vh),Dh.forEach(Vh)}function Bh(e,t){e.blockedOn===t&&(e.blockedOn=null,Th||(Th=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zh)))}var qh=null;function Hh(e){qh!==e&&(qh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qh===e&&(qh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===_h(r||n))continue;break}var i=Ye(n);null!==i&&(e.splice(t,3),t-=3,to(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Wh(e){function t(t){return Bh(t,e)}null!==Ih&&Bh(Ih,e),null!==jh&&Bh(jh,e),null!==Ah&&Bh(Ah,e),Ph.forEach(t),Dh.forEach(t);for(var n=0;n<Rh.length;n++){var r=Rh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Rh.length&&null===(n=Rh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Rh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Be]||null;if("function"===typeof i)a||Hh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Be]||null)o=a.formAction;else if(null!==_h(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Gh(e){this._internalRoot=e}function Qh(e){this._internalRoot=e}Qh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));ph(t.current,Gc(),e,t,null,null)},Qh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),eu(),t[qe]=null}},Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rh.length&&0!==t&&t<Rh[n].priority;n++);Rh.splice(n,0,e),0===n&&Fh(e)}};var Xh=s.version;if("19.2.4"!==Xh)throw Error(a(527,Xh,"19.2.4"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return d(s),e;if(i===r)return d(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Jh={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{ve=Yh.inject(Jh),ye=Yh}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=Eo,i=_o,l=Co;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fh(e,1,!1,null,0,n,r,null,s,i,l,Kh),e[qe]=t.current,ed(e),new Gh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=Eo,l=_o,c=Co,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fh(e,1,!0,t,0,r,s,u,i,l,c,Kh)).context=mh(null),n=t.current,(s=bi(r=Le(r=Gc()))).callback=null,wi(n,s,r),n=r,t.current.lanes=n,Pe(t,n),Lu(t),e[qe]=t.current,ed(e),new Qh(t)},t.version="19.2.4"},672(e,t,n){var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.4"},391(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},799(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},288(e,t){var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=w.prototype=new b;x.constructor=w,g(x,y.prototype),x.isPureReactComponent=!0;var k=Array.isArray;function N(){}var S={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function _(e,t,r){var s=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:r}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function j(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return j((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+I(e,0):i,k(a)?(s="",null!=u&&(s=u.replace(T,"$&/")+"/"),j(a,t,s,"",function(e){return e})):null!=a&&(C(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+u,a=_(l.type,c,l.props)),t.push(a)),1;u=0;var d,f=""===i?".":i+":";if(k(e))for(var p=0;p<e.length;p++)u+=j(i=e[p],t,s,o=f+I(i,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=j(i=i.value,t,s,o=f+I(i,p++),a);else if("object"===o){if("function"===typeof e.then)return j(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],s=0;return j(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},R={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=R,t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.key&&(s=""+t.key),t)!E.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return _(e.type,s,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return _(e,i,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),s=S.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(N,D)}catch(i){D(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.4"},43(e,t,n){e.exports=n(288)},579(e,t,n){e.exports=n(799)},896(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,S||(S=!0,N());else{var t=r(u);null!==t&&P(k,t.startTime-e)}}var N,S=!1,E=-1,_=5,C=-1;function T(){return!!v||!(t.unstable_now()-C<_)}function I(){if(v=!1,S){var e=t.unstable_now();C=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(E),E=-1),m=!0;var i=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(k,l.startTime-e),n=!1}}break e}finally{h=null,f=i,m=!1}n=void 0}}finally{n?N():S=!1}}}if("function"===typeof w)N=function(){w(I)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=I,N=function(){A.postMessage(null)}}else N=function(){y(I,0)};function P(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(E),E=-1):g=!0,P(k,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,S||(S=!0,N()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){e.exports=n(896)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".fd2f0c4a.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="my-app:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.p="/my-app/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkmy_app=self.webpackChunkmy_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),s=n(391),i=n(579);function a(e){let{authMode:t,authError:n,authBusy:r,authForm:s,onAuthModeChange:a,onAuthFormChange:o,onLogin:l,onRegister:c,onGoogleSignIn:u}=e;return(0,i.jsx)("div",{className:"landing-page",children:(0,i.jsx)("div",{className:"container py-5",children:(0,i.jsxs)("div",{className:"row g-4 align-items-stretch",children:[(0,i.jsx)("div",{className:"col-lg-7",children:(0,i.jsxs)("div",{className:"hero-card h-100",children:[(0,i.jsx)("span",{className:"hero-badge",children:"TaskFlow Productivity Platform"}),(0,i.jsx)("h1",{children:"\u0420\u043e\u0437\u0443\u043c\u043d\u0438\u0439 \u0442\u0440\u0435\u043a\u0435\u0440 \u0437\u0430\u0434\u0430\u0447 \u0437 \u043c\u043e\u0442\u0438\u0432\u0430\u0446\u0456\u0454\u044e \u0431\u0430\u043b\u0430\u043c\u0438 \u0442\u0430 \u0432\u0431\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u043c \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c"}),(0,i.jsx)("p",{children:"\u041f\u043b\u0430\u043d\u0443\u0439\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0456 \u044f\u043a \u0443 Notion, Any.do \u0456 Trello, \u043f\u0440\u0430\u0446\u044e\u0439\u0442\u0435 \u0432 \u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0456 \u0443 \u0441\u0442\u0438\u043b\u0456 Asana, \u0437\u0430\u0440\u043e\u0431\u043b\u044f\u0439\u0442\u0435 \u0431\u0430\u043b\u0438 \u0442\u0430 \u0432\u0438\u0442\u0440\u0430\u0447\u0430\u0439\u0442\u0435 \u0457\u0445 \u0443 \u0432\u043b\u0430\u0441\u043d\u043e\u043c\u0443 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0456."}),(0,i.jsxs)("div",{className:"hero-features",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("i",{className:"bi bi-kanban"}),"\u0414\u043e\u0448\u043a\u0438 \u0442\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0438 \u0437\u0430\u0434\u0430\u0447"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("i",{className:"bi bi-coin"}),"\u0411\u0430\u043b\u0438 \u0437\u0430 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u0437\u0430\u0434\u0430\u0447"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("i",{className:"bi bi-shop"}),"\u0412\u0431\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d \u0456\u0437 \u043a\u043e\u0448\u0438\u043a\u043e\u043c"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("i",{className:"bi bi-moon-stars"}),"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0430, \u0441\u0432\u0456\u0442\u043b\u0430 \u0439 \u0442\u0435\u043c\u043d\u0430 \u0442\u0435\u043c\u0438"]})]})]})}),(0,i.jsx)("div",{className:"col-lg-5",children:(0,i.jsxs)("div",{className:"auth-card",children:[(0,i.jsxs)("div",{className:"d-flex auth-tabs mb-4",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-sm ".concat("login"===t?"btn-primary":"btn-outline-primary"),onClick:()=>a("login"),disabled:r,children:"\u0412\u0445\u0456\u0434"}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm ".concat("register"===t?"btn-primary":"btn-outline-primary"),onClick:()=>a("register"),disabled:r,children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"})]}),n&&(0,i.jsx)("div",{className:"alert alert-danger py-2",children:n}),"login"===t?(0,i.jsxs)("form",{className:"d-flex flex-column gap-3",onSubmit:l,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"Email"}),(0,i.jsx)("input",{type:"email",className:"form-control",placeholder:"name@example.com",value:s.identifier,onChange:e=>o("identifier",e.target.value),disabled:r})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,i.jsx)("input",{type:"password",className:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",value:s.password,onChange:e=>o("password",e.target.value),disabled:r})]}),(0,i.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:r,children:r?"\u0412\u0438\u043a\u043e\u043d\u0443\u0454\u0442\u044c\u0441\u044f \u0432\u0445\u0456\u0434...":"\u0423\u0432\u0456\u0439\u0442\u0438"}),(0,i.jsx)("div",{className:"auth-divider",children:"\u0430\u0431\u043e"}),(0,i.jsxs)("button",{className:"btn btn-outline-dark",type:"button",onClick:u,disabled:r,children:[(0,i.jsx)("i",{className:"bi bi-google me-2"}),"\u0423\u0432\u0456\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 Google"]})]}):(0,i.jsxs)("form",{className:"d-flex flex-column gap-3",onSubmit:c,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"\u0406\u043c'\u044f"}),(0,i.jsx)("input",{className:"form-control",placeholder:"\u0412\u0430\u0448\u0435 \u0456\u043c'\u044f",value:s.name,onChange:e=>o("name",e.target.value),disabled:r})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"Email"}),(0,i.jsx)("input",{type:"email",className:"form-control",placeholder:"name@example.com",value:s.email,onChange:e=>o("email",e.target.value),disabled:r})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443"}),(0,i.jsx)("input",{className:"form-control",placeholder:"+380991112233",value:s.phone,onChange:e=>o("phone",e.target.value),disabled:r})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,i.jsx)("input",{type:"password",className:"form-control",placeholder:"\u041d\u0435 \u043c\u0435\u043d\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432",value:s.password,onChange:e=>o("password",e.target.value),disabled:r})]}),(0,i.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:r,children:r?"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0430\u043a\u0430\u0443\u043d\u0442\u0430...":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0430\u043a\u0430\u0443\u043d\u0442"}),(0,i.jsx)("div",{className:"auth-divider",children:"\u0430\u0431\u043e"}),(0,i.jsxs)("button",{className:"btn btn-outline-dark",type:"button",onClick:u,disabled:r,children:[(0,i.jsx)("i",{className:"bi bi-google me-2"}),"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f \u0447\u0435\u0440\u0435\u0437 Google"]})]})]})})]})})})}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const h=[{key:"tracker",label:"\u0422\u0440\u0435\u043a\u0435\u0440",icon:"bi-kanban"},{key:"shop",label:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d",icon:"bi-shop"},{key:"stats",label:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",icon:"bi-graph-up-arrow"},{key:"settings",label:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f",icon:"bi-sliders"},{key:"about",label:"\u041f\u0440\u043e \u043d\u0430\u0441",icon:"bi-info-circle"},{key:"purchase",label:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430",icon:"bi-gem"},{key:"profile",label:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c",icon:"bi-person-circle"}],f=["\u041a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0438","\u041c\u044b\u0448\u0438","\u041d\u0430\u0432\u0443\u0448\u043d\u0438\u043a\u0438","\u0410\u043a\u0441\u0435\u0441\u0443\u0430\u0440\u0438","\u0421\u0442\u0440\u0438\u043c","\u0410\u0443\u0434\u0438\u043e"],m=[{id:1,name:"\u041c\u0435\u0445\u0430\u043d\u0456\u0447\u043d\u0430 \u043a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0430 Orion K80",price:380,category:"\u041a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0438",image:"https://images.pexels.com/photos/1772123/pexels-photo-1772123.jpeg?auto=compress&cs=tinysrgb&w=1200",isNew:!0,discountPercent:15},{id:2,name:"\u0406\u0433\u0440\u043e\u0432\u0430 \u043c\u0438\u0448\u043a\u0430 Nova M5",price:240,category:"\u041c\u044b\u0448\u0438",image:"https://images.pexels.com/photos/5082577/pexels-photo-5082577.jpeg?auto=compress&cs=tinysrgb&w=1200",isNew:!1,discountPercent:0},{id:3,name:"\u041d\u0430\u0432\u0443\u0448\u043d\u0438\u043a\u0438 Pulse X7",price:520,category:"\u041d\u0430\u0432\u0443\u0448\u043d\u0438\u043a\u0438",image:"https://images.pexels.com/photos/3394650/pexels-photo-3394650.jpeg?auto=compress&cs=tinysrgb&w=1200",isNew:!0,discountPercent:10},{id:4,name:"RGB \u043a\u043e\u0432\u0440\u0438\u043a Astro Pad XL",price:190,category:"\u0410\u043a\u0441\u0435\u0441\u0443\u0430\u0440\u0438",image:"https://images.pexels.com/photos/7915211/pexels-photo-7915211.jpeg?auto=compress&cs=tinysrgb&w=1200",isNew:!1,discountPercent:20},{id:5,name:"\u0412\u0435\u0431\u043a\u0430\u043c\u0435\u0440\u0430 Stream C2",price:310,category:"\u0421\u0442\u0440\u0438\u043c",image:"https://images.pexels.com/photos/4145190/pexels-photo-4145190.jpeg?auto=compress&cs=tinysrgb&w=1200",isNew:!0,discountPercent:5},{id:6,name:"USB \u043c\u0438\u043a\u0440\u043e\u0444\u043e\u043d ClearVoice",price:460,category:"\u0410\u0443\u0434\u0438\u043e",image:"https://images.pexels.com/photos/7586657/pexels-photo-7586657.jpeg?auto=compress&cs=tinysrgb&w=1200",isNew:!1,discountPercent:0}],p=[{id:"free",title:"Free",price:"0 \u0433\u0440\u043d",features:["\u0414\u043e 20 \u0430\u043a\u0442\u0438\u0432\u043d\u0438\u0445 \u0437\u0430\u0434\u0430\u0447","\u0411\u0430\u0437\u043e\u0432\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430","1 \u0434\u043e\u0448\u043a\u0430 \u043f\u0440\u043e\u0454\u043a\u0442\u0443"]},{id:"pro",title:"Pro",price:"399 \u0433\u0440\u043d/\u043c\u0456\u0441",features:["\u0411\u0435\u0437\u043b\u0456\u043c\u0456\u0442 \u0437\u0430\u0434\u0430\u0447","\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0430 \u0430\u043d\u0430\u043b\u0456\u0442\u0438\u043a\u0430","\u041d\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0430 \u0456\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u0457"]},{id:"team",title:"Team",price:"890 \u0433\u0440\u043d/\u043c\u0456\u0441",features:["\u0421\u043f\u0456\u043b\u044c\u043d\u0456 \u043f\u0440\u043e\u0441\u0442\u043e\u0440\u0438","\u0420\u043e\u043b\u0456 \u0442\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0438","\u041a\u043e\u043c\u0430\u043d\u0434\u043d\u0456 \u0437\u0432\u0456\u0442\u0438"]}],g=[{id:"small",title:"\u0421\u0442\u0430\u0440\u0442",points:250,price:"149 \u0433\u0440\u043d"},{id:"medium",title:"\u041e\u043f\u0442\u0438\u043c\u0443\u043c",points:700,price:"349 \u0433\u0440\u043d"},{id:"large",title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c",points:1500,price:"649 \u0433\u0440\u043d"}],v={low:{label:"\u041d\u0438\u0437\u044c\u043a\u0438\u0439",className:"bg-info-subtle text-info-emphasis",reward:20},medium:{label:"\u0421\u0435\u0440\u0435\u0434\u043d\u0456\u0439",className:"bg-warning-subtle text-warning-emphasis",reward:35},high:{label:"\u0412\u0438\u0441\u043e\u043a\u0438\u0439",className:"bg-danger-subtle text-danger-emphasis",reward:50}},y={todo:{label:"\u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"},progress:{label:"\u0423 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"},done:{label:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}},b="taskflow_theme_mode",w="v1.8.0",x=[{id:"avatar",label:"\u0410\u0432\u0430\u0442\u0430\u0440"},{id:"username",label:"\u0406\u043c'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"},{id:"tasks",label:"\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f"},{id:"spam",label:"\u0421\u043f\u0430\u043c"},{id:"fraud",label:"\u0428\u0430\u0445\u0440\u0430\u0439\u0441\u0442\u0432\u043e"},{id:"abuse",label:"\u0417\u043b\u043e\u0432\u0436\u0438\u0432\u0430\u043d\u043d\u044f"},{id:"payments",label:"\u041f\u043b\u0430\u0442\u0435\u0436\u0456"},{id:"shop",label:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"},{id:"security",label:"\u0411\u0435\u0437\u043f\u0435\u043a\u0430"},{id:"other",label:"\u0406\u043d\u0448\u0435"}],k=["bi-kanban","bi-briefcase","bi-journal-check","bi-lightning-charge","bi-controller","bi-code-slash","bi-book","bi-heart-pulse","bi-camera-video","bi-rocket-takeoff","bi-house","bi-calendar3","bi-cash-coin","bi-palette2","bi-megaphone","bi-music-note-beamed","bi-graph-up-arrow","bi-gear-wide-connected"],N=[{id:"sky",label:"\u041d\u0435\u0431\u0435\u0441\u043d\u0438\u0439",accent:"#0ea5e9",soft:"#e0f2fe"},{id:"ocean",label:"\u041e\u043a\u0435\u0430\u043d",accent:"#0284c7",soft:"#dbeafe"},{id:"indigo",label:"\u0406\u043d\u0434\u0438\u0433\u043e",accent:"#4f46e5",soft:"#e0e7ff"},{id:"violet",label:"\u0424\u0456\u043e\u043b\u0435\u0442\u043e\u0432\u0438\u0439",accent:"#7c3aed",soft:"#ede9fe"},{id:"rose",label:"\u0420\u043e\u0436\u0435\u0432\u0438\u0439",accent:"#e11d48",soft:"#ffe4e6"},{id:"orange",label:"\u041f\u043e\u043c\u0430\u0440\u0430\u043d\u0447\u0435\u0432\u0438\u0439",accent:"#ea580c",soft:"#ffedd5"},{id:"amber",label:"\u0411\u0443\u0440\u0448\u0442\u0438\u043d",accent:"#d97706",soft:"#fef3c7"},{id:"lime",label:"\u041b\u0430\u0439\u043c",accent:"#65a30d",soft:"#ecfccb"},{id:"emerald",label:"\u0421\u043c\u0430\u0440\u0430\u0433\u0434",accent:"#10b981",soft:"#d1fae5"},{id:"teal",label:"\u0411\u0456\u0440\u044e\u0437\u0430",accent:"#0f766e",soft:"#ccfbf1"},{id:"cyan",label:"\u0426\u0456\u0430\u043d",accent:"#0891b2",soft:"#cffafe"},{id:"slate",label:"\u0421\u043b\u0430\u043d\u0435\u0446\u044c",accent:"#334155",soft:"#e2e8f0"},{id:"stone",label:"\u041a\u0430\u043c\u0456\u043d\u044c",accent:"#57534e",soft:"#e7e5e4"},{id:"red",label:"\u0427\u0435\u0440\u0432\u043e\u043d\u0438\u0439",accent:"#dc2626",soft:"#fee2e2"},{id:"fuchsia",label:"\u0424\u0443\u043a\u0441\u0456\u044f",accent:"#c026d3",soft:"#fae8ff"},{id:"blue",label:"\u0421\u0438\u043d\u0456\u0439",accent:"#2563eb",soft:"#dbeafe"},{id:"green",label:"\u0417\u0435\u043b\u0435\u043d\u0438\u0439",accent:"#16a34a",soft:"#dcfce7"},{id:"gray",label:"\u0421\u0456\u0440\u0438\u0439",accent:"#4b5563",soft:"#e5e7eb"}],S=[{id:"2026-02-22-v1.8.0",version:"v1.8.0",date:"2026-02-22",time:"23:59",title:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0434\u043e\u0449\u043e\u043a \u0456 \u043f\u043e\u0432\u043d\u0438\u0439 mobile-first \u0430\u0434\u0430\u043f\u0442\u0438\u0432",changes:["\u0414\u043e\u0434\u0430\u043d\u043e \u043f\u043e\u0432\u043d\u043e\u0446\u0456\u043d\u043d\u0435 \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0434\u043e\u0449\u043e\u043a: \u0437\u043c\u0456\u043d\u0430 \u043d\u0430\u0437\u0432\u0438, \u0456\u043a\u043e\u043d\u043a\u0438 \u0442\u0430 \u043a\u043e\u043b\u044c\u043e\u0440\u0443 \u0437 \u0454\u0434\u0438\u043d\u043e\u0433\u043e \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0456\u043a\u043d\u0430.","\u0414\u043e\u0434\u0430\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0434\u043e\u0449\u043e\u043a \u0437 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u043e\u043c \u0437\u0430\u0434\u0430\u0447 \u0443 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u0443 \u0434\u043e\u0448\u043a\u0443 \u0442\u0430 \u0437\u0430\u0445\u0438\u0441\u0442\u043e\u043c \u0432\u0456\u0434 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u043e\u0441\u0442\u0430\u043d\u043d\u044c\u043e\u0457 \u0434\u043e\u0448\u043a\u0438.","\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u0443 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0442\u0440\u0435\u043a\u0435\u0440\u0430: hero-\u0431\u043b\u043e\u043a, KPI \u043f\u043e \u0434\u043e\u0448\u043a\u0430\u0445 \u0456 \u0437\u0430\u0434\u0430\u0447\u0430\u0445, \u0437\u0440\u0443\u0447\u043d\u0456 \u0434\u0456\u0457 \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f/\u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u043d\u0430 \u043a\u0430\u0440\u0442\u0446\u0456.","\u0412\u0438\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0440\u043e\u0437\u043c\u0456\u0442\u043a\u0443 \u043a\u0430\u0440\u0442\u043e\u043a \u0434\u043e\u0449\u043e\u043a \u0434\u043b\u044f \u0441\u0442\u0430\u0431\u0456\u043b\u044c\u043d\u043e\u0457 \u0440\u043e\u0431\u043e\u0442\u0438 \u043d\u0430 \u043c\u043e\u0431\u0456\u043b\u044c\u043d\u0438\u0445 (\u0431\u0435\u0437 \u0432\u043a\u043b\u0430\u0434\u0435\u043d\u0438\u0445 \u043a\u043d\u043e\u043f\u043e\u043a \u0443 \u043a\u043d\u043e\u043f\u043a\u0443).","\u0414\u043e\u0434\u0430\u043d\u043e \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456 \u0441\u0442\u0438\u043b\u0456 \u0434\u043b\u044f \u043d\u043e\u0432\u0438\u0445 \u0431\u043b\u043e\u043a\u0456\u0432 \u0442\u0440\u0435\u043a\u0435\u0440\u0430: hero-grid, \u0434\u0456\u0457 \u043d\u0430 \u043a\u0430\u0440\u0442\u043a\u0430\u0445, KPI-\u0447\u0456\u043f\u0438, focus-\u0441\u0442\u0430\u043d\u0438.","\u0420\u0435\u0430\u043b\u0456\u0437\u043e\u0432\u0430\u043d\u043e \u0440\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0430\u0434\u0430\u043f\u0442\u0438\u0432 \u0434\u043b\u044f \u0432\u0441\u044c\u043e\u0433\u043e \u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443 \u043d\u0430 1200/1100/992/768/576/420 px: \u043c\u0435\u043d\u044e, topbar, \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u0456 \u0432\u0456\u043a\u043d\u0430, \u043a\u0430\u043d\u0431\u0430\u043d, \u043a\u0430\u0440\u0442\u043a\u0438, \u043a\u043e\u0448\u0438\u043a \u0442\u0430 \u0430\u0434\u043c\u0456\u043d-\u0431\u043b\u043e\u043a\u0438.","\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0432\u0435\u0440\u0441\u0456\u044e \u0437\u0430\u0441\u0442\u043e\u0441\u0443\u043d\u043a\u0443 \u0434\u043e v1.8.0."]},{id:"2026-02-22-v1.7.1",version:"v1.7.1",date:"2026-02-22",time:"23:59",title:"\u0414\u043e\u043e\u043f\u0440\u0430\u0446\u044e\u0432\u0430\u043d\u043d\u044f \u0441\u0442\u0438\u043b\u0456\u0432 \u0456 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438 \u0430\u0434\u043c\u0456\u043d\u043a\u0438",changes:["\u0420\u043e\u0437\u0434\u0456\u043b\u0435\u043d\u043e AdminPage \u043d\u0430 \u043e\u043a\u0440\u0435\u043c\u0456 \u0441\u0435\u043a\u0446\u0456\u0457 \u0442\u0430 \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u0456 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0438 \u0434\u043b\u044f \u0437\u0440\u0443\u0447\u043d\u0456\u0448\u043e\u0457 \u043f\u0456\u0434\u0442\u0440\u0438\u043c\u043a\u0438.","\u0414\u043e\u0434\u0430\u043d\u043e \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456 \u0441\u0442\u0438\u043b\u0456 \u0434\u043b\u044f \u0434\u043e\u0449\u043e\u043a \u0442\u0440\u0435\u043a\u0435\u0440\u0430, \u0430\u043d\u0430\u043b\u0456\u0442\u0438\u043a\u0438 \u0430\u0434\u043c\u0456\u043d\u043a\u0438, \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438 \xab\u041f\u0440\u043e \u043d\u0430\u0441\xbb \u0442\u0430 \u0441\u0435\u043a\u0446\u0456\u0439 \u043f\u043e\u043a\u0443\u043f\u043a\u0438.","\u0412\u0438\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0441\u0442\u0438\u043b\u0456 \u0432\u0435\u0440\u0445\u043d\u044c\u043e\u0433\u043e \u043c\u0435\u043d\u044e \u0430\u043a\u0430\u0443\u043d\u0442\u0430: \u043d\u0438\u0436\u0447\u0438\u0439 z-index topbar, \u043f\u043e\u0432\u043d\u0435 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u043d\u044f \u0430\u0432\u0430\u0442\u0430\u0440\u0430, \u0432\u0438\u0449\u0438\u0439 \u0448\u0430\u0440 \u0432\u0438\u043f\u0430\u0434\u0430\u044e\u0447\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0443.","\u0414\u043e\u0434\u0430\u043d\u043e sticky-\u043f\u043e\u0432\u0435\u0434\u0456\u043d\u043a\u0443 \u043b\u0456\u0432\u043e\u0433\u043e \u043c\u0435\u043d\u044e \u0442\u0430 \u0430\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u0456 \u0441\u0442\u0438\u043b\u0456 \u0434\u043b\u044f \u043d\u043e\u0432\u0438\u0445 \u0431\u043b\u043e\u043a\u0456\u0432."]},{id:"2026-02-22-v1.7.0",version:"v1.7.0",date:"2026-02-22",time:"23:55",title:"\u0414\u043e\u0448\u043a\u0438, \u0430\u043d\u0430\u043b\u0456\u0442\u0438\u043a\u0430, \u043f\u0430\u0433\u0456\u043d\u0430\u0446\u0456\u044f \u0442\u0430 \u0443\u043a\u0440\u0430\u0457\u043d\u0456\u0437\u0430\u0446\u0456\u044f",changes:["\u0414\u043e\u0434\u0430\u043d\u043e \u0440\u0435\u0436\u0438\u043c \u0434\u043e\u0449\u043e\u043a \u0443 \u0442\u0440\u0435\u043a\u0435\u0440\u0456: \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0434\u043e\u0448\u043a\u0438, \u0432\u0438\u0431\u0456\u0440 \u0456\u043a\u043e\u043d\u043a\u0438 \u0442\u0430 \u043a\u043e\u043b\u044c\u043e\u0440\u0443, \u043e\u043a\u0440\u0435\u043c\u0456 \u0437\u0430\u0434\u0430\u0447\u0456 \u043f\u043e \u0434\u043e\u0448\u043a\u0430\u0445.","\u0414\u043e\u0434\u0430\u043d\u043e \u043f\u0430\u0433\u0456\u043d\u0430\u0446\u0456\u044e \u0434\u043b\u044f \u0434\u043e\u0449\u043e\u043a, \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443, \u0441\u043f\u0438\u0441\u043a\u0443 \u0430\u043a\u0430\u0443\u043d\u0442\u0456\u0432 \u0442\u0430 \u0442\u043e\u0432\u0430\u0440\u0456\u0432 \u0430\u0434\u043c\u0456\u043d-\u043f\u0430\u043d\u0435\u043b\u0456.","\u041b\u0456\u0432\u0435 \u043c\u0435\u043d\u044e \u0441\u0442\u0430\u043b\u043e sticky, \u0434\u043e\u0434\u0430\u043d\u043e live-\u043b\u0456\u0447\u0438\u043b\u044c\u043d\u0438\u043a \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432 \u043e\u043d\u043b\u0430\u0439\u043d \u0442\u0430 \u0431\u043b\u043e\u043a \u0432\u0435\u0440\u0441\u0456\u0457.","\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u043e \u0430\u0434\u043c\u0456\u043d-\u043f\u0430\u043d\u0435\u043b\u044c: \u0444\u0456\u043b\u044c\u0442\u0440\u0438 \u0430\u043a\u0430\u0443\u043d\u0442\u0456\u0432, \u0442\u0435\u0433\u0438 \u0444\u043b\u0430\u0436\u043a\u0456\u0432, \u043e\u043a\u0440\u0435\u043c\u0438\u0439 \u0440\u043e\u0437\u0434\u0456\u043b \u0437\u0430\u0433\u0430\u043b\u044c\u043d\u043e\u0457 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0437 \u0433\u0456\u0441\u0442\u043e\u0433\u0440\u0430\u043c\u0430\u043c\u0438.","\u0417\u043d\u0438\u0436\u0435\u043d\u043e z-index topbar, \u0432\u0438\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0432\u0456\u0434\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0430\u0432\u0430\u0442\u0430\u0440\u0430 \u0432 \u043a\u043d\u043e\u043f\u0446\u0456 \u043f\u0440\u043e\u0444\u0456\u043b\u044e.","\u0421\u0430\u0439\u0442 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u043e\u044e \u043c\u043e\u0432\u043e\u044e, \u0446\u0456\u043d\u0438 \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d\u043e \u0432 \u0433\u0440\u0438\u0432\u043d\u0456, \u0431\u043b\u043e\u043a \xab\u041f\u0440\u043e \u043d\u0430\u0441\xbb \u0440\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u043e.","\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e release notes \u0442\u0430 \u0432\u0435\u0440\u0441\u0456\u043e\u043d\u0443\u0432\u0430\u043d\u043d\u044f \u0434\u043e v1.7.0."]},{id:"2026-02-22-v1.6.0",version:"v1.6.0",date:"2026-02-22",time:"22:40",title:"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u0432",changes:["\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d \u0432\u044b\u0445\u043e\u0434 \u0438\u0437 \u043b\u0435\u0432\u043e\u0433\u043e \u043c\u0435\u043d\u044e \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u0432\u0435\u0440\u0445\u043d\u0435\u0439 \u043f\u0430\u043d\u0435\u043b\u0438 \u0438 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438.","\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0431\u0430\u043d-\u043e\u043a\u043d\u043e \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435: \u043f\u0440\u0438\u0447\u0438\u043d\u0430, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u0441\u0440\u043e\u043a \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043f\u043e\u043a\u0430\u0437 \u043f\u0440\u0438\u0447\u0438\u043d\u044b \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0432\u0445\u043e\u0434\u0430 \u0432 \u0437\u0430\u0431\u0430\u043d\u0435\u043d\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043e\u0447\u0435\u0440\u0435\u0434\u044c email-\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439 \u043e \u0431\u0430\u043d\u0435 \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e mail (Firebase Trigger Email).","\u0412 \u0430\u0434\u043c\u0438\u043d-\u043f\u0430\u043d\u0435\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b \u0441 \u0432\u0435\u0440\u0441\u0438\u0435\u0439 \u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439."]},{id:"2026-02-22-v1.5.0",version:"v1.5.0",date:"2026-02-22",time:"19:10",title:"\u041d\u043e\u0432\u044b\u0439 UX \u043f\u0440\u043e\u0444\u0438\u043b\u044f, \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0438 \u0442\u0440\u0435\u043a\u0435\u0440\u0430",changes:["\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043d \u0432 \u0444\u043e\u0440\u043c\u0430\u0442 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438: KPI, \u043f\u0440\u043e\u0433\u0440\u0435\u0441\u0441 \u0437\u0430\u0434\u0430\u0447, \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0438.","\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0440\u0430\u0437\u0431\u0438\u0442\u044b \u043d\u0430 \u0440\u0430\u0437\u0434\u0435\u043b\u044b: \u0430\u043a\u043a\u0430\u0443\u043d\u0442, \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435, \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f, \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u0438\u0437 \u043c\u0435\u043d\u044e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0441\u0440\u0430\u0437\u0443 \u0432 \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430.","\u0412 \u0442\u0440\u0435\u043a\u0435\u0440\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d drag-and-drop \u0437\u0430\u0434\u0430\u0447 \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043b\u043e\u043d\u043a\u0430\u043c\u0438.","\u0424\u043e\u0440\u043c\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438 \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d\u0430 \u0432 pop-up c \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438 \xab\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\xbb \u0438 \xab\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c\xbb.","\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0432 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u0435\u0441\u0442\u0430\u0445 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u043c 300x300 \u0438 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435."]},{id:"2026-02-21-v1.4.0",version:"v1.4.0",date:"2026-02-21",time:"16:25",title:"\u0420\u043e\u043b\u0438 \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0430\u0434\u043c\u0438\u043d\u043a\u0438",changes:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0440\u043e\u043b\u0438 operator, task_moderator, shop_moderator \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f\u043c\u0438 \u043f\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\u043c.","\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0444\u043b\u0430\u0436\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u0432: \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u0438\u0447\u0438\u043d\u0443, owner \u0432\u0438\u0434\u0438\u0442 \u043e\u0447\u0435\u0440\u0435\u0434\u044c \u0444\u043b\u0430\u0436\u043a\u043e\u0432.","\u0412 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0430\u0432\u0430\u0442\u0430\u0440\u044b \u0438 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u0431\u043b\u043e\u043a \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f.","\u0412 \u0430\u0434\u043c\u0438\u043d\u043a\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0431\u043b\u043e\u043a \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e.","\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430 \u0434\u043b\u044f \u0440\u043e\u043b\u0435\u0439 shop_moderator \u0438 operator."]},{id:"2026-02-20-v1.3.0",version:"v1.3.0",date:"2026-02-20",time:"13:40",title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u0438 \u043a\u0430\u0442\u0430\u043b\u043e\u0433",changes:["\u0418\u043a\u043e\u043d\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u044b \u043d\u0430 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0441 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b, \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0438 \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0431\u0435\u0439\u0434\u0436\u0438 \xab\u041d\u043e\u0432\u0438\u043d\u043a\u0430\xbb \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0441\u043a\u0438\u0434\u043e\u043a \u0441 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u043c \u0441\u0442\u0430\u0440\u043e\u0439 \u0438 \u043d\u043e\u0432\u043e\u0439 \u0446\u0435\u043d\u044b.","\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c: \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0438 \u0442\u043e\u0432\u0430\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c, \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c \u0438 \u0443\u0434\u0430\u043b\u044f\u0442\u044c."]},{id:"2026-02-19-v1.2.0",version:"v1.2.0",date:"2026-02-19",time:"18:50",title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0438 Firebase",changes:["\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430 Firebase Auth \u0438 Firestore \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0438 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f, \u0432\u0445\u043e\u0434 \u043f\u043e email/\u043f\u0430\u0440\u043e\u043b\u044e \u0438 \u0432\u0445\u043e\u0434 \u0447\u0435\u0440\u0435\u0437 Google.","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u043e\u0440\u043c\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0438 \u0437\u0430\u0449\u0438\u0442\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0431\u0430\u0437\u0443.","\u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u043f\u0440\u0430\u0432\u0438\u043b\u0430 Firestore \u0434\u043b\u044f owner \u0438 \u0440\u043e\u043b\u0435\u0432\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438."]},{id:"2026-02-18-v1.1.0",version:"v1.1.0",date:"2026-02-18",time:"14:15",title:"\u0421\u0442\u0430\u0431\u0438\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430",changes:["\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0440\u0443\u0441\u0441\u043a\u0438\u043c\u0438 \u0441\u0442\u0440\u043e\u043a\u0430\u043c\u0438 \u0438 \u0431\u0438\u0442\u043e\u0439 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u043e\u0439.","\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u0448\u0440\u0438\u0444\u0442\u044b \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u044b.","\u041f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0430 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0430 \u043b\u043e\u0433\u0438\u043a\u0438 \u043f\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u043c \u0434\u043b\u044f \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430 App.js.","\u0423\u043b\u0443\u0447\u0448\u0435\u043d\u044b \u0441\u0442\u0438\u043b\u0438 \u0438 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0445 \u0438 \u0434\u0435\u0441\u043a\u0442\u043e\u043f\u043d\u044b\u0445 \u044d\u043a\u0440\u0430\u043d\u0430\u0445."]}],E=[{id:"task_moderator",label:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440 \u0437\u0430\u0434\u0430\u0447",description:"\u041c\u043e\u0436\u0435 \u043c\u043e\u0434\u0435\u0440\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u0434\u0430\u0447\u0456 \u0442\u0430 \u0437\u0430\u0434\u0430\u0447\u0456 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432."},{id:"shop_moderator",label:"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443",description:"\u041c\u043e\u0436\u0435 \u043c\u043e\u0434\u0435\u0440\u0443\u0432\u0430\u0442\u0438 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443 \u0442\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457."},{id:"operator",label:"\u041e\u043f\u0435\u0440\u0430\u0442\u043e\u0440",description:"\u041c\u043e\u0436\u0435 \u0432\u0435\u0441\u0442\u0438 \u0430\u043a\u0430\u0443\u043d\u0442\u0438, \u0431\u0430\u043b\u0430\u043d\u0441 \u0456 \u0437\u0432\u0435\u0440\u043d\u0435\u043d\u043d\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432."}],_=E.map(e=>e.id),C="lesha.goloborodko392@gmail.com".toLowerCase(),T="Owner Admin",I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"!==typeof e)return t;const n=e.trim();return!n||(e=>"string"===typeof e&&e.includes("\ufffd"))(n)||(e=>"string"===typeof e&&/\?{3,}/.test(e))(n)?t:n},j=function(e){return I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").toLowerCase()},A=e=>Array.isArray(e)?Array.from(new Set(e.map(e=>I(e,"")).filter(e=>_.includes(e)))):[],P=new Set(x.map(e=>e.id)),D=new Set(k),R=new Set(N.map(e=>e.id)),O=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().slice(0,10)},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{id:I(null===e||void 0===e?void 0:e.id,"board-".concat(Date.now(),"-").concat(t)),name:I(null===e||void 0===e?void 0:e.name,"\u0414\u043e\u0448\u043a\u0430 ".concat(t+1)),icon:D.has(null===e||void 0===e?void 0:e.icon)?e.icon:"bi-kanban",colorId:R.has(null===e||void 0===e?void 0:e.colorId)?e.colorId:"blue",createdAt:(null===e||void 0===e?void 0:e.createdAt)||(new Date).toISOString()}},M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"board-main";return[{id:Date.now()+1,title:"\u0421\u043a\u043b\u0430\u0441\u0442\u0438 \u0442\u0438\u0436\u043d\u0435\u0432\u0438\u0439 \u043f\u043b\u0430\u043d",description:"\u0420\u043e\u0437\u0431\u0438\u0442\u0438 \u0446\u0456\u043b\u0456 \u0442\u0438\u0436\u043d\u044f \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0456 \u043a\u0440\u043e\u043a\u0438.",priority:"medium",dueDate:O(1),status:"todo",points:35,boardId:e,rewardClaimed:!1,createdAt:(new Date).toISOString(),completedAt:null},{id:Date.now()+2,title:"\u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0442\u0440\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f 30 \u0445\u0432\u0438\u043b\u0438\u043d",description:"\u041a\u0430\u0440\u0434\u0456\u043e \u0430\u0431\u043e \u0441\u0438\u043b\u043e\u0432\u0435 \u0437 \u0432\u0456\u0434\u043c\u0456\u0442\u043a\u043e\u044e \u0432 \u0442\u0440\u0435\u043a\u0435\u0440\u0456.",priority:"high",dueDate:O(0),status:"progress",points:50,boardId:e,rewardClaimed:!1,createdAt:(new Date).toISOString(),completedAt:null},{id:Date.now()+3,title:"\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u0438 20 \u0441\u0442\u043e\u0440\u0456\u043d\u043e\u043a \u043a\u043d\u0438\u0433\u0438",description:"\u0417\u0430\u043a\u0440\u0456\u043f\u0438\u0442\u0438 \u0437\u0432\u0438\u0447\u043a\u0443 \u0449\u043e\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0447\u0438\u0442\u0430\u043d\u043d\u044f.",priority:"low",dueDate:O(-1),status:"done",points:20,boardId:e,rewardClaimed:!0,createdAt:(new Date).toISOString(),completedAt:(new Date).toISOString()}]},F=e=>{let{id:t,name:n,email:r,phone:s="",avatar:i="",roles:a=[],isAdmin:o=!1,joinedAt:l=(new Date).toISOString()}=e;const c="board-".concat(Date.now()),u=[{id:c,name:"\u041c\u043e\u044f \u0434\u043e\u0448\u043a\u0430",icon:"bi-kanban",colorId:"blue",createdAt:l}];return{id:t,name:I(n,"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"),email:j(r),phone:I(s,""),avatar:I(i,""),points:o?2500:420,subscription:o?"team":"free",paymentLinked:!1,boards:u,activeBoardId:c,tasks:M(c),cart:[],purchases:[],pointLedger:[{id:"seed-".concat(Date.now()),type:"income",source:"welcome",amount:o?2500:420,label:o?"\u0411\u043e\u043d\u0443\u0441 \u0432\u043b\u0430\u0441\u043d\u0438\u043a\u0430":"\u0421\u0442\u0430\u0440\u0442\u043e\u0432\u0438\u0439 \u0431\u043e\u043d\u0443\u0441",createdAt:(new Date).toISOString()}],settings:{reminders:!0,weeklyDigest:!0,pushAlerts:!1,marketingEmails:!1,loginAlerts:!0,showOnlineStatus:!0,publicStats:!0,twoFactorAuth:!1,compactMode:!1,autoArchiveDoneTasks:!1,smartSort:!0,focusMode:!1},flags:[],joinedAt:l,roles:A(a),isAdmin:o,isBanned:!1,banReason:"",banDescription:"",banExpiresAt:null,bannedAt:null}},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=["todo","progress","done"].includes(null===e||void 0===e?void 0:e.status)?e.status:"todo";return{id:Number.isFinite(Number(null===e||void 0===e?void 0:e.id))?Number(e.id):Date.now()+t,title:I(null===e||void 0===e?void 0:e.title,"\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f ".concat(t+1)),description:I(null===e||void 0===e?void 0:e.description,""),priority:["low","medium","high"].includes(null===e||void 0===e?void 0:e.priority)?e.priority:"medium",dueDate:I(null===e||void 0===e?void 0:e.dueDate,O(0)),status:n,points:Number.isFinite(Number(null===e||void 0===e?void 0:e.points))?Number(e.points):0,boardId:I(null===e||void 0===e?void 0:e.boardId,""),rewardClaimed:Boolean(null===e||void 0===e?void 0:e.rewardClaimed),createdAt:(null===e||void 0===e?void 0:e.createdAt)||(new Date).toISOString(),completedAt:"done"===n?(null===e||void 0===e?void 0:e.completedAt)||(new Date).toISOString():null}},V=e=>{var t,n,r,s,i,a,o,l,c,u,h,f;if(!e||"object"!==typeof e)return F({id:"user-".concat(Date.now()),name:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447",email:"user-".concat(Date.now(),"@taskflow.app")});const m=Array.isArray(e.boards)?e.boards.map((e,t)=>L(e,t)):[],p=m.length>0?m:[L(null,0)],g=p[0].id,v=I(e.activeBoardId,g),y=p.some(e=>e.id===v)?v:g,b=Array.isArray(e.tasks)?e.tasks.map((e,t)=>{const n=U(e,t);return d(d({},n),{},{boardId:p.some(e=>e.id===n.boardId)?n.boardId:g})}):[];return{id:I(e.id,"user-".concat(Date.now())),name:I(e.name,"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"),email:j(e.email,""),phone:I(e.phone,""),avatar:I(e.avatar,""),points:Number.isFinite(Number(e.points))?Number(e.points):0,subscription:["free","pro","team"].includes(e.subscription)?e.subscription:"free",paymentLinked:Boolean(e.paymentLinked),boards:p,activeBoardId:y,tasks:b,cart:Array.isArray(e.cart)?e.cart.map(e=>({productId:Number(null===e||void 0===e?void 0:e.productId),quantity:Number(null===e||void 0===e?void 0:e.quantity)})).filter(e=>Number.isFinite(e.productId)&&Number.isFinite(e.quantity)&&e.quantity>0):[],purchases:Array.isArray(e.purchases)?e.purchases.map((e,t)=>({id:(null===e||void 0===e?void 0:e.id)||"purchase-".concat(Date.now(),"-").concat(t),name:I(null===e||void 0===e?void 0:e.name,"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 ".concat(t+1)),quantity:Number.isFinite(Number(null===e||void 0===e?void 0:e.quantity))?Number(e.quantity):1,total:Number.isFinite(Number(null===e||void 0===e?void 0:e.total))?Number(e.total):0,createdAt:(null===e||void 0===e?void 0:e.createdAt)||(new Date).toISOString()})):[],pointLedger:Array.isArray(e.pointLedger)?e.pointLedger.map((e,t)=>({id:(null===e||void 0===e?void 0:e.id)||"entry-".concat(Date.now(),"-").concat(t),type:"expense"===(null===e||void 0===e?void 0:e.type)?"expense":"income",source:I(null===e||void 0===e?void 0:e.source,"system"),amount:Number.isFinite(Number(null===e||void 0===e?void 0:e.amount))?Number(e.amount):0,label:I(null===e||void 0===e?void 0:e.label,"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u044f"),createdAt:(null===e||void 0===e?void 0:e.createdAt)||(new Date).toISOString()})):[],settings:{reminders:Boolean(null===(t=e.settings)||void 0===t?void 0:t.reminders),weeklyDigest:Boolean(null===(n=e.settings)||void 0===n?void 0:n.weeklyDigest),pushAlerts:Boolean(null===(r=e.settings)||void 0===r?void 0:r.pushAlerts),marketingEmails:Boolean(null===(s=e.settings)||void 0===s?void 0:s.marketingEmails),loginAlerts:!1!==(null===(i=e.settings)||void 0===i?void 0:i.loginAlerts),showOnlineStatus:!1!==(null===(a=e.settings)||void 0===a?void 0:a.showOnlineStatus),publicStats:!1!==(null===(o=e.settings)||void 0===o?void 0:o.publicStats),twoFactorAuth:Boolean(null===(l=e.settings)||void 0===l?void 0:l.twoFactorAuth),compactMode:Boolean(null===(c=e.settings)||void 0===c?void 0:c.compactMode),autoArchiveDoneTasks:Boolean(null===(u=e.settings)||void 0===u?void 0:u.autoArchiveDoneTasks),smartSort:!1!==(null===(h=e.settings)||void 0===h?void 0:h.smartSort),focusMode:Boolean(null===(f=e.settings)||void 0===f?void 0:f.focusMode)},flags:(w=e.flags,Array.isArray(w)?w.map((e,t)=>{return{id:I(null===e||void 0===e?void 0:e.id,"flag-".concat(Date.now(),"-").concat(t)),reason:I(null===e||void 0===e?void 0:e.reason,""),createdAt:(null===e||void 0===e?void 0:e.createdAt)||(new Date).toISOString(),createdByUid:I(null===e||void 0===e?void 0:e.createdByUid,""),createdByName:I(null===e||void 0===e?void 0:e.createdByName,"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440"),createdByEmail:j(null===e||void 0===e?void 0:e.createdByEmail,""),createdByRole:I(null===e||void 0===e?void 0:e.createdByRole,""),tags:(n=null===e||void 0===e?void 0:e.tags,Array.isArray(n)?Array.from(new Set(n.map(e=>I(e,"")).filter(e=>P.has(e)))):[])};var n}).filter(e=>Boolean(e.reason)):[]),joinedAt:e.joinedAt||(new Date).toISOString(),roles:A(e.roles),isAdmin:Boolean(e.isAdmin),isBanned:Boolean(e.isBanned),banReason:I(e.banReason,""),banDescription:I(e.banDescription,""),banExpiresAt:e.banExpiresAt||null,bannedAt:e.bannedAt||null};var w},z=e=>I(e,""),B=e=>({id:Number.isFinite(Number(null===e||void 0===e?void 0:e.id))?Number(e.id):Date.now()+Math.floor(1e3*Math.random()),name:I(null===e||void 0===e?void 0:e.name,"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0438"),price:Number.isFinite(Number(null===e||void 0===e?void 0:e.price))?Number(e.price):0,category:I(null===e||void 0===e?void 0:e.category,"\u0411\u0435\u0437 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"),image:I(null===e||void 0===e?void 0:e.image,""),isNew:Boolean(null===e||void 0===e?void 0:e.isNew),discountPercent:Number.isFinite(Number(null===e||void 0===e?void 0:e.discountPercent))?Math.min(90,Math.max(0,Number(e.discountPercent))):0}),q=e=>{const t=Number.isFinite(Number(null===e||void 0===e?void 0:e.price))?Number(e.price):0,n=Number.isFinite(Number(null===e||void 0===e?void 0:e.discountPercent))?Math.min(90,Math.max(0,Number(e.discountPercent))):0;return Math.max(0,Math.round(t*(1-n/100)))},H=e=>new Date(e).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});function W(e){let{open:t,items:n,total:r,onClose:s,onChangeQuantity:a,onCheckout:o}=e;return t?(0,i.jsx)("div",{className:"cart-overlay",onClick:s,children:(0,i.jsxs)("div",{className:"cart-panel",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h5",{className:"mb-0",children:"\u041a\u043e\u0448\u0438\u043a"}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:s,children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]}),0===n.length?(0,i.jsx)("p",{className:"text-body-secondary",children:"\u041a\u043e\u0448\u0438\u043a \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439."}):(0,i.jsxs)("div",{className:"d-flex flex-column gap-3",children:[n.map(e=>(0,i.jsxs)("div",{className:"cart-item",children:[(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)("strong",{children:e.product.name}),(0,i.jsxs)("div",{className:"small text-body-secondary",children:[q(e.product)," \u0431\u0430\u043b\u0456\u0432/\u0448\u0442"]}),q(e.product)<e.product.price&&(0,i.jsxs)("div",{className:"small text-decoration-line-through text-body-secondary",children:[e.product.price," \u0431\u0430\u043b\u0456\u0432"]})]}),(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>a(e.product.id,-1),children:"-"}),(0,i.jsx)("span",{children:e.quantity}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>a(e.product.id,1),children:"+"})]})]},e.product.id)),(0,i.jsxs)("div",{className:"cart-total",children:[(0,i.jsx)("span",{children:"\u0420\u0430\u0437\u043e\u043c:"}),(0,i.jsxs)("strong",{children:[r," \u0431\u0430\u043b\u0456\u0432"]})]}),(0,i.jsx)("button",{className:"btn btn-primary",type:"button",onClick:o,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0443"})]})]})}):null}function K(e){let{menuItems:t,activePage:n,onNavigate:r,appVersion:s,liveUsersCount:a}=e;return(0,i.jsxs)("aside",{className:"sidebar",children:[(0,i.jsxs)("div",{className:"sidebar-main",children:[(0,i.jsxs)("div",{className:"brand",children:[(0,i.jsx)("div",{className:"brand-icon",children:"TF"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"TaskFlow"}),(0,i.jsx)("div",{className:"small text-body-secondary",children:"Productivity OS"})]})]}),(0,i.jsx)("nav",{className:"menu-list",children:t.map(e=>(0,i.jsxs)("button",{type:"button",className:"menu-item ".concat(n===e.key?"active":""),onClick:()=>r(e.key),children:[(0,i.jsx)("i",{className:"bi ".concat(e.icon)}),(0,i.jsx)("span",{children:e.label})]},e.key))})]}),(0,i.jsxs)("div",{className:"sidebar-footer-meta",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u041e\u043d\u043b\u0430\u0439\u043d"}),(0,i.jsx)("div",{className:"fw-semibold",children:a})]}),(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0412\u0435\u0440\u0441\u0456\u044f"}),(0,i.jsx)("div",{className:"fw-semibold",children:s})]})]})}function G(e){let{pageTitle:t,user:n,themeMode:s,onThemeChange:a,onOpenPurchase:o,onOpenCart:l,onOpenProfile:c,onOpenSettingsAccount:u,onLogout:d}=e;const[h,f]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{m.current&&(m.current.contains(e.target)||f(!1))},t=e=>{"Escape"===e.key&&f(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",t)}},[]);return(0,i.jsxs)("header",{className:"topbar",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"mb-0",children:t}),(0,i.jsxs)("small",{className:"text-body-secondary",children:["\u0412\u0456\u0442\u0430\u0454\u043c\u043e, ",n.name]})]}),(0,i.jsxs)("div",{className:"topbar-actions",children:[(0,i.jsxs)("div",{className:"theme-switcher",children:[(0,i.jsx)("i",{className:"bi bi-circle-half"}),(0,i.jsxs)("select",{value:s,onChange:e=>a(e.target.value),children:[(0,i.jsx)("option",{value:"system",children:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0430"}),(0,i.jsx)("option",{value:"light",children:"\u0421\u0432\u0456\u0442\u043b\u0430"}),(0,i.jsx)("option",{value:"dark",children:"\u0422\u0435\u043c\u043d\u0430"})]})]}),(0,i.jsxs)("div",{className:"points-chip",children:[(0,i.jsx)("i",{className:"bi bi-coin"}),(0,i.jsx)("strong",{children:n.points}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-light",onClick:o,children:(0,i.jsx)("i",{className:"bi bi-plus-lg"})})]}),(0,i.jsxs)("button",{type:"button",className:"icon-btn",onClick:l,title:"\u041a\u043e\u0448\u0438\u043a",children:[(0,i.jsx)("i",{className:"bi bi-cart3"}),n.cart.length>0&&(0,i.jsx)("span",{className:"icon-counter",children:n.cart.length})]}),(0,i.jsxs)("div",{className:"account-menu-anchor",ref:m,children:[(0,i.jsx)("button",{type:"button",className:"icon-btn account-trigger",onClick:()=>{f(e=>!e)},title:"\u0410\u043a\u0430\u0443\u043d\u0442","aria-expanded":h,children:n.avatar?(0,i.jsx)("img",{className:"avatar-mini",src:n.avatar,alt:"avatar"}):(0,i.jsx)("i",{className:"bi bi-person-circle"})}),h&&(0,i.jsxs)("div",{className:"account-hover-menu shadow-sm",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[(0,i.jsx)("div",{className:"account-hover-avatar",children:n.avatar?(0,i.jsx)("img",{src:n.avatar,alt:n.name}):(0,i.jsx)("i",{className:"bi bi-person-circle"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"fw-semibold",children:n.name}),(0,i.jsx)("div",{className:"small text-body-secondary",children:n.email})]})]}),(0,i.jsxs)("div",{className:"d-grid gap-2",children:[(0,i.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{f(!1),u()},children:[(0,i.jsx)("i",{className:"bi bi-sliders me-1"}),"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"]}),(0,i.jsxs)("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>{f(!1),c()},children:[(0,i.jsx)("i",{className:"bi bi-person-badge me-1"}),"\u041f\u0440\u043e\u0444\u0456\u043b\u044c"]}),(0,i.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>{f(!1),d()},children:[(0,i.jsx)("i",{className:"bi bi-box-arrow-right me-1"}),"\u0412\u0438\u0439\u0442\u0438"]})]})]})]})]})]})}function Q(){return(0,i.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,i.jsx)("section",{className:"card shadow-sm about-hero",children:(0,i.jsxs)("div",{className:"card-body p-4 p-lg-5",children:[(0,i.jsx)("span",{className:"hero-badge",children:"TaskFlow Platform"}),(0,i.jsx)("h3",{className:"mb-3",children:"TaskFlow: \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u0456\u0441\u0442\u044c, \u043c\u043e\u0442\u0438\u0432\u0430\u0446\u0456\u044f \u0442\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u0432 \u043e\u0434\u043d\u043e\u043c\u0443 \u043f\u0440\u043e\u0441\u0442\u043e\u0440\u0456"}),(0,i.jsx)("p",{className:"mb-0 text-body-secondary",children:"TaskFlow \u043f\u043e\u0454\u0434\u043d\u0443\u0454 \u0442\u0440\u0435\u043a\u0435\u0440 \u0437\u0430\u0434\u0430\u0447, \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u043c\u043e\u0442\u0438\u0432\u0430\u0446\u0456\u0457 \u0431\u0430\u043b\u0430\u043c\u0438, \u043c\u0430\u0433\u0430\u0437\u0438\u043d \u0442\u0430 \u0430\u0434\u043c\u0456\u043d-\u043c\u043e\u0434\u0443\u043b\u044c \u0440\u043e\u043b\u0435\u0439. \u0412\u0438 \u043a\u0435\u0440\u0443\u0454\u0442\u0435 \u0440\u043e\u0431\u043e\u0447\u0438\u043c\u0438 \u0442\u0430 \u043e\u0441\u043e\u0431\u0438\u0441\u0442\u0438\u043c\u0438 \u0446\u0456\u043b\u044f\u043c\u0438 \u043d\u0430 \u0434\u043e\u0448\u043a\u0430\u0445, \u0432\u0456\u0434\u0441\u0442\u0435\u0436\u0443\u0454\u0442\u0435 \u043f\u0440\u043e\u0433\u0440\u0435\u0441 \u0456 \u043f\u0435\u0440\u0435\u0442\u0432\u043e\u0440\u044e\u0454\u0442\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0438 \u043d\u0430 \u0440\u0435\u0430\u043b\u044c\u043d\u0456 \u0432\u0438\u043d\u0430\u0433\u043e\u0440\u043e\u0434\u0438."})]})}),(0,i.jsxs)("section",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-lg-4",children:(0,i.jsx)("div",{className:"card shadow-sm h-100 about-card",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("h6",{className:"mb-3",children:[(0,i.jsx)("i",{className:"bi bi-kanban me-2"}),"\u041a\u0435\u0440\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u0430\u0434\u0430\u0447\u0430\u043c\u0438"]}),(0,i.jsxs)("ul",{className:"mb-0",children:[(0,i.jsx)("li",{children:"\u0414\u043e\u0448\u043a\u0438 \u043f\u0456\u0434 \u0440\u0456\u0437\u043d\u0456 \u0441\u0444\u0435\u0440\u0438: \u0440\u043e\u0431\u043e\u0442\u0430, \u043d\u0430\u0432\u0447\u0430\u043d\u043d\u044f, \u043e\u0441\u043e\u0431\u0438\u0441\u0442\u0435."}),(0,i.jsx)("li",{children:"Drag-and-drop \u043c\u0456\u0436 \u0441\u0442\u0430\u0442\u0443\u0441\u0430\u043c\u0438, \u0434\u0435\u0434\u043b\u0430\u0439\u043d\u0438, \u043f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442\u0438."}),(0,i.jsx)("li",{children:"\u0413\u043d\u0443\u0447\u043a\u0438\u0439 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434 \u043f\u0440\u043e\u0433\u0440\u0435\u0441\u0443 \u043f\u043e \u043a\u043e\u0436\u043d\u0456\u0439 \u0434\u043e\u0448\u0446\u0456."})]})]})})}),(0,i.jsx)("div",{className:"col-lg-4",children:(0,i.jsx)("div",{className:"card shadow-sm h-100 about-card",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("h6",{className:"mb-3",children:[(0,i.jsx)("i",{className:"bi bi-coin me-2"}),"\u0415\u043a\u043e\u043d\u043e\u043c\u0456\u043a\u0430 \u043c\u043e\u0442\u0438\u0432\u0430\u0446\u0456\u0457"]}),(0,i.jsxs)("ul",{className:"mb-0",children:[(0,i.jsx)("li",{children:"\u0411\u0430\u043b\u0438 \u0437\u0430 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u0456 \u0437\u0430\u0434\u0430\u0447\u0456 \u0437 \u0443\u0440\u0430\u0445\u0443\u0432\u0430\u043d\u043d\u044f\u043c \u043f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442\u0443."}),(0,i.jsx)("li",{children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0434\u043e\u0445\u043e\u0434\u0456\u0432 \u0456 \u0432\u0438\u0442\u0440\u0430\u0442 \u0443 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u0446\u0456."}),(0,i.jsx)("li",{children:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430 \u0431\u0430\u043b\u0456\u0432 \u0443 \u0432\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u044c\u043e\u043c\u0443 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0456."})]})]})})}),(0,i.jsx)("div",{className:"col-lg-4",children:(0,i.jsx)("div",{className:"card shadow-sm h-100 about-card",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("h6",{className:"mb-3",children:[(0,i.jsx)("i",{className:"bi bi-shield-lock me-2"}),"\u0410\u0434\u043c\u0456\u043d \u0442\u0430 \u0431\u0435\u0437\u043f\u0435\u043a\u0430"]}),(0,i.jsxs)("ul",{className:"mb-0",children:[(0,i.jsx)("li",{children:"\u0420\u043e\u043b\u0456 owner/operator/moderator \u0437 \u043e\u043a\u0440\u0435\u043c\u0438\u043c\u0438 \u043f\u0440\u0430\u0432\u0430\u043c\u0438."}),(0,i.jsx)("li",{children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0446\u0456\u044f \u0430\u043a\u0430\u0443\u043d\u0442\u0456\u0432, \u0444\u043b\u0430\u0436\u043a\u0438, \u043f\u0440\u0438\u0447\u0438\u043d\u0438 \u0431\u043b\u043e\u043a\u0443\u0432\u0430\u043d\u044c."}),(0,i.jsx)("li",{children:"Firebase Auth + Firestore \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0443."})]})]})})})]}),(0,i.jsx)("section",{className:"card shadow-sm about-roadmap",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0429\u043e \u0449\u0435 \u0454 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0456"}),(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"about-feature-row",children:[(0,i.jsx)("i",{className:"bi bi-palette2"})," \u0422\u0435\u043c\u0438 \u0442\u0430 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0456\u0437\u0430\u0446\u0456\u044f \u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443"]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"about-feature-row",children:[(0,i.jsx)("i",{className:"bi bi-shop"})," \u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0442\u043e\u0432\u0430\u0440\u0456\u0432, \u043d\u043e\u0432\u0438\u043d\u043a\u0438, \u0437\u043d\u0438\u0436\u043a\u0438"]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"about-feature-row",children:[(0,i.jsx)("i",{className:"bi bi-people"})," \u041e\u043d\u043b\u0430\u0439\u043d-\u043b\u0456\u0447\u0438\u043b\u044c\u043d\u0438\u043a \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432"]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"about-feature-row",children:[(0,i.jsx)("i",{className:"bi bi-graph-up-arrow"})," \u0410\u043d\u0430\u043b\u0456\u0442\u0438\u043a\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0442\u0430 \u0430\u0434\u043c\u0456\u043d-\u0430\u043d\u0430\u043b\u0456\u0442\u0438\u043a\u0430"]})})]})]})})]})}function X(e,t){return!t||t<=0?0:Math.max(4,Math.round(e/t*100))}function J(e){let{analytics:t}=e;return(0,i.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432"}),(0,i.jsx)("div",{className:"admin-stat-value",children:t.totalUsers})]})}),(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0417\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u0438\u0445"}),(0,i.jsx)("div",{className:"admin-stat-value",children:t.bannedUsers})]})}),(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0417 \u0444\u043b\u0430\u0436\u043a\u0430\u043c\u0438"}),(0,i.jsx)("div",{className:"admin-stat-value",children:t.flaggedUsersCount})]})}),(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0412\u043b\u0430\u0441\u043d\u0438\u043a\u0456\u0432"}),(0,i.jsx)("div",{className:"admin-stat-value",children:t.adminsCount})]})})]}),(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-lg-7",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457 \u0437\u0430 \u043e\u0441\u0442\u0430\u043d\u043d\u0456 7 \u0434\u043d\u0456\u0432"}),(0,i.jsx)("div",{className:"admin-histogram",children:(()=>{const e=Math.max(1,...t.registrationsHistogram.map(e=>e.value));return t.registrationsHistogram.map(t=>(0,i.jsxs)("div",{className:"admin-histogram-row",children:[(0,i.jsx)("span",{className:"admin-histogram-label",children:t.label}),(0,i.jsx)("div",{className:"admin-histogram-track",children:(0,i.jsx)("div",{className:"admin-histogram-bar bar-registrations",style:{width:"".concat(X(t.value,e),"%")}})}),(0,i.jsx)("span",{className:"admin-histogram-value",children:t.value})]},t.label))})()})]})})}),(0,i.jsx)("div",{className:"col-lg-5",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsxs)("div",{className:"card-body d-flex flex-column gap-3",children:[(0,i.jsxs)("div",{className:"admin-mini-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0423\u0441\u044c\u043e\u0433\u043e \u0437\u0430\u0432\u0434\u0430\u043d\u044c"}),(0,i.jsx)("div",{className:"fw-semibold",children:t.totalTasks})]}),(0,i.jsxs)("div",{className:"admin-mini-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,i.jsx)("div",{className:"fw-semibold",children:t.doneTasks})]}),(0,i.jsxs)("div",{className:"admin-mini-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0423 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),(0,i.jsx)("div",{className:"fw-semibold",children:t.progressTasks})]}),(0,i.jsxs)("div",{className:"admin-mini-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,i.jsx)("div",{className:"fw-semibold",children:t.todoTasks})]}),(0,i.jsxs)("div",{className:"admin-mini-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0422\u043e\u0432\u0430\u0440\u0456\u0432 / \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0439"}),(0,i.jsxs)("div",{className:"fw-semibold",children:[t.productsCount," / ",t.categoriesCount]})]})]})})})]}),(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-lg-5",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0420\u043e\u0437\u043f\u043e\u0434\u0456\u043b \u0440\u043e\u043b\u0435\u0439"}),(0,i.jsx)("div",{className:"d-flex flex-column gap-2",children:t.roleDistribution.map(e=>(0,i.jsxs)("div",{className:"admin-role-row",children:[(0,i.jsx)("span",{children:e.label}),(0,i.jsx)("span",{className:"badge text-bg-light",children:e.count})]},e.id))})]})})}),(0,i.jsx)("div",{className:"col-lg-7",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0422\u043e\u043f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432 \u0437\u0430 \u0431\u0430\u043b\u0430\u043d\u0441\u043e\u043c"}),0===t.topUsers.length?(0,i.jsx)("p",{className:"text-body-secondary mb-0",children:"\u0414\u0430\u043d\u0456 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456."}):(0,i.jsx)("div",{className:"d-flex flex-column gap-2",children:t.topUsers.map((e,t)=>(0,i.jsxs)("div",{className:"admin-top-user",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,i.jsxs)("span",{className:"badge text-bg-primary",children:["#",t+1]}),(0,i.jsx)("strong",{children:e.name})]}),(0,i.jsxs)("div",{className:"small text-body-secondary",children:[e.points," \u0431\u0430\u043b\u0456\u0432"]})]},e.id))})]})})})]})]})}const Y=[{value:"0",label:"\u0411\u0435\u0437\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e"},{value:"1",label:"1 \u0434\u0435\u043d\u044c"},{value:"3",label:"3 \u0434\u043d\u0456"},{value:"7",label:"7 \u0434\u043d\u0456\u0432"},{value:"30",label:"30 \u0434\u043d\u0456\u0432"}];function $(e){let{open:t,draft:n,onDraftChange:r,onClose:s,onSubmit:a}=e;return t?(0,i.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,i.jsx)("div",{className:"task-modal card shadow-lg",onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h5",{className:"mb-0",children:"\u0411\u043b\u043e\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0430\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:s,children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,i.jsxs)("form",{className:"row g-3",onSubmit:a,children:[(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,i.jsx)("input",{className:"form-control",value:n.reason,onChange:e=>r(t=>d(d({},t),{},{reason:e.target.value})),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u043f\u0456\u0434\u043e\u0437\u0440\u0456\u043b\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0456\u0441\u0442\u044c"})]}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041e\u043f\u0438\u0441"}),(0,i.jsx)("textarea",{className:"form-control",rows:3,value:n.description,onChange:e=>r(t=>d(d({},t),{},{description:e.target.value})),placeholder:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0456 \u0434\u0435\u0442\u0430\u043b\u0456 \u0434\u043b\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0422\u0435\u0440\u043c\u0456\u043d \u0431\u043b\u043e\u043a\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,i.jsx)("select",{className:"form-select",value:n.durationDays,onChange:e=>r(t=>d(d({},t),{},{durationDays:e.target.value})),children:Y.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{className:"col-12 d-flex justify-content-end gap-2",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:s,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,i.jsxs)("button",{type:"submit",className:"btn btn-danger",children:[(0,i.jsx)("i",{className:"bi bi-slash-circle me-1"}),"\u0417\u0430\u0431\u043b\u043e\u043a\u0443\u0432\u0430\u0442\u0438"]})]})]})]})})}):null}function Z(e){let{shopCategories:t,shopProducts:n,categoryInput:r,onCategoryInputChange:s,onAddCategory:a,onDeleteCategory:o,editingProductId:l,productForm:c,onProductFormChange:u,onProductSubmit:d,onResetProductEdit:h,productSearch:f,onProductSearchChange:m,productPagination:p,onProductPageChange:g,onEditProduct:v,onDeleteProduct:y}=e;return(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-lg-4",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443"}),(0,i.jsxs)("div",{className:"input-group mb-3",children:[(0,i.jsx)("input",{className:"form-control",placeholder:"\u041d\u043e\u0432\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",value:r,onChange:e=>s(e.target.value)}),(0,i.jsx)("button",{className:"btn btn-primary",type:"button",onClick:a,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]}),(0,i.jsx)("div",{className:"admin-list-scroll d-flex flex-column gap-2",children:t.map(e=>(0,i.jsxs)("div",{className:"admin-category-item",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:e}),(0,i.jsxs)("div",{className:"small text-body-secondary",children:["\u0422\u043e\u0432\u0430\u0440\u0456\u0432: ",n.filter(t=>t.category===e).length]})]}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>o(e),children:(0,i.jsx)("i",{className:"bi bi-trash"})})]},e))})]})})}),(0,i.jsxs)("div",{className:"col-lg-8",children:[(0,i.jsx)("div",{className:"card shadow-sm mb-4",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h6",{className:"mb-0",children:l?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440"}),l&&(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:h,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]}),(0,i.jsxs)("form",{className:"row g-3",onSubmit:d,children:[(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,i.jsx)("input",{className:"form-control",value:c.name,onChange:e=>u("name",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-3",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0426\u0456\u043d\u0430 (\u0431\u0430\u043b\u0438)"}),(0,i.jsx)("input",{type:"number",className:"form-control",value:c.price,onChange:e=>u("price",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-3",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0417\u043d\u0438\u0436\u043a\u0430 (%)"}),(0,i.jsx)("input",{type:"number",className:"form-control",value:c.discountPercent,onChange:e=>u("discountPercent",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-8",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,i.jsx)("input",{list:"shop-categories",className:"form-control",value:c.category,onChange:e=>u("category",e.target.value)}),(0,i.jsx)("datalist",{id:"shop-categories",children:t.map(e=>(0,i.jsx)("option",{value:e},e))})]}),(0,i.jsx)("div",{className:"col-md-4 d-flex align-items-end",children:(0,i.jsxs)("label",{className:"form-check form-switch mb-2",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:c.isNew,onChange:e=>u("isNew",e.target.checked)}),(0,i.jsx)("span",{className:"form-check-label",children:"\u041f\u043e\u0437\u043d\u0430\u0447\u0438\u0442\u0438 \u044f\u043a \u043d\u043e\u0432\u0438\u043d\u043a\u0443"})]})}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f (URL)"}),(0,i.jsx)("input",{className:"form-control",value:c.image,placeholder:"https://...",onChange:e=>u("image",e.target.value)})]}),(0,i.jsx)("div",{className:"col-12 d-flex justify-content-end",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:l?"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0442\u043e\u0432\u0430\u0440":"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0442\u043e\u0432\u0430\u0440"})})]})]})}),(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3 gap-2",children:[(0,i.jsx)("h6",{className:"mb-0",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0442\u043e\u0432\u0430\u0440\u0456\u0432"}),(0,i.jsx)("input",{className:"form-control admin-product-search",placeholder:"\u041f\u043e\u0448\u0443\u043a \u0442\u043e\u0432\u0430\u0440\u0443",value:f,onChange:e=>m(e.target.value)})]}),(0,i.jsxs)("div",{className:"row g-3",children:[p.items.map(e=>{const t=q(e),n=t<e.price;return(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"admin-product-card",children:[(0,i.jsx)("img",{src:e.image,alt:e.name,className:"admin-product-image"}),(0,i.jsxs)("div",{className:"d-flex flex-wrap gap-1",children:[e.isNew&&(0,i.jsx)("span",{className:"badge product-badge-new",children:"\u041d\u043e\u0432\u0438\u043d\u043a\u0430"}),n&&(0,i.jsxs)("span",{className:"badge product-badge-discount",children:["-",e.discountPercent,"%"]})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-start gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"fw-semibold",children:e.name}),(0,i.jsx)("div",{className:"small text-body-secondary",children:e.category}),(0,i.jsxs)("div",{className:"small text-primary fw-semibold mt-1",children:[t," \u0431\u0430\u043b\u0456\u0432"]}),n&&(0,i.jsxs)("div",{className:"small text-decoration-line-through text-body-secondary",children:[e.price," \u0431\u0430\u043b\u0456\u0432"]})]}),(0,i.jsxs)("div",{className:"d-flex gap-2",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>v(e),children:(0,i.jsx)("i",{className:"bi bi-pencil"})}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>y(e.id),children:(0,i.jsx)("i",{className:"bi bi-trash"})})]})]})]})},e.id)}),0===p.items.length&&(0,i.jsx)("p",{className:"text-body-secondary mb-0",children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0456."})]}),p.totalPages>1&&(0,i.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,i.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Products pagination",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:p.page<=1,onClick:()=>g(Math.max(1,p.page-1)),children:"\u041d\u0430\u0437\u0430\u0434"}),(0,i.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm",disabled:!0,children:[p.page," / ",p.totalPages]}),(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:p.page>=p.totalPages,onClick:()=>g(Math.min(p.totalPages,p.page+1)),children:"\u0414\u0430\u043b\u0456"})]})})]})})]})]})}function ee(e){let{appVersion:t,releaseNotes:n}=e;return(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-lg-4",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f"}),(0,i.jsxs)("div",{className:"admin-version-card mb-3",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u041f\u043e\u0442\u043e\u0447\u043d\u0430 \u0432\u0435\u0440\u0441\u0456\u044f"}),(0,i.jsx)("div",{className:"admin-version-value",children:t})]}),(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0420\u043e\u0437\u0434\u0456\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u0441\u043b\u0443\u0436\u0431\u043e\u0432\u0438\u043c \u0440\u043e\u043b\u044f\u043c: owner, operator, task moderator, shop moderator."})]})})}),(0,i.jsx)("div",{className:"col-lg-8",children:(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u0437\u043c\u0456\u043d"}),0===n.length?(0,i.jsx)("p",{className:"text-body-secondary mb-0",children:"\u0416\u0443\u0440\u043d\u0430\u043b \u0437\u043c\u0456\u043d \u043f\u043e\u043a\u0438 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439."}):(0,i.jsx)("div",{className:"admin-release-list",children:n.map(e=>(0,i.jsxs)("article",{className:"admin-release-item",children:[(0,i.jsxs)("div",{className:"d-flex flex-wrap justify-content-between align-items-center gap-2 mb-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"fw-semibold",children:e.title}),(0,i.jsxs)("div",{className:"small text-body-secondary",children:[e.date,e.time?", ".concat(e.time):""]})]}),(0,i.jsx)("span",{className:"badge text-bg-primary",children:e.version})]}),(0,i.jsx)("ul",{className:"admin-release-changes mb-0",children:e.changes.map((t,n)=>(0,i.jsx)("li",{children:t},"".concat(e.id,"-").concat(n)))})]},e.id))})]})})})]})}function te(e){let{page:t,totalPages:n,onChange:r}=e;return n<=1?null:(0,i.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,i.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Users pagination",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:t<=1,onClick:()=>r(Math.max(1,t-1)),children:"\u041d\u0430\u0437\u0430\u0434"}),(0,i.jsxs)("button",{type:"button",className:"btn btn-primary btn-sm",disabled:!0,children:[t," / ",n]}),(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:t>=n,onClick:()=>r(Math.min(n,t+1)),children:"\u0414\u0430\u043b\u0456"})]})})}function ne(e){let{users:t,currentUserId:n,roleOptions:r,permissions:s,userQuery:a,onUserQueryChange:o,userStatusFilter:l,onUserStatusFilterChange:c,userFlagStateFilter:u,onUserFlagStateFilterChange:h,userTagFilter:f,onUserTagFilterChange:m,userPagination:p,selectedUser:g,selectedUserId:v,onSelectUser:y,userForm:b,onUserFormChange:w,canMutateSelectedAccount:k,selectedUserStats:N,formatDateTime:S,onSaveUser:E,onDeleteSelectedUser:_,onBanAction:C,flagReason:T,onFlagReasonChange:I,flagTags:j,onToggleFlagTag:A,onFlagSelectedUser:P,onResolveFlag:D,taskDrafts:R,onTaskDraftChange:L,onSaveTask:M,onDeleteTask:F,newTask:U,onNewTaskChange:V,onCreateTask:z,rawUserJson:B,onRawUserJsonChange:q,onSaveRawUser:H,onOpenFullscreenImage:W}=e;const K=e=>{var t;return(null===(t=x.find(t=>t.id===e))||void 0===t?void 0:t.label)||e};return(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-xl-4",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h6",{className:"mb-0",children:"\u0410\u043a\u0430\u0443\u043d\u0442\u0438"}),(0,i.jsxs)("span",{className:"badge text-bg-light",children:[p.filteredCount," / ",t.length]})]}),(0,i.jsx)("input",{className:"form-control mb-2",placeholder:"\u041f\u043e\u0448\u0443\u043a \u0437\u0430 \u0456\u043c'\u044f\u043c, email, \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043e\u043c",value:a,onChange:e=>o(e.target.value)}),(0,i.jsxs)("div",{className:"admin-filters-grid mb-3",children:[(0,i.jsxs)("select",{className:"form-select form-select-sm",value:l,onChange:e=>c(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"\u0423\u0441\u0456 \u0441\u0442\u0430\u0442\u0443\u0441\u0438"}),(0,i.jsx)("option",{value:"active",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0456"}),(0,i.jsx)("option",{value:"banned",children:"\u0417\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u0456"})]}),(0,i.jsxs)("select",{className:"form-select form-select-sm",value:u,onChange:e=>h(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"\u0423\u0441\u0456 \u043f\u043e\u0437\u043d\u0430\u0447\u043a\u0438"}),(0,i.jsx)("option",{value:"flagged",children:"\u0417 \u0444\u043b\u0430\u0436\u043a\u0430\u043c\u0438"}),(0,i.jsx)("option",{value:"clean",children:"\u0411\u0435\u0437 \u0444\u043b\u0430\u0436\u043a\u0456\u0432"})]}),(0,i.jsxs)("select",{className:"form-select form-select-sm",value:f,onChange:e=>m(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"\u0423\u0441\u0456 \u0442\u0435\u0433\u0438"}),x.map(e=>(0,i.jsx)("option",{value:e.id,children:e.label},e.id))]})]}),(0,i.jsxs)("div",{className:"admin-list-scroll d-flex flex-column gap-2",children:[p.items.map(e=>(0,i.jsx)("button",{type:"button",className:"admin-user-item ".concat(v===e.id?"active":""),onClick:()=>y(e.id),children:(0,i.jsxs)("div",{className:"admin-user-head",children:[(0,i.jsx)("div",{className:"admin-user-avatar-wrap",children:e.avatar?(0,i.jsx)("img",{src:e.avatar,alt:e.name,className:"admin-user-avatar"}):(0,i.jsx)("i",{className:"bi bi-person-circle"})}),(0,i.jsxs)("div",{className:"flex-grow-1",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,i.jsx)("strong",{children:e.name}),(0,i.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[e.isAdmin&&(0,i.jsx)("span",{className:"badge text-bg-primary",children:"owner"}),Array.isArray(e.flags)&&e.flags.length>0&&(0,i.jsx)("span",{className:"badge text-bg-warning",children:e.flags.length}),e.isBanned&&(0,i.jsx)("span",{className:"badge text-bg-danger",children:"ban"})]})]}),(0,i.jsx)("div",{className:"small text-body-secondary",children:e.email})]})]})},e.id)),0===p.items.length&&(0,i.jsx)("div",{className:"text-body-secondary small",children:"\u041d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."})]}),(0,i.jsx)(te,{page:p.page,totalPages:p.totalPages,onChange:p.onPageChange})]})})}),(0,i.jsx)("div",{className:"col-xl-8",children:g&&b?(0,i.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex flex-wrap justify-content-between gap-2 mb-3",children:[(0,i.jsx)("h6",{className:"mb-0",children:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u043a\u0430 \u0430\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,i.jsxs)("div",{className:"d-flex gap-2",children:[s.canBanDeleteUsers&&(0,i.jsx)("button",{type:"button",className:"btn btn-sm ".concat(g.isBanned?"btn-success":"btn-warning"),disabled:!k,onClick:C,children:g.isBanned?"\u0420\u043e\u0437\u0431\u043b\u043e\u043a\u0443\u0432\u0430\u0442\u0438":"\u0417\u0430\u0431\u043b\u043e\u043a\u0443\u0432\u0430\u0442\u0438"}),s.canBanDeleteUsers&&(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",disabled:!k||g.id===n,onClick:_,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]}),(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0406\u043c'\u044f"}),(0,i.jsx)("input",{className:"form-control",value:b.name,readOnly:!s.canManageUsers,onChange:e=>w("name",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0411\u0430\u043b\u0430\u043d\u0441"}),(0,i.jsx)("input",{type:"number",className:"form-control",value:b.points,readOnly:!s.canManageUsers,onChange:e=>w("points",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"Email"}),(0,i.jsx)("input",{type:"email",className:"form-control",value:b.email,readOnly:!s.canManageUsers||g.isAdmin,onChange:e=>w("email",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,i.jsx)("input",{className:"form-control",value:b.phone,readOnly:!s.canManageUsers||g.isAdmin,onChange:e=>w("phone",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0420\u043e\u043b\u0456 \u0430\u043a\u0430\u0443\u043d\u0442\u0430"}),g.isAdmin?(0,i.jsx)("div",{className:"form-control bg-body-secondary-subtle",children:"\u0412\u043b\u0430\u0441\u043d\u0438\u043a \u0441\u0438\u0441\u0442\u0435\u043c\u0438 (owner)"}):(0,i.jsx)("div",{className:"d-flex flex-column gap-2 border rounded p-2",children:r.map(e=>(0,i.jsxs)("label",{className:"form-check mb-0",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:b.roles.includes(e.id),disabled:!s.canManageRoles,onChange:t=>{const n=t.target.checked;w("roles",n?[...b.roles,e.id]:b.roles.filter(t=>t!==e.id))}}),(0,i.jsx)("span",{className:"form-check-label",children:e.label})]},e.id))})]}),(0,i.jsxs)("div",{className:"col-md-4",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0456\u043b\u044e"}),(0,i.jsx)("div",{className:"admin-profile-photo-box ".concat(b.avatar?"clickable":""),onClick:()=>b.avatar&&W(b.avatar),children:b.avatar?(0,i.jsx)("img",{src:b.avatar,alt:b.name,className:"admin-profile-photo"}):(0,i.jsx)("div",{className:"admin-profile-photo-fallback",children:(0,i.jsx)("i",{className:"bi bi-person-circle"})})})]}),(0,i.jsxs)("div",{className:"col-md-8",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0410\u0432\u0430\u0442\u0430\u0440 (URL)"}),(0,i.jsx)("input",{className:"form-control",value:b.avatar,readOnly:!s.canManageUsers,onChange:e=>w("avatar",e.target.value)}),(0,i.jsx)("div",{className:"form-text",children:"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u043d\u0430 \u0444\u043e\u0442\u043e \u0434\u043b\u044f \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443."})]})]}),(0,i.jsxs)("div",{className:"d-flex flex-wrap justify-content-between gap-2 mt-3",children:[(0,i.jsxs)("small",{className:"text-body-secondary",children:["\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f: ",S(g.joinedAt)]}),s.canManageUsers&&(0,i.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:E,disabled:!k,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043f\u0440\u043e\u0444\u0456\u043b\u044c"})]})]})}),N&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0417\u0430\u0432\u0434\u0430\u043d\u044c"}),(0,i.jsx)("div",{className:"admin-stat-value",children:N.totalTasks})]})}),(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,i.jsx)("div",{className:"admin-stat-value",children:N.doneTasks})]})}),(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u041f\u043e\u043a\u0443\u043f\u043e\u043a"}),(0,i.jsx)("div",{className:"admin-stat-value",children:N.purchasesCount})]})}),(0,i.jsx)("div",{className:"col-md-3 col-6",children:(0,i.jsxs)("div",{className:"admin-stat-card",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0424\u043b\u0430\u0436\u043a\u0456\u0432"}),(0,i.jsx)("div",{className:"admin-stat-value",children:N.flagsCount})]})})]})]})}),(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0424\u043b\u0430\u0436\u043a\u0438 \u0430\u043a\u0430\u0443\u043d\u0442\u0430"}),0===(g.flags||[]).length?(0,i.jsx)("div",{className:"text-body-secondary small mb-3",children:"\u0424\u043b\u0430\u0436\u043a\u0456\u0432 \u043f\u043e\u043a\u0438 \u043d\u0435\u043c\u0430\u0454."}):(0,i.jsx)("div",{className:"d-flex flex-column gap-2 mb-3",children:g.flags.map(e=>(0,i.jsxs)("div",{className:"admin-task-card",children:[(0,i.jsxs)("div",{className:"small fw-semibold",children:[(0,i.jsx)("i",{className:"bi bi-flag-fill text-warning me-1"}),e.reason]}),Array.isArray(e.tags)&&e.tags.length>0&&(0,i.jsx)("div",{className:"d-flex flex-wrap gap-1 mt-1",children:e.tags.map(t=>(0,i.jsxs)("span",{className:"badge text-bg-light border",children:["#",K(t)]},"".concat(e.id,"-").concat(t)))}),(0,i.jsx)("div",{className:"small text-body-secondary",children:S(e.createdAt)}),s.canResolveFlags&&(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-success mt-2",onClick:()=>D(g.id,e.id),children:"\u0417\u043d\u044f\u0442\u0438 \u0444\u043b\u0430\u0436\u043e\u043a"})]},e.id))}),s.canFlagAccounts&&(0,i.jsxs)("div",{className:"admin-task-card",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u043f\u043e\u0437\u043d\u0430\u0447\u043a\u0438"}),(0,i.jsx)("textarea",{className:"form-control mb-2",rows:3,value:T,onChange:e=>I(e.target.value)}),(0,i.jsx)("div",{className:"d-flex flex-wrap gap-2 mb-2",children:x.map(e=>(0,i.jsx)("button",{type:"button",className:"btn btn-sm ".concat(j.includes(e.id)?"btn-warning":"btn-outline-secondary"),onClick:()=>A(e.id),children:e.label},e.id))}),(0,i.jsx)("div",{className:"d-flex justify-content-end",children:(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",disabled:!k,onClick:P,children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0444\u043b\u0430\u0436\u043e\u043a"})})]})]})}),s.canReviewTasks&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u041c\u043e\u0434\u0435\u0440\u0430\u0446\u0456\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u044c"}),(0,i.jsx)("div",{className:"admin-list-scroll d-flex flex-column gap-3 mb-3",children:g.tasks.map(e=>{const t=R[e.id]||d(d({},e),{},{points:String(e.points)});return(0,i.jsxs)("div",{className:"admin-task-card",children:[(0,i.jsxs)("div",{className:"row g-2",children:[(0,i.jsx)("div",{className:"col-md-5",children:(0,i.jsx)("input",{className:"form-control form-control-sm",value:t.title||"",disabled:!s.canModerateTasks||!k,onChange:t=>L(e.id,"title",t.target.value)})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("input",{type:"number",className:"form-control form-control-sm",value:t.points||0,disabled:!s.canModerateTasks||!k,onChange:t=>L(e.id,"points",t.target.value)})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsxs)("select",{className:"form-select form-select-sm",value:t.priority||"medium",disabled:!s.canModerateTasks||!k,onChange:t=>L(e.id,"priority",t.target.value),children:[(0,i.jsx)("option",{value:"low",children:"\u041d\u0438\u0437\u044c\u043a\u0438\u0439"}),(0,i.jsx)("option",{value:"medium",children:"\u0421\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}),(0,i.jsx)("option",{value:"high",children:"\u0412\u0438\u0441\u043e\u043a\u0438\u0439"})]})}),(0,i.jsx)("div",{className:"col-md-3",children:(0,i.jsxs)("select",{className:"form-select form-select-sm",value:t.status||"todo",disabled:!s.canModerateTasks||!k,onChange:t=>L(e.id,"status",t.target.value),children:[(0,i.jsx)("option",{value:"todo",children:"\u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,i.jsx)("option",{value:"progress",children:"\u0423 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),(0,i.jsx)("option",{value:"done",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"})]})}),(0,i.jsx)("div",{className:"col-md-8",children:(0,i.jsx)("input",{className:"form-control form-control-sm",placeholder:"\u041e\u043f\u0438\u0441",value:t.description||"",disabled:!s.canModerateTasks||!k,onChange:t=>L(e.id,"description",t.target.value)})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsx)("input",{type:"date",className:"form-control form-control-sm",value:t.dueDate||O(0),disabled:!s.canModerateTasks||!k,onChange:t=>L(e.id,"dueDate",t.target.value)})})]}),s.canModerateTasks&&(0,i.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-2",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",disabled:!k,onClick:()=>F(g.id,e.id),children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-primary",disabled:!k,onClick:()=>M(e.id),children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]},e.id)})}),s.canModerateTasks&&(0,i.jsxs)("div",{className:"admin-task-card",children:[(0,i.jsx)("h6",{className:"small mb-2",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"}),(0,i.jsxs)("div",{className:"row g-2",children:[(0,i.jsx)("div",{className:"col-md-5",children:(0,i.jsx)("input",{className:"form-control form-control-sm",placeholder:"\u041d\u0430\u0437\u0432\u0430",value:U.title,disabled:!k,onChange:e=>V("title",e.target.value)})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("input",{type:"number",className:"form-control form-control-sm",value:U.points,disabled:!k,onChange:e=>V("points",e.target.value)})}),(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsxs)("select",{className:"form-select form-select-sm",value:U.priority,disabled:!k,onChange:e=>V("priority",e.target.value),children:[(0,i.jsx)("option",{value:"low",children:"\u041d\u0438\u0437\u044c\u043a\u0438\u0439"}),(0,i.jsx)("option",{value:"medium",children:"\u0421\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}),(0,i.jsx)("option",{value:"high",children:"\u0412\u0438\u0441\u043e\u043a\u0438\u0439"})]})}),(0,i.jsx)("div",{className:"col-md-3",children:(0,i.jsx)("input",{type:"date",className:"form-control form-control-sm",value:U.dueDate,disabled:!k,onChange:e=>V("dueDate",e.target.value)})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("input",{className:"form-control form-control-sm",placeholder:"\u041e\u043f\u0438\u0441",value:U.description,disabled:!k,onChange:e=>V("description",e.target.value)})})]}),(0,i.jsx)("div",{className:"d-flex justify-content-end mt-2",children:(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-success",disabled:!k,onClick:z,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})})]})]})}),s.canUseRawJson&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0421\u0438\u0440\u0430 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 (JSON)"}),(0,i.jsx)("textarea",{className:"form-control admin-json-editor",value:B,onChange:e=>q(e.target.value)}),(0,i.jsx)("div",{className:"d-flex justify-content-end mt-2",children:(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:H,children:"\u0417\u0430\u0441\u0442\u043e\u0441\u0443\u0432\u0430\u0442\u0438 JSON"})})]})})]}):(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsx)("div",{className:"card-body",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043b\u0456\u0432\u043e\u0440\u0443\u0447."})})})]})}const re={title:"",description:"",priority:"medium",status:"todo",dueDate:O(0),points:35},se={name:"",price:"",category:"",image:"",isNew:!1,discountPercent:0},ie={isOwner:!1,canAccessAdminPanel:!1,canManageRoles:!1,canUseRawJson:!1,canViewUsers:!1,canManageUsers:!1,canBanDeleteUsers:!1,canReviewTasks:!1,canModerateTasks:!1,canFlagAccounts:!1,canViewFlagQueue:!1,canResolveFlags:!1,canManageShop:!1};function ae(e){let{users:t,currentUserId:n,roleOptions:s,permissions:a=ie,shopProducts:o,shopCategories:l,onSaveUser:c,onToggleBan:u,onDeleteUser:h,onSaveRawUser:f,onSaveTask:m,onDeleteTask:p,onFlagUser:g,onResolveFlag:v,onAddCategory:y,onDeleteCategory:b,onSaveProduct:w,onDeleteProduct:x,appVersion:k="v1.0.0",releaseNotes:N=[],formatDateTime:S}=e;const[E,_]=(0,r.useState)("users"),[C,T]=(0,r.useState)(n),[I,j]=(0,r.useState)(""),[A,P]=(0,r.useState)("all"),[D,R]=(0,r.useState)("all"),[O,L]=(0,r.useState)("all"),[M,F]=(0,r.useState)(1),[U,V]=(0,r.useState)(null),[z,B]=(0,r.useState)(""),[q,H]=(0,r.useState)({}),[W,K]=(0,r.useState)(re),[G,Q]=(0,r.useState)(""),[X,Y]=(0,r.useState)([]),[te,ae]=(0,r.useState)(""),[oe,le]=(0,r.useState)(!1),[ce,ue]=(0,r.useState)({reason:"",description:"",durationDays:"7"}),[de,he]=(0,r.useState)(""),[fe,me]=(0,r.useState)(null),[pe,ge]=(0,r.useState)(se),[ve,ye]=(0,r.useState)(""),[be,we]=(0,r.useState)(1),xe=(0,r.useMemo)(()=>{const e=[];return(a.canViewUsers||a.canManageUsers||a.canReviewTasks||a.canFlagAccounts)&&e.push({id:"users",label:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}),a.canManageShop&&e.push({id:"shop",label:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"}),a.canAccessAdminPanel&&(e.push({id:"analytics",label:"\u0410\u043d\u0430\u043b\u0456\u0442\u0438\u043a\u0430"}),e.push({id:"updates",label:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})),e},[a]);(0,r.useEffect)(()=>{!xe.some(e=>e.id===E)&&xe.length>0&&_(xe[0].id)},[E,xe]);const ke=(0,r.useMemo)(()=>{const e=I.trim().toLowerCase();return t.filter(t=>{const n="".concat(t.name," ").concat(t.email," ").concat(t.phone).toLowerCase();if(e&&!n.includes(e))return!1;if("active"===A&&t.isBanned)return!1;if("banned"===A&&!t.isBanned)return!1;const r=Array.isArray(t.flags)?t.flags:[];if("flagged"===D&&0===r.length)return!1;if("clean"===D&&r.length>0)return!1;if("all"!==O){if(!r.some(e=>Array.isArray(e.tags)&&e.tags.includes(O)))return!1}return!0})},[t,I,A,D,O]),Ne=(0,r.useMemo)(()=>{const e=Math.max(1,Math.ceil(ke.length/10)),t=Math.min(M,e),n=10*(t-1);return{page:t,totalPages:e,filteredCount:ke.length,items:ke.slice(n,n+10)}},[ke,M]),Se=(0,r.useMemo)(()=>{const e=ve.trim().toLowerCase();return e?o.filter(t=>"".concat(t.name," ").concat(t.category).toLowerCase().includes(e)):o},[o,ve]),Ee=(0,r.useMemo)(()=>{const e=Math.max(1,Math.ceil(Se.length/8)),t=Math.min(be,e),n=8*(t-1);return{page:t,totalPages:e,items:Se.slice(n,n+8)}},[Se,be]),_e=(0,r.useMemo)(()=>t.find(e=>e.id===C)||null,[t,C]);(0,r.useEffect)(()=>{var e;!C&&t.length>0?T(t[0].id):C&&!t.some(e=>e.id===C)&&T((null===(e=t[0])||void 0===e?void 0:e.id)||null)},[t,C]),(0,r.useEffect)(()=>{F(1)},[I,A,D,O]),(0,r.useEffect)(()=>{we(1)},[ve]),(0,r.useEffect)(()=>{if(!_e)return V(null),B(""),H({}),Q(""),void Y([]);V({name:_e.name,email:_e.email,phone:_e.phone,avatar:_e.avatar||"",points:String(_e.points),subscription:_e.subscription,roles:Array.isArray(_e.roles)?_e.roles:[]}),B(JSON.stringify(_e,null,2)),H(_e.tasks.reduce((e,t)=>(e[t.id]=d(d({},t),{},{points:String(t.points)}),e),{}))},[_e]);const Ce=_e&&(a.isOwner||!_e.isAdmin),Te=(0,r.useMemo)(()=>{if(!_e)return null;const e=_e.tasks||[];return{totalTasks:e.length,doneTasks:e.filter(e=>"done"===e.status).length,purchasesCount:(_e.purchases||[]).length,flagsCount:(_e.flags||[]).length}},[_e]),Ie=(0,r.useMemo)(()=>{const e=Array.from({length:7}).map((e,t)=>{const n=new Date;n.setDate(n.getDate()-(6-t));const r=n.toISOString().slice(0,10);return{key:r,label:r.slice(5)}}),n=Object.fromEntries(e.map(e=>[e.key,0]));return t.forEach(e=>{const t=String(e.joinedAt||"").slice(0,10);t in n&&(n[t]+=1)}),{totalUsers:t.length,bannedUsers:t.filter(e=>e.isBanned).length,flaggedUsersCount:t.filter(e=>(e.flags||[]).length>0).length,adminsCount:t.filter(e=>e.isAdmin).length,totalTasks:t.flatMap(e=>e.tasks||[]).length,doneTasks:t.flatMap(e=>e.tasks||[]).filter(e=>"done"===e.status).length,progressTasks:t.flatMap(e=>e.tasks||[]).filter(e=>"progress"===e.status).length,todoTasks:t.flatMap(e=>e.tasks||[]).filter(e=>"todo"===e.status).length,productsCount:o.length,categoriesCount:l.length,roleDistribution:[...s.map(e=>({id:e.id,label:e.label,count:t.filter(t=>Array.isArray(t.roles)&&t.roles.includes(e.id)).length})),{id:"owner",label:"\u0412\u043b\u0430\u0441\u043d\u0438\u043a",count:t.filter(e=>e.isAdmin).length}],registrationsHistogram:e.map(e=>({label:e.label,value:n[e.key]})),topUsers:[...t].sort((e,t)=>Number(t.points||0)-Number(e.points||0)).slice(0,5)}},[s,l.length,o.length,t]);return(0,i.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body d-flex flex-wrap gap-2 align-items-center justify-content-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"mb-1",children:a.isOwner?"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430":"\u041f\u0430\u043d\u0435\u043b\u044c \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0456\u0457"}),(0,i.jsx)("div",{className:"text-body-secondary small",children:a.isOwner?"\u041f\u043e\u0432\u043d\u0438\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u0432\u043b\u0430\u0441\u043d\u0438\u043a\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u0438.":"\u0414\u043e\u0441\u0442\u0443\u043f \u043e\u0431\u043c\u0435\u0436\u0435\u043d\u0438\u0439 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043e\u044e \u0440\u043e\u043b\u043b\u044e."})]}),xe.length>1&&(0,i.jsx)("div",{className:"btn-group",role:"group","aria-label":"Admin sections",children:xe.map(e=>(0,i.jsx)("button",{type:"button",className:"btn btn-sm ".concat(E===e.id?"btn-primary":"btn-outline-primary"),onClick:()=>_(e.id),children:e.label},e.id))})]})}),"users"===E&&(0,i.jsx)(ne,{users:t,currentUserId:n,roleOptions:s,permissions:a,userQuery:I,onUserQueryChange:j,userStatusFilter:A,onUserStatusFilterChange:P,userFlagStateFilter:D,onUserFlagStateFilterChange:R,userTagFilter:O,onUserTagFilterChange:L,userPagination:d(d({},Ne),{},{onPageChange:F}),selectedUser:_e,selectedUserId:C,onSelectUser:T,userForm:U,onUserFormChange:(e,t)=>V(n=>d(d({},n),{},{[e]:t})),canMutateSelectedAccount:Ce,selectedUserStats:Te,formatDateTime:S,onSaveUser:async()=>{_e&&U&&await c(_e.id,d(d({},U),{},{points:Number(U.points)}))},onDeleteSelectedUser:async()=>{if(!_e)return;window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0430\u043a\u0430\u0443\u043d\u0442 ".concat(_e.name,"? \u0426\u044e \u0434\u0456\u044e \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438."))&&await h(_e.id)},onBanAction:async()=>{_e&&(_e.isBanned?await u(_e.id):(ue({reason:"",description:"",durationDays:"7"}),le(!0)))},flagReason:G,onFlagReasonChange:Q,flagTags:X,onToggleFlagTag:e=>Y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),onFlagSelectedUser:async()=>{if(!_e)return;await g(_e.id,{reason:G,tags:X})&&(Q(""),Y([]))},onResolveFlag:v,taskDrafts:q,onTaskDraftChange:(e,t,n)=>H(r=>d(d({},r),{},{[e]:d(d({},r[e]),{},{[t]:n})})),onSaveTask:async e=>{if(!_e)return;const t=q[e];t&&await m(_e.id,d(d({},t),{},{points:Number(t.points)}))},onDeleteTask:p,newTask:W,onNewTaskChange:(e,t)=>K(n=>d(d({},n),{},{[e]:t})),onCreateTask:async()=>{if(!_e)return;await m(_e.id,d(d({},W),{},{points:Number(W.points)}))&&K(re)},rawUserJson:z,onRawUserJsonChange:B,onSaveRawUser:async()=>{_e&&await f(_e.id,z)},onOpenFullscreenImage:ae}),"shop"===E&&a.canManageShop&&(0,i.jsx)(Z,{shopCategories:l,shopProducts:o,categoryInput:de,onCategoryInputChange:he,onAddCategory:async()=>{await y(de)&&he("")},onDeleteCategory:b,editingProductId:fe,productForm:pe,onProductFormChange:(e,t)=>ge(n=>d(d({},n),{},{[e]:t})),onProductSubmit:async e=>{e.preventDefault();await w(d(d({},pe),{},{id:null!==fe&&void 0!==fe?fe:void 0,price:Number(pe.price),discountPercent:Number(pe.discountPercent)}))&&(me(null),ge(se))},onResetProductEdit:()=>{me(null),ge(se)},productSearch:ve,onProductSearchChange:ye,productPagination:Ee,onProductPageChange:we,onEditProduct:e=>{me(e.id),ge({name:e.name,price:String(e.price),category:e.category,image:e.image||"",isNew:Boolean(e.isNew),discountPercent:Number(e.discountPercent||0)})},onDeleteProduct:x}),"analytics"===E&&(0,i.jsx)(J,{analytics:Ie}),"updates"===E&&(0,i.jsx)(ee,{appVersion:k,releaseNotes:N}),(0,i.jsx)($,{open:oe&&Boolean(_e),draft:ce,onDraftChange:ue,onClose:()=>le(!1),onSubmit:async e=>{if(e.preventDefault(),!_e)return;await u(_e.id,{reason:ce.reason,description:ce.description,durationDays:Number(ce.durationDays)})&&le(!1)}}),te&&(0,i.jsxs)("div",{className:"fullscreen-image-overlay",onClick:()=>ae(""),children:[(0,i.jsx)("img",{src:te,alt:"fullscreen avatar",className:"fullscreen-image"}),(0,i.jsx)("button",{type:"button",className:"btn btn-light fullscreen-close-btn",onClick:()=>ae(""),children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]})]})}function oe(e){var t;let{currentUser:n,plans:s,formatDateTime:a}=e;const[o,l]=(0,r.useState)(""),c=(0,r.useMemo)(()=>{const e=n.tasks.length,t=n.tasks.filter(e=>"done"===e.status).length,r=n.tasks.filter(e=>"progress"===e.status).length,s=n.tasks.filter(e=>"todo"===e.status).length,i=e?Math.round(t/e*100):0,a=(e=>{const t=e.filter(e=>"done"===e.status&&e.completedAt).map(e=>new Date(e.completedAt).toISOString().slice(0,10)),n=Array.from(new Set(t)).sort();if(0===n.length)return 0;let r=0;const s=new Date;for(s.setHours(0,0,0,0);;){const e=s.toISOString().slice(0,10);if(!n.includes(e))break;r+=1,s.setDate(s.getDate()-1)}return r})(n.tasks);return{totalTasks:e,doneTasks:t,progressTasks:r,todoTasks:s,completionRate:i,streak:a,spent:n.pointLedger.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0)}},[n.pointLedger,n.tasks]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsxs)("div",{className:"col-lg-4",children:[(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),(0,i.jsx)("div",{className:"profile-photo-box profile-photo-box-lg clickable",onClick:()=>n.avatar&&l(n.avatar),children:n.avatar?(0,i.jsx)("img",{src:n.avatar,alt:n.name,className:"profile-photo-image"}):(0,i.jsx)("div",{className:"profile-photo-fallback",children:(0,i.jsx)("i",{className:"bi bi-person-circle"})})}),(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsx)("div",{className:"fw-semibold",children:n.name}),(0,i.jsx)("div",{className:"small text-body-secondary",children:n.email}),(0,i.jsx)("div",{className:"small text-body-secondary",children:n.phone||"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e"}),(0,i.jsxs)("div",{className:"small text-body-secondary",children:["\u0422\u0430\u0440\u0438\u0444: ",(0,i.jsx)("strong",{children:(null===(t=s.find(e=>e.id===n.subscription))||void 0===t?void 0:t.title)||"Free"})]})]})]})}),(0,i.jsx)("div",{className:"card shadow-sm mt-4",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0420\u0435\u0441\u0443\u0440\u0441\u0438"}),(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441"}),(0,i.jsxs)("strong",{children:[n.points," \u0431\u0430\u043b\u0456\u0432"]})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{children:"\u041f\u043e\u043a\u0443\u043f\u043e\u043a"}),(0,i.jsx)("strong",{children:n.purchases.length})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("span",{children:"\u0412\u0438\u0442\u0440\u0430\u0447\u0435\u043d\u043e"}),(0,i.jsx)("strong",{className:"text-danger",children:c.spent})]})]})})]}),(0,i.jsx)("div",{className:"col-lg-8",children:(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("div",{className:"card shadow-sm h-100 profile-kpi",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("small",{className:"text-body-secondary",children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0438\u0439 \u043f\u0440\u043e\u0433\u0440\u0435\u0441"}),(0,i.jsxs)("h3",{className:"mt-2 mb-1",children:[c.completionRate,"%"]}),(0,i.jsx)("div",{className:"progress",role:"progressbar","aria-valuenow":c.completionRate,"aria-valuemin":0,"aria-valuemax":100,children:(0,i.jsx)("div",{className:"progress-bar",style:{width:"".concat(c.completionRate,"%")}})}),(0,i.jsxs)("div",{className:"small text-body-secondary mt-2",children:["\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e ",c.doneTasks," \u0456\u0437 ",c.totalTasks," \u0437\u0430\u0434\u0430\u0447"]})]})})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("div",{className:"card shadow-sm h-100 profile-kpi",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("small",{className:"text-body-secondary",children:"\u041f\u043e\u0442\u043e\u0447\u043d\u0430 \u0441\u0435\u0440\u0456\u044f"}),(0,i.jsxs)("h3",{className:"mt-2 mb-1",children:[c.streak," \u0434\u043d."]}),(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0414\u043d\u0456\u0432 \u043f\u043e\u0441\u043f\u0456\u043b\u044c \u0456\u0437 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u0438\u043c\u0438 \u0437\u0430\u0434\u0430\u0447\u0430\u043c\u0438"})]})})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0437\u0430\u0434\u0430\u0447"}),(0,i.jsxs)("div",{className:"profile-status-bars",children:[(0,i.jsxs)("div",{className:"profile-status-item",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between small mb-1",children:[(0,i.jsx)("span",{children:"\u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,i.jsx)("span",{children:c.todoTasks})]}),(0,i.jsx)("div",{className:"progress",children:(0,i.jsx)("div",{className:"progress-bar bg-secondary",style:{width:"".concat(c.totalTasks?c.todoTasks/c.totalTasks*100:0,"%")}})})]}),(0,i.jsxs)("div",{className:"profile-status-item",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between small mb-1",children:[(0,i.jsx)("span",{children:"\u0423 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),(0,i.jsx)("span",{children:c.progressTasks})]}),(0,i.jsx)("div",{className:"progress",children:(0,i.jsx)("div",{className:"progress-bar bg-warning",style:{width:"".concat(c.totalTasks?c.progressTasks/c.totalTasks*100:0,"%")}})})]}),(0,i.jsxs)("div",{className:"profile-status-item",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between small mb-1",children:[(0,i.jsx)("span",{children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,i.jsx)("span",{children:c.doneTasks})]}),(0,i.jsx)("div",{className:"progress",children:(0,i.jsx)("div",{className:"progress-bar bg-success",style:{width:"".concat(c.totalTasks?c.doneTasks/c.totalTasks*100:0,"%")}})})]})]})]})})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h6",{className:"mb-3",children:"\u041e\u0441\u0442\u0430\u043d\u043d\u0456 \u043f\u043e\u043a\u0443\u043f\u043a\u0438"}),0===n.purchases.length?(0,i.jsx)("p",{className:"text-body-secondary mb-0",children:"\u041f\u043e\u043a\u0443\u043f\u043e\u043a \u043f\u043e\u043a\u0438 \u043d\u0435\u043c\u0430\u0454."}):(0,i.jsx)("ul",{className:"list-group list-group-flush",children:n.purchases.slice(0,6).map(e=>(0,i.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-start px-0",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"fw-semibold",children:e.name}),(0,i.jsx)("small",{className:"text-body-secondary",children:a(e.createdAt)})]}),(0,i.jsxs)("span",{className:"badge text-bg-danger",children:["-",e.total]})]},e.id))})]})})})]})})]}),o&&(0,i.jsxs)("div",{className:"fullscreen-image-overlay",onClick:()=>l(""),children:[(0,i.jsx)("img",{src:o,alt:"fullscreen avatar",className:"fullscreen-image"}),(0,i.jsx)("button",{type:"button",className:"btn btn-light fullscreen-close-btn",onClick:()=>l(""),children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]})]})}function le(e){let{plans:t,packs:n,currentSubscription:r,onActivatePlan:s,onBuyPoints:a}=e;return(0,i.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,i.jsx)("section",{className:"card shadow-sm purchase-section",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2",children:[(0,i.jsx)("h5",{className:"mb-0",children:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u043f\u0456\u0434\u043f\u0438\u0441\u043a\u0438"}),(0,i.jsx)("span",{className:"badge text-bg-light",children:"\u041f\u043b\u0430\u043d\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0443"})]}),(0,i.jsx)("div",{className:"row g-3",children:t.map(e=>(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsx)("div",{className:"card h-100 shadow-sm purchase-card",children:(0,i.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,i.jsx)("h6",{children:e.title}),(0,i.jsx)("div",{className:"fw-bold fs-5 mb-3",children:e.price}),(0,i.jsx)("ul",{className:"small text-body-secondary ps-3",children:e.features.map(e=>(0,i.jsx)("li",{children:e},e))}),(0,i.jsx)("button",{className:"btn mt-auto ".concat(r===e.id?"btn-success":"btn-outline-primary"),type:"button",onClick:()=>s(e.id),children:r===e.id?"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439":"\u041e\u0431\u0440\u0430\u0442\u0438 \u0442\u0430\u0440\u0438\u0444"})]})})},e.id))})]})}),(0,i.jsx)("section",{className:"card shadow-sm purchase-section",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2",children:[(0,i.jsx)("h5",{className:"mb-0",children:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0431\u0430\u043b\u0456\u0432"}),(0,i.jsx)("span",{className:"badge text-bg-light",children:"\u0428\u0432\u0438\u0434\u043a\u0435 \u043f\u043e\u043f\u043e\u0432\u043d\u0435\u043d\u043d\u044f"})]}),(0,i.jsx)("div",{className:"row g-3",children:n.map(e=>(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsx)("div",{className:"card h-100 shadow-sm purchase-card",children:(0,i.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,i.jsx)("h6",{children:e.title}),(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("i",{className:"bi bi-coin me-1"}),(0,i.jsx)("strong",{children:e.points})," \u0431\u0430\u043b\u0456\u0432"]}),(0,i.jsxs)("p",{className:"text-body-secondary",children:["\u0426\u0456\u043d\u0430: ",e.price]}),(0,i.jsx)("button",{className:"btn btn-primary mt-auto",type:"button",onClick:()=>a(e),children:"\u041a\u0443\u043f\u0438\u0442\u0438 \u043f\u0430\u043a\u0435\u0442"})]})})},e.id))})]})})]})}const ce=[{id:"account",label:"\u0410\u043a\u0430\u0443\u043d\u0442",icon:"bi-person-badge"},{id:"privacy",label:"\u041a\u043e\u043d\u0444\u0456\u0434\u0435\u043d\u0446\u0456\u0439\u043d\u0456\u0441\u0442\u044c",icon:"bi-shield-lock"},{id:"appearance",label:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f",icon:"bi-palette2"},{id:"notifications",label:"\u0421\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u043d\u044f",icon:"bi-bell"},{id:"workspace",label:"\u0420\u043e\u0431\u043e\u0447\u0438\u0439 \u043f\u0440\u043e\u0441\u0442\u0456\u0440",icon:"bi-grid-1x2"}];function ue(e){let{currentUser:t,profileDraft:n={name:"",email:"",phone:"",avatar:""},themeMode:s,effectiveTheme:a,onThemeChange:o,onToggleSetting:l,onProfileChange:c,onSaveProfile:u,onTogglePaymentLink:d,onLogout:h,onDeleteAccount:f,initialSection:m="appearance"}=e;const[p,g]=(0,r.useState)(m),[v,y]=(0,r.useState)("");(0,r.useEffect)(()=>{m&&g(m)},[m]);const b=(0,r.useMemo)(()=>{const e=t.tasks.length;if(!e)return 0;const n=t.tasks.filter(e=>"done"===e.status).length;return Math.round(n/e*100)},[t.tasks]);return(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-lg-3",children:(0,i.jsx)("div",{className:"card shadow-sm h-100",children:(0,i.jsx)("div",{className:"card-body settings-nav",children:ce.map(e=>(0,i.jsxs)("button",{type:"button",className:"settings-nav-item ".concat(p===e.id?"active":""),onClick:()=>g(e.id),children:[(0,i.jsx)("i",{className:"bi ".concat(e.icon)}),(0,i.jsx)("span",{children:e.label})]},e.id))})})}),(0,i.jsxs)("div",{className:"col-lg-9",children:["account"===p&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h5",{className:"card-title mb-3",children:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0430\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,i.jsxs)("form",{className:"row g-3",onSubmit:u,children:[(0,i.jsxs)("div",{className:"col-md-4",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0456\u043b\u044e"}),(0,i.jsx)("div",{className:"profile-photo-box small ".concat(n.avatar?"clickable":""),onClick:()=>n.avatar&&y(n.avatar),children:n.avatar?(0,i.jsx)("img",{src:n.avatar,alt:n.name||"profile",className:"profile-photo-image"}):(0,i.jsx)("div",{className:"profile-photo-fallback",children:(0,i.jsx)("i",{className:"bi bi-person-circle"})})})]}),(0,i.jsx)("div",{className:"col-md-8",children:(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0406\u043c'\u044f"}),(0,i.jsx)("input",{className:"form-control",value:n.name,onChange:e=>c("name",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,i.jsx)("input",{className:"form-control",value:n.phone,onChange:e=>c("phone",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"Email"}),(0,i.jsx)("input",{className:"form-control",value:n.email,disabled:!0})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u043d\u0430 \u0444\u043e\u0442\u043e"}),(0,i.jsx)("input",{className:"form-control",value:n.avatar,onChange:e=>c("avatar",e.target.value),placeholder:"https://..."})]})]})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("div",{className:"settings-actions",children:[(0,i.jsx)("button",{className:"btn btn-primary",type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0434\u0430\u043d\u0456"}),(0,i.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:d,children:t.paymentLinked?"\u0412\u0456\u0434\u0432'\u044f\u0437\u0430\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443":"\u041f\u0440\u0438\u0432'\u044f\u0437\u0430\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443"}),(0,i.jsxs)("button",{className:"btn btn-outline-danger",type:"button",onClick:h,children:[(0,i.jsx)("i",{className:"bi bi-box-arrow-right me-1"}),"\u0412\u0438\u0439\u0442\u0438"]})]})})]})]})}),"privacy"===p&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h5",{className:"card-title mb-3",children:"\u041a\u043e\u043d\u0444\u0456\u0434\u0435\u043d\u0446\u0456\u0439\u043d\u0456\u0441\u0442\u044c \u0456 \u0431\u0435\u0437\u043f\u0435\u043a\u0430"}),(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.publicStats,onChange:()=>l("publicStats")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u041f\u043e\u043a\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043f\u0443\u0431\u043b\u0456\u0447\u043d\u0443 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.showOnlineStatus,onChange:()=>l("showOnlineStatus")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u041f\u043e\u043a\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043e\u043d\u043b\u0430\u0439\u043d-\u0441\u0442\u0430\u0442\u0443\u0441"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.loginAlerts,onChange:()=>l("loginAlerts")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u0421\u043f\u043e\u0432\u0456\u0449\u0430\u0442\u0438 \u043f\u0440\u043e \u0432\u0445\u0456\u0434 \u0432 \u0430\u043a\u0430\u0443\u043d\u0442"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.twoFactorAuth,onChange:()=>l("twoFactorAuth")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u0423\u0432\u0456\u043c\u043a\u043d\u0443\u0442\u0438 2FA (\u0434\u0435\u043c\u043e)"})]})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("div",{className:"settings-danger-zone",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h6",{className:"mb-1",children:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0430\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u041f\u043e\u0432\u043d\u0456\u0441\u0442\u044e \u0432\u0438\u0434\u0430\u043b\u044f\u0454 \u0432\u0430\u0448 \u043f\u0440\u043e\u0444\u0456\u043b\u044c \u0437 TaskFlow. \u0414\u0456\u044e \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438."})]}),(0,i.jsxs)("button",{type:"button",className:"btn btn-outline-danger",onClick:f,children:[(0,i.jsx)("i",{className:"bi bi-trash3 me-1"}),"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0430\u043a\u0430\u0443\u043d\u0442"]})]})})]})]})}),"appearance"===p&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h5",{className:"card-title mb-3",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f"}),(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0422\u0435\u043c\u0430 \u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0443"}),(0,i.jsxs)("select",{className:"form-select",value:s,onChange:e=>o(e.target.value),children:[(0,i.jsx)("option",{value:"system",children:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0430"}),(0,i.jsx)("option",{value:"light",children:"\u0421\u0432\u0456\u0442\u043b\u0430"}),(0,i.jsx)("option",{value:"dark",children:"\u0422\u0435\u043c\u043d\u0430"})]}),(0,i.jsxs)("p",{className:"text-body-secondary small mt-2 mb-0",children:["\u0417\u0430\u0440\u0430\u0437 \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0430\u043d\u043e: ",(0,i.jsx)("strong",{children:"dark"===a?"\u0422\u0435\u043c\u043d\u0430":"\u0421\u0432\u0456\u0442\u043b\u0430"})]})]}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch mt-4 pt-2",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.compactMode,onChange:()=>l("compactMode")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u041a\u043e\u043c\u043f\u0430\u043a\u0442\u043d\u0438\u0439 \u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441"})]})})]})]})}),"notifications"===p&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h5",{className:"card-title mb-3",children:"\u0421\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u043d\u044f"}),(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.reminders,onChange:()=>l("reminders")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u041d\u0430\u0433\u0430\u0434\u0443\u0432\u0430\u043d\u043d\u044f \u043f\u0440\u043e \u0434\u0435\u0434\u043b\u0430\u0439\u043d\u0438"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.weeklyDigest,onChange:()=>l("weeklyDigest")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u0429\u043e\u0442\u0438\u0436\u043d\u0435\u0432\u0438\u0439 \u0437\u0432\u0456\u0442"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.pushAlerts,onChange:()=>l("pushAlerts")}),(0,i.jsx)("span",{className:"form-check-label",children:"Push-\u0441\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u043d\u044f"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.marketingEmails,onChange:()=>l("marketingEmails")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u043e\u0432\u0456 \u043b\u0438\u0441\u0442\u0438"})]})})]})]})}),"workspace"===p&&(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h5",{className:"card-title mb-3",children:"\u0420\u043e\u0431\u043e\u0447\u0438\u0439 \u043f\u0440\u043e\u0441\u0442\u0456\u0440"}),(0,i.jsxs)("div",{className:"row g-3",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.smartSort,onChange:()=>l("smartSort")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u0420\u043e\u0437\u0443\u043c\u043d\u0435 \u0441\u043e\u0440\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u0430\u0434\u0430\u0447"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.autoArchiveDoneTasks,onChange:()=>l("autoArchiveDoneTasks")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u0410\u0432\u0442\u043e\u0430\u0440\u0445\u0456\u0432 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u0438\u0445 \u0437\u0430\u0434\u0430\u0447"})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("label",{className:"form-check form-switch",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",checked:t.settings.focusMode,onChange:()=>l("focusMode")}),(0,i.jsx)("span",{className:"form-check-label",children:"\u0424\u043e\u043a\u0443\u0441-\u0440\u0435\u0436\u0438\u043c"})]})}),(0,i.jsx)("div",{className:"col-md-6 d-flex align-items-center",children:(0,i.jsxs)("div",{className:"small text-body-secondary",children:["\u041f\u043e\u0442\u043e\u0447\u043d\u0430 \u0435\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0456\u0441\u0442\u044c: ",(0,i.jsxs)("strong",{children:[b,"%"]})," \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u0438\u0445 \u0437\u0430\u0434\u0430\u0447."]})})]})]})})]}),v&&(0,i.jsxs)("div",{className:"fullscreen-image-overlay",onClick:()=>y(""),children:[(0,i.jsx)("img",{src:v,alt:"fullscreen avatar",className:"fullscreen-image"}),(0,i.jsx)("button",{type:"button",className:"btn btn-light fullscreen-close-btn",onClick:()=>y(""),children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]})]})}function de(e){let{products:t,categories:n,onAddToCart:s}=e;const[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)("all"),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(1),m=(0,r.useMemo)(()=>{const e=a.trim().toLowerCase();return t.filter(t=>{if(!("all"===l||t.category===l))return!1;if(u&&!t.isNew)return!1;if(!e)return!0;return"".concat(t.name," ").concat(t.category).toLowerCase().includes(e)})},[t,a,l,u]),p=(0,r.useMemo)(()=>{const e=Math.max(1,Math.ceil(m.length/9)),t=Math.min(h,e),n=9*(t-1);return{page:t,totalPages:e,items:m.slice(n,n+9)}},[m,h]);return(0,i.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsx)("div",{className:"card-body",children:(0,i.jsxs)("div",{className:"row g-3 align-items-end",children:[(0,i.jsxs)("div",{className:"col-md-5",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u043e\u0448\u0443\u043a \u0442\u043e\u0432\u0430\u0440\u0443"}),(0,i.jsx)("input",{className:"form-control",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u043a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0430, \u0441\u0442\u0440\u0456\u043c, \u0430\u0443\u0434\u0456\u043e",value:a,onChange:e=>{o(e.target.value),f(1)}})]}),(0,i.jsxs)("div",{className:"col-md-4",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,i.jsxs)("select",{className:"form-select",value:l,onChange:e=>{c(e.target.value),f(1)},children:[(0,i.jsx)("option",{value:"all",children:"\u0423\u0441\u0456 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"}),n.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"col-md-3",children:[(0,i.jsx)("label",{className:"form-label d-block",children:"\u041f\u0440\u043e\u043c\u043e-\u0441\u0442\u0440\u0456\u0447\u043a\u0430"}),(0,i.jsxs)("button",{type:"button",className:"btn w-100 ".concat(u?"btn-primary":"btn-outline-primary"),onClick:()=>{d(e=>!e),f(1)},children:[(0,i.jsx)("i",{className:"bi bi-stars me-2"}),u?"\u041b\u0438\u0448\u0435 \u043d\u043e\u0432\u0438\u043d\u043a\u0438":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u043d\u043a\u0438"]})]})]})})}),(0,i.jsxs)("div",{className:"row g-4",children:[p.items.map(e=>{const t=q(e),n=t<e.price;return(0,i.jsx)("div",{className:"col-sm-6 col-xl-4",children:(0,i.jsx)("div",{className:"card h-100 shadow-sm shop-card",children:(0,i.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,i.jsxs)("div",{className:"product-image-wrap mb-3 position-relative",children:[(0,i.jsx)("img",{src:e.image,alt:e.name,className:"product-image",loading:"lazy",onError:e=>{e.currentTarget.src="https://placehold.co/600x400?text=TaskFlow+Shop"}}),(0,i.jsxs)("div",{className:"product-badges",children:[e.isNew&&(0,i.jsx)("span",{className:"badge product-badge-new",children:"\u041d\u043e\u0432\u0438\u043d\u043a\u0430"}),n&&(0,i.jsxs)("span",{className:"badge product-badge-discount",children:["-",e.discountPercent,"%"]})]})]}),(0,i.jsx)("div",{className:"d-flex align-items-center gap-2 mb-2",children:(0,i.jsx)("span",{className:"badge text-bg-light",children:e.category})}),(0,i.jsx)("h5",{className:"card-title",children:e.name}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-end mt-auto pt-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"product-price",children:[(0,i.jsx)("i",{className:"bi bi-coin me-1"}),t]}),n&&(0,i.jsxs)("div",{className:"product-price-old",children:[(0,i.jsx)("i",{className:"bi bi-coin me-1"}),e.price]})]}),(0,i.jsx)("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>s(e.id),children:"\u0423 \u043a\u043e\u0448\u0438\u043a"})]})]})})},e.id)}),0===p.items.length&&(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsx)("div",{className:"card-body text-body-secondary",children:"\u0417\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u043c\u0438 \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u043c\u0438 \u0442\u043e\u0432\u0430\u0440\u0438 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."})})})]}),p.totalPages>1&&(0,i.jsx)("div",{className:"d-flex justify-content-center",children:(0,i.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Shop pagination",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary",disabled:p.page<=1,onClick:()=>f(e=>Math.max(1,e-1)),children:"\u041d\u0430\u0437\u0430\u0434"}),(0,i.jsxs)("button",{type:"button",className:"btn btn-primary",disabled:!0,children:[p.page," / ",p.totalPages]}),(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary",disabled:p.page>=p.totalPages,onClick:()=>f(e=>Math.min(p.totalPages,e+1)),children:"\u0414\u0430\u043b\u0456"})]})})]})}function he(e){let{taskStats:t,ledgerStats:n,pointLedger:s,formatDateTime:a}=e;const[o,l]=(0,r.useState)(1),c=(0,r.useMemo)(()=>{const e=Math.max(1,Math.ceil(s.length/10)),t=Math.min(o,e),n=10*(t-1);return{page:t,totalPages:e,items:s.slice(n,n+10)}},[s,o]);return(0,i.jsxs)("div",{className:"row g-4",children:[(0,i.jsx)("div",{className:"col-md-6 col-xl-3",children:(0,i.jsx)("div",{className:"card stat-card h-100 shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("small",{className:"text-body-secondary",children:"\u0423\u0441\u044c\u043e\u0433\u043e \u0437\u0430\u0434\u0430\u0447"}),(0,i.jsx)("h3",{className:"mt-2 mb-0",children:t.total})]})})}),(0,i.jsx)("div",{className:"col-md-6 col-xl-3",children:(0,i.jsx)("div",{className:"card stat-card h-100 shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("small",{className:"text-body-secondary",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,i.jsx)("h3",{className:"mt-2 mb-0 text-success",children:t.done})]})})}),(0,i.jsx)("div",{className:"col-md-6 col-xl-3",children:(0,i.jsx)("div",{className:"card stat-card h-100 shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("small",{className:"text-body-secondary",children:"\u0417\u0430\u0440\u043e\u0431\u043b\u0435\u043d\u043e \u0431\u0430\u043b\u0456\u0432"}),(0,i.jsx)("h3",{className:"mt-2 mb-0 text-primary",children:n.income})]})})}),(0,i.jsx)("div",{className:"col-md-6 col-xl-3",children:(0,i.jsx)("div",{className:"card stat-card h-100 shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("small",{className:"text-body-secondary",children:"\u0412\u0438\u0442\u0440\u0430\u0447\u0435\u043d\u043e \u0431\u0430\u043b\u0456\u0432"}),(0,i.jsx)("h3",{className:"mt-2 mb-0 text-danger",children:n.spent})]})})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h5",{className:"card-title mb-3",children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0437 \u0431\u0430\u043b\u0430\u043c\u0438"}),(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"table align-middle",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),(0,i.jsx)("th",{children:"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u044f"}),(0,i.jsx)("th",{children:"\u0422\u0438\u043f"}),(0,i.jsx)("th",{className:"text-end",children:"\u0421\u0443\u043c\u0430"})]})}),(0,i.jsx)("tbody",{children:c.items.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:a(e.createdAt)}),(0,i.jsx)("td",{children:e.label}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"badge ".concat("income"===e.type?"text-bg-success":"text-bg-danger"),children:"income"===e.type?"\u0414\u043e\u0445\u0456\u0434":"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"})}),(0,i.jsxs)("td",{className:"text-end fw-semibold",children:["income"===e.type?"+":"-",e.amount]})]},e.id))})]})}),c.totalPages>1&&(0,i.jsx)("div",{className:"d-flex justify-content-end mt-2",children:(0,i.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Ledger pagination",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-primary",disabled:c.page<=1,onClick:()=>l(e=>Math.max(1,e-1)),children:"\u041d\u0430\u0437\u0430\u0434"}),(0,i.jsxs)("button",{type:"button",className:"btn btn-sm btn-primary",disabled:!0,children:[c.page," / ",c.totalPages]}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-primary",disabled:c.page>=c.totalPages,onClick:()=>l(e=>Math.min(c.totalPages,e+1)),children:"\u0414\u0430\u043b\u0456"})]})})]})})})]})}const fe={name:"",icon:k[0],colorId:N[0].id};function me(e){let{boards:t,activeBoardId:n,onSetActiveBoard:s,onCreateBoard:a,onUpdateBoard:o,onDeleteBoard:l,taskForm:c,onTaskFormChange:u,onCreateTask:h,tasks:f,allTasks:m=[],onTaskStatusChange:p,onTaskDelete:g,priorityMeta:v,statusMeta:y}=e;const[b,w]=(0,r.useState)(null),[x,S]=(0,r.useState)(null),[E,_]=(0,r.useState)(!1),[C,T]=(0,r.useState)(!1),[I,j]=(0,r.useState)("create"),[A,P]=(0,r.useState)(null),[D,R]=(0,r.useState)(fe),[O,L]=(0,r.useState)("boards"),[M,F]=(0,r.useState)(1),U=(0,r.useMemo)(()=>t.find(e=>e.id===n)||null,[t,n]),V=(0,r.useMemo)(()=>N.find(e=>e.id===(null===U||void 0===U?void 0:U.colorId))||N[0],[null===U||void 0===U?void 0:U.colorId]),z=(0,r.useMemo)(()=>{const e={};return t.forEach(t=>{e[t.id]={total:0,done:0,progress:0,todo:0}}),m.forEach(t=>{null!==t&&void 0!==t&&t.boardId&&e[t.boardId]&&(e[t.boardId].total+=1,"done"===t.status?e[t.boardId].done+=1:"progress"===t.status?e[t.boardId].progress+=1:e[t.boardId].todo+=1)}),e},[m,t]),B=(0,r.useMemo)(()=>{const e=m.filter(e=>"done"===e.status).length,n=m.filter(e=>"progress"===e.status).length;return{boardsCount:t.length,tasksCount:m.length,done:e,progress:n}},[m,t.length]),q=(0,r.useMemo)(()=>{const e=Math.max(1,Math.ceil(t.length/6)),n=Math.min(M,e),r=6*(n-1);return{page:n,totalPages:e,items:t.slice(r,r+6)}},[M,t]),H=(0,r.useMemo)(()=>({total:f.length,done:f.filter(e=>"done"===e.status).length}),[f]),W=()=>_(!1),K=()=>{j("create"),P(null),R(fe),T(!0)},G=e=>{j("edit"),P(e.id),R({name:e.name,icon:e.icon,colorId:e.colorId}),T(!0)},Q=()=>{T(!1),j("create"),P(null),R(fe)},X=async e=>{e.preventDefault();("edit"===I?await o(A,D):await a(D))&&(Q(),L("tasks"))},J=async e=>{if(!window.confirm('\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0434\u043e\u0448\u043a\u0443 "'.concat(e.name,'"? \u0417\u0430\u0434\u0430\u0447\u0456 \u0431\u0443\u0434\u0443\u0442\u044c \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d\u0456 \u0432 \u0456\u043d\u0448\u0443 \u0434\u043e\u0448\u043a\u0443.')))return;await l(e.id)&&L("boards")},Y=async e=>{await s(e),L("tasks")};return"boards"===O?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"tracker-boards-wrap",children:[(0,i.jsx)("div",{className:"tracker-boards-head card shadow-sm",children:(0,i.jsx)("div",{className:"card-body p-4 p-lg-5",children:(0,i.jsxs)("div",{className:"tracker-hero-grid",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"mb-2",children:"\u041f\u0440\u043e\u0441\u0442\u0456\u0440 \u0432\u0430\u0448\u0438\u0445 \u0434\u043e\u0449\u043e\u043a"}),(0,i.jsx)("p",{className:"text-body-secondary mb-4",children:"\u0421\u0442\u0432\u043e\u0440\u044e\u0439\u0442\u0435 \u043e\u043a\u0440\u0435\u043c\u0456 \u0434\u043e\u0448\u043a\u0438 \u0434\u043b\u044f \u0440\u043e\u0431\u043e\u0442\u0438, \u043d\u0430\u0432\u0447\u0430\u043d\u043d\u044f, \u043f\u043e\u043a\u0443\u043f\u043e\u043a \u0430\u0431\u043e \u043e\u0441\u043e\u0431\u0438\u0441\u0442\u0438\u0445 \u0446\u0456\u043b\u0435\u0439. \u041a\u043e\u0436\u043d\u0430 \u0434\u043e\u0448\u043a\u0430 \u043c\u0430\u0454 \u0432\u043b\u0430\u0441\u043d\u0438\u0439 \u0441\u0442\u0438\u043b\u044c, \u0456\u043a\u043e\u043d\u043a\u0443 \u0442\u0430 \u0437\u0430\u0434\u0430\u0447\u0456."}),(0,i.jsxs)("button",{type:"button",className:"btn btn-primary btn-lg",onClick:K,children:[(0,i.jsx)("i",{className:"bi bi-plus-circle me-2"}),"\u0414\u043e\u0434\u0430\u0442\u0438 \u0434\u043e\u0448\u043a\u0443"]})]}),(0,i.jsxs)("div",{className:"tracker-hero-stats",children:[(0,i.jsxs)("div",{className:"tracker-hero-stat",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0414\u043e\u0449\u043e\u043a"}),(0,i.jsx)("div",{className:"tracker-hero-value",children:B.boardsCount})]}),(0,i.jsxs)("div",{className:"tracker-hero-stat",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0423\u0441\u044c\u043e\u0433\u043e \u0437\u0430\u0434\u0430\u0447"}),(0,i.jsx)("div",{className:"tracker-hero-value",children:B.tasksCount})]}),(0,i.jsxs)("div",{className:"tracker-hero-stat",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0423 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),(0,i.jsx)("div",{className:"tracker-hero-value",children:B.progress})]}),(0,i.jsxs)("div",{className:"tracker-hero-stat",children:[(0,i.jsx)("div",{className:"small text-body-secondary",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"}),(0,i.jsx)("div",{className:"tracker-hero-value",children:B.done})]})]})]})})}),(0,i.jsxs)("div",{className:"row g-4 mt-1",children:[q.items.map(e=>{const t=N.find(t=>t.id===e.colorId)||N[0],n=z[e.id]||{total:0,done:0,progress:0};return(0,i.jsx)("div",{className:"col-sm-6 col-xl-4",children:(0,i.jsxs)("article",{className:"tracker-board-card",style:{"--board-accent":t.accent,"--board-soft":t.soft},role:"button",tabIndex:0,onClick:()=>Y(e.id),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),Y(e.id))},children:[(0,i.jsxs)("div",{className:"tracker-board-card-top",children:[(0,i.jsx)("div",{className:"tracker-board-icon",style:{color:t.accent},children:(0,i.jsx)("i",{className:"bi ".concat(e.icon)})}),(0,i.jsxs)("div",{className:"tracker-board-actions",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-light",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u043e\u0448\u043a\u0443",onClick:()=>G(e),children:(0,i.jsx)("i",{className:"bi bi-pencil"})}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-light text-danger",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0434\u043e\u0448\u043a\u0443",onClick:()=>J(e),children:(0,i.jsx)("i",{className:"bi bi-trash"})})]})]}),(0,i.jsx)("h6",{className:"mb-1 text-start",children:e.name}),(0,i.jsx)("div",{className:"small text-body-secondary text-start mb-2",children:"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438 \u0437\u0430\u0434\u0430\u0447\u0456 \u0434\u043e\u0448\u043a\u0438"}),(0,i.jsxs)("div",{className:"tracker-board-kpis",children:[(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"bi bi-list-check me-1"}),n.total]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"bi bi-hourglass-split me-1"}),n.progress]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"bi bi-check2-circle me-1"}),n.done]})]})]})},e.id)}),0===t.length&&(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsx)("div",{className:"card-body text-body-secondary",children:"\u0423 \u0432\u0430\u0441 \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \u0434\u043e\u0449\u043e\u043a. \u0421\u0442\u0432\u043e\u0440\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0443."})})})]}),q.totalPages>1&&(0,i.jsx)("div",{className:"d-flex justify-content-center mt-4",children:(0,i.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Boards pagination",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary",disabled:q.page<=1,onClick:()=>F(e=>Math.max(1,e-1)),children:"\u041d\u0430\u0437\u0430\u0434"}),(0,i.jsxs)("button",{type:"button",className:"btn btn-primary",disabled:!0,children:[q.page," / ",q.totalPages]}),(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary",disabled:q.page>=q.totalPages,onClick:()=>F(e=>Math.min(q.totalPages,e+1)),children:"\u0414\u0430\u043b\u0456"})]})})]}),C&&(0,i.jsx)("div",{className:"modal-overlay",onClick:Q,children:(0,i.jsx)("div",{className:"task-modal card shadow-lg",onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h5",{className:"mb-0",children:"edit"===I?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u043e\u0448\u043a\u0443":"\u041d\u043e\u0432\u0430 \u0434\u043e\u0448\u043a\u0430"}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Q,children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,i.jsxs)("form",{className:"row g-3",onSubmit:X,children:[(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430 \u0434\u043e\u0448\u043a\u0438"}),(0,i.jsx)("input",{className:"form-control",value:D.name,onChange:e=>R(t=>d(d({},t),{},{name:e.target.value})),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u0420\u043e\u0431\u043e\u0442\u0430, \u041d\u0430\u0432\u0447\u0430\u043d\u043d\u044f, \u0424\u0456\u0442\u043d\u0435\u0441"})]}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0406\u043a\u043e\u043d\u043a\u0430"}),(0,i.jsx)("div",{className:"tracker-icon-grid",children:k.map(e=>(0,i.jsx)("button",{type:"button",className:"tracker-icon-option ".concat(D.icon===e?"active":""),onClick:()=>R(t=>d(d({},t),{},{icon:e})),children:(0,i.jsx)("i",{className:"bi ".concat(e)})},e))})]}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041a\u043e\u043b\u0456\u0440 \u0434\u043e\u0448\u043a\u0438"}),(0,i.jsx)("div",{className:"tracker-color-grid",children:N.map(e=>(0,i.jsx)("button",{type:"button",className:"tracker-color-option ".concat(D.colorId===e.id?"active":""),style:{background:e.soft,borderColor:e.accent},title:e.label,onClick:()=>R(t=>d(d({},t),{},{colorId:e.id})),children:(0,i.jsx)("span",{style:{background:e.accent}})},e.id))})]}),(0,i.jsxs)("div",{className:"col-12 d-flex justify-content-end gap-2",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:Q,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"edit"===I?"\u041e\u043d\u043e\u0432\u0438\u0442\u0438":"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]})]})})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"d-flex flex-column gap-4",style:{"--board-accent":V.accent,"--board-soft":V.soft},children:[(0,i.jsx)("div",{className:"card shadow-sm tracker-toolbar-card tracker-board-toolbar",children:(0,i.jsxs)("div",{className:"card-body d-flex flex-wrap align-items-center justify-content-between gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-1",children:[U&&(0,i.jsx)("span",{className:"tracker-selected-board-icon",children:(0,i.jsx)("i",{className:"bi ".concat(U.icon)})}),(0,i.jsx)("h5",{className:"mb-0",children:(null===U||void 0===U?void 0:U.name)||"\u0414\u043e\u0448\u043a\u0430"})]}),(0,i.jsxs)("div",{className:"small text-body-secondary",children:["\u0423\u0441\u044c\u043e\u0433\u043e \u0437\u0430\u0434\u0430\u0447: ",H.total,", \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043e: ",H.done]})]}),(0,i.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[(0,i.jsxs)("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>L("boards"),children:[(0,i.jsx)("i",{className:"bi bi-grid me-2"}),"\u0414\u043e \u0434\u043e\u0449\u043e\u043a"]}),U&&(0,i.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>G(U),children:[(0,i.jsx)("i",{className:"bi bi-pencil me-2"}),"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"]}),U&&(0,i.jsxs)("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>J(U),children:[(0,i.jsx)("i",{className:"bi bi-trash me-2"}),"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"]}),(0,i.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>_(!0),children:[(0,i.jsx)("i",{className:"bi bi-plus-circle me-2"}),"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0434\u0430\u0447\u0443"]})]})]})}),(0,i.jsx)("div",{className:"kanban-grid",children:Object.keys(y).map(e=>{const t=f.filter(t=>t.status===e);return(0,i.jsxs)("section",{className:"kanban-column ".concat(x===e?"drag-over":""),onDragOver:t=>{t.preventDefault(),S(e)},onDragLeave:()=>S(null),onDrop:t=>{t.preventDefault(),(async e=>{b&&(await p(b,e),w(null),S(null))})(e)},children:[(0,i.jsx)("div",{className:"kanban-header",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h6",{className:"mb-0",children:y[e].label}),(0,i.jsxs)("small",{className:"text-body-secondary",children:[t.length," \u0437\u0430\u0434\u0430\u0447"]})]})}),(0,i.jsx)("div",{className:"kanban-cards",children:0===t.length?(0,i.jsx)("div",{className:"empty-column",children:"\u041f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0441\u044e\u0434\u0438 \u0437\u0430\u0434\u0430\u0447\u0443"}):t.map(e=>(0,i.jsxs)("article",{className:"task-card draggable-task",draggable:!0,onDragStart:()=>w(e.id),onDragEnd:()=>{w(null),S(null)},children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between gap-2",children:[(0,i.jsx)("h6",{className:"mb-1",children:e.title}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>g(e.id),title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",children:(0,i.jsx)("i",{className:"bi bi-trash"})})]}),e.description&&(0,i.jsx)("p",{className:"task-desc",children:e.description}),(0,i.jsxs)("div",{className:"d-flex gap-2 flex-wrap mb-2",children:[(0,i.jsx)("span",{className:"badge ".concat(v[e.priority].className),children:v[e.priority].label}),(0,i.jsxs)("span",{className:"badge text-bg-light",children:["+",e.points," \u0431\u0430\u043b\u0456\u0432"]}),(0,i.jsxs)("span",{className:"badge text-bg-secondary",children:["\u0434\u043e ",e.dueDate]})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center gap-2",children:[(0,i.jsxs)("select",{className:"form-select form-select-sm",value:e.status,onChange:t=>p(e.id,t.target.value),children:[(0,i.jsx)("option",{value:"todo",children:"\u0414\u043e \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f"}),(0,i.jsx)("option",{value:"progress",children:"\u0423 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),(0,i.jsx)("option",{value:"done",children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"})]}),e.rewardClaimed&&(0,i.jsxs)("span",{className:"small text-success fw-semibold",children:[(0,i.jsx)("i",{className:"bi bi-check2-circle me-1"}),"\u041d\u0430\u0433\u043e\u0440\u043e\u0434\u0443 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043e"]})]})]},e.id))})]},e)})})]}),E&&(0,i.jsx)("div",{className:"modal-overlay",onClick:W,children:(0,i.jsx)("div",{className:"task-modal card shadow-lg",onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h5",{className:"mb-0",children:"\u041d\u043e\u0432\u0430 \u0437\u0430\u0434\u0430\u0447\u0430"}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:W,children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,i.jsxs)("form",{className:"row g-3",onSubmit:async e=>{e.preventDefault(),c.title.trim()&&(await h(e),W())},children:[(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430"}),(0,i.jsx)("input",{className:"form-control",value:c.title,onChange:e=>u("title",e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u041f\u0456\u0434\u0433\u043e\u0442\u0443\u0432\u0430\u0442\u0438 \u043f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0456\u044e"})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442"}),(0,i.jsxs)("select",{className:"form-select",value:c.priority,onChange:e=>u("priority",e.target.value),children:[(0,i.jsx)("option",{value:"low",children:"\u041d\u0438\u0437\u044c\u043a\u0438\u0439"}),(0,i.jsx)("option",{value:"medium",children:"\u0421\u0435\u0440\u0435\u0434\u043d\u0456\u0439"}),(0,i.jsx)("option",{value:"high",children:"\u0412\u0438\u0441\u043e\u043a\u0438\u0439"})]})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0414\u0435\u0434\u043b\u0430\u0439\u043d"}),(0,i.jsx)("input",{type:"date",className:"form-control",value:c.dueDate,onChange:e=>u("dueDate",e.target.value)})]}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041e\u043f\u0438\u0441"}),(0,i.jsx)("textarea",{className:"form-control",rows:3,value:c.description,onChange:e=>u("description",e.target.value),placeholder:"\u041a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043e\u043f\u0438\u0441 \u0437\u0430\u0434\u0430\u0447\u0456"})]}),(0,i.jsxs)("div",{className:"col-12 d-flex justify-content-end gap-2",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:W,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]})]})})}),C&&(0,i.jsx)("div",{className:"modal-overlay",onClick:Q,children:(0,i.jsx)("div",{className:"task-modal card shadow-lg",onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h5",{className:"mb-0",children:"edit"===I?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u043e\u0448\u043a\u0443":"\u041d\u043e\u0432\u0430 \u0434\u043e\u0448\u043a\u0430"}),(0,i.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Q,children:(0,i.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,i.jsxs)("form",{className:"row g-3",onSubmit:X,children:[(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430 \u0434\u043e\u0448\u043a\u0438"}),(0,i.jsx)("input",{className:"form-control",value:D.name,onChange:e=>R(t=>d(d({},t),{},{name:e.target.value}))})]}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u0406\u043a\u043e\u043d\u043a\u0430"}),(0,i.jsx)("div",{className:"tracker-icon-grid",children:k.map(e=>(0,i.jsx)("button",{type:"button",className:"tracker-icon-option ".concat(D.icon===e?"active":""),onClick:()=>R(t=>d(d({},t),{},{icon:e})),children:(0,i.jsx)("i",{className:"bi ".concat(e)})},e))})]}),(0,i.jsxs)("div",{className:"col-12",children:[(0,i.jsx)("label",{className:"form-label",children:"\u041a\u043e\u043b\u0456\u0440 \u0434\u043e\u0448\u043a\u0438"}),(0,i.jsx)("div",{className:"tracker-color-grid",children:N.map(e=>(0,i.jsx)("button",{type:"button",className:"tracker-color-option ".concat(D.colorId===e.id?"active":""),style:{background:e.soft,borderColor:e.accent},onClick:()=>R(t=>d(d({},t),{},{colorId:e.id})),children:(0,i.jsx)("span",{style:{background:e.accent}})},e.id))})]}),(0,i.jsxs)("div",{className:"col-12 d-flex justify-content-end gap-2",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:Q,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"edit"===I?"\u041e\u043d\u043e\u0432\u0438\u0442\u0438":"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]})]})})})]})}const pe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new ve;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(e){return function(e){const t=pe(e);return ge.encodeByteArray(t,!0)}(e).replace(/\./g,"")},be=function(e){try{return ge.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function we(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const xe=()=>{try{return we().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/my-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDnzOKxBx-iL72sHkdk6kniU6YXDyNnhUk",REACT_APP_FIREBASE_APP_ID:"1:954917805897:web:e58cacfd8a6372b0050498",REACT_APP_FIREBASE_AUTH_DOMAIN:"appp-1c3f4.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"954917805897",REACT_APP_FIREBASE_PROJECT_ID:"appp-1c3f4",REACT_APP_FIREBASE_STORAGE_BUCKET:"appp-1c3f4.firebasestorage.app",REACT_APP_OWNER_EMAIL:"lesha.goloborodko392@gmail.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&be(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ke=e=>{var t,n;return null===(n=null===(t=xe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ne=()=>{var e;return null===(e=xe())||void 0===e?void 0:e.config},Se=e=>{var t;return null===(t=xe())||void 0===t?void 0:t["_".concat(e)]};class Ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function _e(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Ce(e){return(await fetch(e,{credentials:"include"})).ok}const Te={};let Ie=!1;function je(e,t){if("undefined"===typeof window||"undefined"===typeof document||!_e(window.location.host)||Te[e]===t||Te[e]||Ie)return;function n(e){return"__firebase__banner__".concat(e)}Te[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Te))Te[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Ie=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function Ae(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Pe(){var e;const t=null===(e=xe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function De(){return!Pe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Oe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(Me,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new Oe(n,i,t)}}const Me=/\{\$([^}]+)}/g;function Fe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Ue(n)&&Ue(i)){if(!Fe(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ue(e){return null!==e&&"object"===typeof e}function Ve(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ze(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Be(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class qe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=He),void 0===r.error&&(r.error=He),void 0===r.complete&&(r.complete=He);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function He(){}function We(e){return e&&e._delegate?e._delegate:e}class Ke{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ge="[DEFAULT]";class Qe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ee;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ge})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Ge?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.component?this.component.multipleInstances?e:Ge:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Qe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Je=[];var Ye;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ye||(Ye={}));const $e={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},Ze=Ye.INFO,et={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},tt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=et[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class nt{constructor(e){this.name=e,this._logLevel=Ze,this._logHandler=tt,this._userLogHandler=null,Je.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?$e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...t),this._logHandler(this,Ye.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...t),this._logHandler(this,Ye.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...t),this._logHandler(this,Ye.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...t),this._logHandler(this,Ye.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...t),this._logHandler(this,Ye.ERROR,...t)}}let rt,st;const it=new WeakMap,at=new WeakMap,ot=new WeakMap,lt=new WeakMap,ct=new WeakMap;let ut={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return at.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ot.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ft(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function dt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(mt(this),n),ft(it.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ft(e.apply(mt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(mt(this),t,...r);return ot.set(i,t.sort?t.sort():[t]),ft(i)}}function ht(e){return"function"===typeof e?dt(e):(e instanceof IDBTransaction&&function(e){if(at.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});at.set(e,t)}(e),t=e,(rt||(rt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ut):e);var t}function ft(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ft(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&it.set(t,e)}).catch(()=>{}),ct.set(t,e),t}(e);if(lt.has(e))return lt.get(e);const t=ht(e);return t!==e&&(lt.set(e,t),ct.set(t,e)),t}const mt=e=>ct.get(e);const pt=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],vt=new Map;function yt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(vt.get(t))return vt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=gt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!pt.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return vt.set(t,i),i}ut=(e=>d(d({},e),{},{get:(t,n,r)=>yt(t,n)||e.get(t,n,r),has:(t,n)=>!!yt(t,n)||e.has(t,n)}))(ut);class bt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const wt="@firebase/app",xt="0.13.2",kt=new nt("@firebase/app"),Nt="@firebase/app-compat",St="@firebase/analytics-compat",Et="@firebase/analytics",_t="@firebase/app-check-compat",Ct="@firebase/app-check",Tt="@firebase/auth",It="@firebase/auth-compat",jt="@firebase/database",At="@firebase/data-connect",Pt="@firebase/database-compat",Dt="@firebase/functions",Rt="@firebase/functions-compat",Ot="@firebase/installations",Lt="@firebase/installations-compat",Mt="@firebase/messaging",Ft="@firebase/messaging-compat",Ut="@firebase/performance",Vt="@firebase/performance-compat",zt="@firebase/remote-config",Bt="@firebase/remote-config-compat",qt="@firebase/storage",Ht="@firebase/storage-compat",Wt="@firebase/firestore",Kt="@firebase/ai",Gt="@firebase/firestore-compat",Qt="firebase",Xt="[DEFAULT]",Jt={[wt]:"fire-core",[Nt]:"fire-core-compat",[Et]:"fire-analytics",[St]:"fire-analytics-compat",[Ct]:"fire-app-check",[_t]:"fire-app-check-compat",[Tt]:"fire-auth",[It]:"fire-auth-compat",[jt]:"fire-rtdb",[At]:"fire-data-connect",[Pt]:"fire-rtdb-compat",[Dt]:"fire-fn",[Rt]:"fire-fn-compat",[Ot]:"fire-iid",[Lt]:"fire-iid-compat",[Mt]:"fire-fcm",[Ft]:"fire-fcm-compat",[Ut]:"fire-perf",[Vt]:"fire-perf-compat",[zt]:"fire-rc",[Bt]:"fire-rc-compat",[qt]:"fire-gcs",[Ht]:"fire-gcs-compat",[Wt]:"fire-fst",[Gt]:"fire-fst-compat",[Kt]:"fire-vertex","fire-js":"fire-js",[Qt]:"fire-js-all"},Yt=new Map,$t=new Map,Zt=new Map;function en(e,t){try{e.container.addComponent(t)}catch(n){kt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function tn(e){const t=e.name;if(Zt.has(t))return kt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Zt.set(t,e);for(const n of Yt.values())en(n,e);for(const n of $t.values())en(n,e);return!0}function nn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const sn=new Le("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class an{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ke("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}const on="11.10.0";function ln(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Xt,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw sn.create("bad-app-name",{appName:String(s)});if(n||(n=Ne()),!n)throw sn.create("no-options");const i=Yt.get(s);if(i){if(Fe(n,i.options)&&Fe(r,i.config))return i;throw sn.create("duplicate-app",{appName:s})}const a=new Xe(s);for(const l of Zt.values())a.addComponent(l);const o=new an(n,r,a);return Yt.set(s,o),o}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;const t=Yt.get(e);if(!t&&e===Xt&&Ne())return ln();if(!t)throw sn.create("no-app",{appName:e});return t}function un(e,t,n){var r;let s=null!==(r=Jt[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void kt.warn(e.join(" "))}tn(new Ke("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const dn="firebase-heartbeat-store";let hn=null;function fn(){return hn||(hn=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ft(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ft(a.result),e.oldVersion,e.newVersion,ft(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(dn)}catch(n){console.warn(n)}}}).catch(e=>{throw sn.create("idb-open",{originalErrorMessage:e.message})})),hn}async function mn(e,t){try{const n=(await fn()).transaction(dn,"readwrite"),r=n.objectStore(dn);await r.put(t,pn(e)),await n.done}catch(n){if(n instanceof Oe)kt.warn(n.message);else{const e=sn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});kt.warn(e.message)}}}function pn(e){return"".concat(e.name,"!").concat(e.options.appId)}class gn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){kt.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=vn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),bn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=ye(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return kt.warn(t),""}}}function vn(){return(new Date).toISOString().substring(0,10)}class yn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Re()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await fn()).transaction(dn),n=await t.objectStore(dn).get(pn(e));return await t.done,n}catch(t){if(t instanceof Oe)kt.warn(t.message);else{const e=sn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});kt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return mn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return mn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function bn(e){return ye(JSON.stringify({version:2,heartbeats:e})).length}var wn;wn="",tn(new Ke("platform-logger",e=>new bt(e),"PRIVATE")),tn(new Ke("heartbeat",e=>new gn(e),"PRIVATE")),un(wt,xt,wn),un(wt,xt,"esm2017"),un("fire-js","");var xn,kn,Nn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Sn={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var s=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function v(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,m(n,2*s+2*i),n[2*s+2*i+1]+=l*g,m(n,2*s+2*i+1),n[2*s+2*i+1]+=f*p,m(n,2*s+2*i+1),n[2*s+2*i+2]+=l*p,m(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,kn=Sn.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},xn=Sn.Integer=r}).apply("undefined"!==typeof Nn?Nn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var En,_n,Cn,Tn,In,jn,An,Pn,Dn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Rn={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Dn&&Dn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function N(e){s.setTimeout(()=>{throw e},0)}function S(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _,e=>e.reset());class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){N(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function P(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function X(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)X(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function Y(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;x(t=new D(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function be(){D.call(this,"c")}d(ye,D),d(be,D);var we={},xe=null;function ke(){return xe=xe||new ne}function Ne(e){D.call(this,we.La,e)}function Se(e){const t=ke();re(t,new Ne(t))}function Ee(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=ke();re(t,new Ee(t,e))}function Ce(e,t){D.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Ne,D),we.STAT_EVENT="statevent",d(Ee,D),we.Ma="timingevent",d(Ce,D),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Re,me),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=K(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Jt(n)}rn(n),_e(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),qe(o)),r.g=a}else nn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Xt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||Se(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var i=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ge(this),Ke(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,_e(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=k(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ge(this),Ke(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),_e(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Nt(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var pt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Nt(e,t){kt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return kt(e),t=_t(e,t),e.g.has(t)}function Et(e,t,n){Nt(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){kt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,St(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(jt,me),jt.prototype.g=function(){return new At(this.l,this.j)},jt.prototype.i=(pt={},function(){return pt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Wt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Ht(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xt(e){if(Yt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}dn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Jt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function $t(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||j(),T||(C(),T=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{It(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||j(),T||(C(),T=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=ke(),new Ce(r,n)),$t(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),dn(e),Yt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new jt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function mn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ot(i)))+"&"+t:this.m&&Lt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ue(s,n,null)):Ue(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Jt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Xt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&$t(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,mn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Pn=Rn.createWebChannelTransport=function(){return new pn},An=Rn.getStatEventTarget=function(){return ke()},jn=Rn.Event=we,In=Rn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,Tn=Rn.ErrorCode=Pe,De.COMPLETE="complete",Cn=Rn.EventType=De,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,_n=Rn.WebChannel=ge,Rn.FetchXmlHttpFactory=jt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,En=Rn.XhrIo=Mt}).apply("undefined"!==typeof Dn?Dn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const On="@firebase/firestore",Ln="4.8.0";class Mn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let Fn="11.10.0";const Un=new nt("@firebase/firestore");function Vn(){return Un.logLevel}function zn(e){if(Un.logLevel<=Ye.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Hn);Un.debug("Firestore (".concat(Fn,"): ").concat(e),...s)}}function Bn(e){if(Un.logLevel<=Ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Hn);Un.error("Firestore (".concat(Fn,"): ").concat(e),...s)}}function qn(e){if(Un.logLevel<=Ye.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Hn);Un.warn("Firestore (".concat(Fn,"): ").concat(e),...s)}}function Hn(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Wn(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Kn(e,r,n)}function Kn(e,t,n){let r="FIRESTORE (".concat(Fn,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Bn(r),new Error(r)}function Gn(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Kn(t,s,r)}function Qn(e,t){return e}const Xn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jn extends Oe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Yn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $n{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Zn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mn.UNAUTHENTICATED))}shutdown(){}}class er{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tr{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Gn(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yn,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{zn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(zn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yn)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Gn("string"==typeof t.accessToken,31837,{l:t}),new $n(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gn(null===e||"string"==typeof e,2055,{h:e}),new Mn(e)}}class nr{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rr{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new nr(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ir{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Gn(void 0===this.o,3512);const n=e=>{null!=e.error&&zn("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,zn("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):zn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sr(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Gn("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new sr(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ar(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function or(){return new TextEncoder}class lr{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ar(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function cr(e,t){return e<t?-1:e>t?1:0}function ur(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return cr(r,s);{const i=or(),a=hr(i.encode(dr(e,n)),i.encode(dr(t,n)));return 0!==a?a:cr(r,s)}}n+=r>65535?2:1}return cr(e.length,t.length)}function dr(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function hr(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return cr(e[n],t[n]);return cr(e.length,t.length)}function fr(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const mr="__name__";class pr{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wn(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Wn(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===pr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=pr.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return cr(e.length,t.length)}static compareSegments(e,t){const n=pr.isNumericId(e),r=pr.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?pr.extractNumericId(e).compare(pr.extractNumericId(t)):ur(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xn.fromString(e.substring(4,e.length-2))}}class gr extends pr{construct(e,t,n){return new gr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Jn(Xn.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new gr(e)}static emptyPath(){return new gr([])}}const vr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends pr{construct(e,t,n){return new yr(e,t,n)}static isValidIdentifier(e){return vr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===mr}static keyField(){return new yr([mr])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Jn(Xn.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Jn(Xn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Jn(Xn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Jn(Xn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class br{constructor(e){this.path=e}static fromPath(e){return new br(gr.fromString(e))}static fromName(e){return new br(gr.fromString(e).popFirst(5))}static empty(){return new br(gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new br(new gr(e.slice()))}}function wr(e,t,n){if(!n)throw new Jn(Xn.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function xr(e){if(!br.isDocumentKey(e))throw new Jn(Xn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function kr(e){if(br.isDocumentKey(e))throw new Jn(Xn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Nr(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Sr(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Wn(12329,{type:typeof e})}function Er(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Jn(Xn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sr(e);throw new Jn(Xn.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function _r(e,t){const n={typeString:e};return t&&(n.value=t),n}function Cr(e,t){if(!Nr(e))throw new Jn(Xn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new Jn(Xn.INVALID_ARGUMENT,n);return!0}const Tr=-62135596800,Ir=1e6;class jr{static now(){return jr.fromMillis(Date.now())}static fromDate(e){return jr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ir);return new jr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jn(Xn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jn(Xn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tr)throw new Jn(Xn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jn(Xn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ir}_compareTo(e){return this.seconds===e.seconds?cr(this.nanoseconds,e.nanoseconds):cr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cr(e,jr._jsonSchema))return new jr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tr;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jr._jsonSchemaVersion="firestore/timestamp/1.0",jr._jsonSchema={type:_r("string",jr._jsonSchemaVersion),seconds:_r("number"),nanoseconds:_r("number")};class Ar{static fromTimestamp(e){return new Ar(e)}static min(){return new Ar(new jr(0,0))}static max(){return new Ar(new jr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Pr=-1;class Dr{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Dr.UNKNOWN_ID=-1;function Rr(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Ar.fromTimestamp(1e9===r?new jr(n+1,0):new jr(n,r));return new Lr(s,br.empty(),t)}function Or(e){return new Lr(e.readTime,e.key,Pr)}class Lr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Lr(Ar.min(),br.empty(),Pr)}static max(){return new Lr(Ar.max(),br.empty(),Pr)}}function Mr(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=br.comparator(e.documentKey,t.documentKey),0!==n?n:cr(e.largestBatchId,t.largestBatchId))}const Fr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ur{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Vr(e){if(e.code!==Xn.FAILED_PRECONDITION||e.message!==Fr)throw e;zn("LocalStore","Unexpectedly lost primary lease")}class zr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new zr((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof zr?t:zr.resolve(t)}catch(e){return zr.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):zr.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):zr.reject(t)}static resolve(e){return new zr((t,n)=>{t(e)})}static reject(e){return new zr((t,n)=>{n(e)})}static waitFor(e){return new zr((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=zr.resolve(!1);for(const n of e)t=t.next(e=>e?zr.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new zr((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new zr((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Br(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qr(e){return"IndexedDbTransactionError"===e.name}class Hr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Hr.ue=-1;const Wr=-1;function Kr(e){return null==e}function Gr(e){return 0===e&&1/e==-1/0}function Qr(e){return"number"==typeof e&&Number.isInteger(e)&&!Gr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Xr="\x01";function Jr(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=$r(t)),t=Yr(e.get(n),t);return $r(t)}function Yr(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Xr:n+="\x01\x11";break;default:n+=t}}return n}function $r(e){return e+Xr+"\x01"}const Zr="remoteDocuments",es="owner",ts="mutationQueues",ns="mutations";const rs="documentMutations",ss="remoteDocumentsV14",is="remoteDocumentGlobal",as="targets",os="targetDocuments",ls="targetGlobal",cs="collectionParents",us="clientMetadata",ds="bundles",hs="namedQueries",fs="indexConfiguration",ms="indexState",ps="indexEntries",gs="documentOverlays",vs="globals",ys=[ts,ns,rs,Zr,as,es,ls,os,us,is,cs,ds,hs],bs=[ts,ns,rs,ss,as,es,ls,os,us,is,cs,ds,hs,gs],ws=bs,xs=[...ws,fs,ms,ps];function ks(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ns(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ss(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Es{constructor(e,t){this.comparator=e,this.root=t||Cs.EMPTY}insert(e,t){return new Es(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cs.BLACK,null,null))}remove(e){return new Es(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _s(this.root,e,this.comparator,!1)}getReverseIterator(){return new _s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _s(this.root,e,this.comparator,!0)}}class _s{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cs{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Cs.RED,this.left=null!=r?r:Cs.EMPTY,this.right=null!=s?s:Cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Cs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Cs.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Wn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Wn(27949);return e+(this.isRed()?0:1)}}Cs.EMPTY=null,Cs.RED=!0,Cs.BLACK=!1,Cs.EMPTY=new class{constructor(){this.size=0}get key(){throw Wn(57766)}get value(){throw Wn(16141)}get color(){throw Wn(16727)}get left(){throw Wn(29726)}get right(){throw Wn(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Cs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ts{constructor(e){this.comparator=e,this.data=new Es(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Is(this.data.getIterator())}getIteratorFrom(e){return new Is(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ts))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ts(this.comparator);return t.data=e,t}}class Is{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class js{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new js([])}unionWith(e){let t=new Ts(yr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new js(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fr(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class As extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ps{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new As("Invalid base64 string: "+e):e}}(e);return new Ps(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ps(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ps.EMPTY_BYTE_STRING=new Ps("");const Ds=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(e){if(Gn(!!e,39018),"string"==typeof e){let t=0;const n=Ds.exec(e);if(Gn(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Os(e.seconds),nanos:Os(e.nanos)}}function Os(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ls(e){return"string"==typeof e?Ps.fromBase64String(e):Ps.fromUint8Array(e)}const Ms="server_timestamp",Fs="__type__",Us="__previous_value__",Vs="__local_write_time__";function zs(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Fs])||void 0===n?void 0:n.stringValue)===Ms}function Bs(e){const t=e.mapValue.fields[Us];return zs(t)?Bs(t):t}function qs(e){const t=Rs(e.mapValue.fields[Vs].timestampValue);return new jr(t.seconds,t.nanos)}class Hs{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ws="(default)";class Ks{constructor(e,t){this.projectId=e,this.database=t||Ws}static empty(){return new Ks("","")}get isDefaultDatabase(){return this.database===Ws}isEqual(e){return e instanceof Ks&&e.projectId===this.projectId&&e.database===this.database}}const Gs="__type__",Qs="__max__",Xs={mapValue:{fields:{__type__:{stringValue:Qs}}}},Js="__vector__",Ys="value";function $s(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zs(e)?4:mi(e)?9007199254740991:hi(e)?10:11:Wn(28295,{value:e})}function Zs(e,t){if(e===t)return!0;const n=$s(e);if(n!==$s(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qs(e).isEqual(qs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Rs(e.timestampValue),r=Rs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ls(e.bytesValue).isEqual(Ls(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Os(e.geoPointValue.latitude)===Os(t.geoPointValue.latitude)&&Os(e.geoPointValue.longitude)===Os(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Os(e.integerValue)===Os(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Os(e.doubleValue),r=Os(t.doubleValue);return n===r?Gr(n)===Gr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fr(e.arrayValue.values||[],t.arrayValue.values||[],Zs);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ks(n)!==ks(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Zs(n[s],r[s])))return!1;return!0}(e,t);default:return Wn(52216,{left:e})}}function ei(e,t){return void 0!==(e.values||[]).find(e=>Zs(e,t))}function ti(e,t){if(e===t)return 0;const n=$s(e),r=$s(t);if(n!==r)return cr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Os(e.integerValue||e.doubleValue),r=Os(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ni(e.timestampValue,t.timestampValue);case 4:return ni(qs(e),qs(t));case 5:return ur(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ls(e),r=Ls(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=cr(n[s],r[s]);if(0!==e)return e}return cr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=cr(Os(e.latitude),Os(t.latitude));return 0!==n?n:cr(Os(e.longitude),Os(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ri(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ys])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Ys])||void 0===r?void 0:r.arrayValue,u=cr((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:ri(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Xs.mapValue&&t===Xs.mapValue)return 0;if(e===Xs.mapValue)return 1;if(t===Xs.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=ur(r[a],i[a]);if(0!==e)return e;const t=ti(n[r[a]],s[i[a]]);if(0!==t)return t}return cr(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Wn(23264,{le:n})}}function ni(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return cr(e,t);const n=Rs(e),r=Rs(t),s=cr(n.seconds,r.seconds);return 0!==s?s:cr(n.nanos,r.nanos)}function ri(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=ti(n[s],r[s]);if(e)return e}return cr(n.length,r.length)}function si(e){return ii(e)}function ii(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Rs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ls(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return br.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ii(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(ii(e.fields[s]));return n+"}"}(e.mapValue):Wn(61005,{value:e})}function ai(e){switch($s(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Bs(e);return t?16+ai(t):16;case 5:return 2*e.stringValue.length;case 6:return Ls(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ai(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ns(e.fields,(e,n)=>{t+=e.length+ai(n)}),t}(e.mapValue);default:throw Wn(13486,{value:e})}}function oi(e){return!!e&&"integerValue"in e}function li(e){return!!e&&"arrayValue"in e}function ci(e){return!!e&&"nullValue"in e}function ui(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function di(e){return!!e&&"mapValue"in e}function hi(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Gs])||void 0===n?void 0:n.stringValue)===Js}function fi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ns(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=fi(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fi(e.arrayValue.values[n]);return t}return Object.assign({},e)}function mi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Qs}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!di(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fi(t)}setAll(e){let t=yr.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=fi(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());di(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];di(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ns(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new pi(fi(this.value))}}function gi(e){const t=[];return Ns(e.fields,(e,n)=>{const r=new yr([e]);if(di(n)){const e=gi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new js(t)}class vi{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new vi(e,0,Ar.min(),Ar.min(),Ar.min(),pi.empty(),0)}static newFoundDocument(e,t,n,r){return new vi(e,1,t,Ar.min(),n,r,0)}static newNoDocument(e,t){return new vi(e,2,t,Ar.min(),Ar.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new vi(e,3,t,Ar.min(),Ar.min(),pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ar.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ar.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class yi{constructor(e,t){this.position=e,this.inclusive=t}}function bi(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?br.comparator(br.fromName(a.referenceValue),n.key):ti(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function wi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zs(e.position[n],t.position[n]))return!1;return!0}class xi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ki(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ni{}class Si extends Ni{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Pi(e,t,n):"array-contains"===t?new Li(e,n):"in"===t?new Mi(e,n):"not-in"===t?new Fi(e,n):"array-contains-any"===t?new Ui(e,n):new Si(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Di(e,n):new Ri(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ti(t,this.value)):null!==t&&$s(this.value)===$s(t)&&this.matchesComparison(ti(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends Ni{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ei(e,t)}matches(e){return _i(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function _i(e){return"and"===e.op}function Ci(e){return Ti(e)&&_i(e)}function Ti(e){for(const t of e.filters)if(t instanceof Ei)return!1;return!0}function Ii(e){if(e instanceof Si)return e.field.canonicalString()+e.op.toString()+si(e.value);if(Ci(e))return e.filters.map(e=>Ii(e)).join(",");{const t=e.filters.map(e=>Ii(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function ji(e,t){return e instanceof Si?function(e,t){return t instanceof Si&&e.op===t.op&&e.field.isEqual(t.field)&&Zs(e.value,t.value)}(e,t):e instanceof Ei?function(e,t){return t instanceof Ei&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ji(n,t.filters[r]),!0)}(e,t):void Wn(19439)}function Ai(e){return e instanceof Si?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(si(e.value))}(e):e instanceof Ei?function(e){return e.op.toString()+" {"+e.getFilters().map(Ai).join(" ,")+"}"}(e):"Filter"}class Pi extends Si{constructor(e,t,n){super(e,t,n),this.key=br.fromName(n.referenceValue)}matches(e){const t=br.comparator(e.key,this.key);return this.matchesComparison(t)}}class Di extends Si{constructor(e,t){super(e,"in",t),this.keys=Oi("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ri extends Si{constructor(e,t){super(e,"not-in",t),this.keys=Oi("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Oi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>br.fromName(e.referenceValue))}class Li extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return li(t)&&ei(t.arrayValue,this.value)}}class Mi extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ei(this.value.arrayValue,t)}}class Fi extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(ei(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ei(this.value.arrayValue,t)}}class Ui extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!li(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ei(this.value.arrayValue,e))}}class Vi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Pe=null}}function zi(e){return new Vi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bi(e){const t=Qn(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ii(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Kr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>si(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>si(e)).join(",")),t.Pe=e}return t.Pe}function qi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ki(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ji(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wi(e.startAt,t.startAt)&&wi(e.endAt,t.endAt)}function Hi(e){return br.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Wi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ki(e,t,n,r,s,i,a,o){return new Wi(e,t,n,r,s,i,a,o)}function Gi(e){return new Wi(e)}function Qi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Xi(e){return null!==e.collectionGroup}function Ji(e){const t=Qn(e);if(null===t.Te){t.Te=[];const e=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ts(yr.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new xi(r,n))}),e.has(yr.keyField().canonicalString())||t.Te.push(new xi(yr.keyField(),n))}return t.Te}function Yi(e){const t=Qn(e);return t.Ie||(t.Ie=$i(t,Ji(e))),t.Ie}function $i(e,t){if("F"===e.limitType)return zi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new xi(e.field,t)});const n=e.endAt?new yi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new yi(e.startAt.position,e.startAt.inclusive):null;return zi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Zi(e,t,n){return new Wi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ea(e,t){return qi(Yi(e),Yi(t))&&e.limitType===t.limitType}function ta(e){return"".concat(Bi(Yi(e)),"|lt:").concat(e.limitType)}function na(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Ai(e)).join(", "),"]")),Kr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>si(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>si(e)).join(",")),"Target(".concat(t,")")}(Yi(e)),"; limitType=").concat(e.limitType,")")}function ra(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):br.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ji(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=bi(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ji(e),t))&&!(e.endAt&&!function(e,t,n){const r=bi(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ji(e),t))}(e,t)}function sa(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ia(e){return(t,n)=>{let r=!1;for(const s of Ji(e)){const e=aa(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function aa(e,t,n){const r=e.field.isKeyField()?br.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ti(r,s):Wn(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wn(19790,{direction:e.dir})}}class oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ss(this.inner)}size(){return this.innerSize}}const la=new Es(br.comparator);function ca(){return la}const ua=new Es(br.comparator);function da(){let e=ua;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function ha(e){let t=ua;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function fa(){return pa()}function ma(){return pa()}function pa(){return new oa(e=>e.toString(),(e,t)=>e.isEqual(t))}const ga=new Es(br.comparator),va=new Ts(br.comparator);function ya(){let e=va;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const ba=new Ts(cr);function wa(){return ba}function xa(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gr(t)?"-0":t}}function ka(e){return{integerValue:""+e}}function Na(e,t){return Qr(t)?ka(t):xa(e,t)}class Sa{constructor(){this._=void 0}}function Ea(e,t,n){return e instanceof Ta?function(e,t){const n={fields:{[Fs]:{stringValue:Ms},[Vs]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zs(t)&&(t=Bs(t)),t&&(n.fields[Us]=t),{mapValue:n}}(n,t):e instanceof Ia?ja(e,t):e instanceof Aa?Pa(e,t):function(e,t){const n=Ca(e,t),r=Ra(n)+Ra(e.Ee);return oi(n)&&oi(e.Ee)?ka(r):xa(e.serializer,r)}(e,t)}function _a(e,t,n){return e instanceof Ia?ja(e,t):e instanceof Aa?Pa(e,t):n}function Ca(e,t){return e instanceof Da?function(e){return oi(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ta extends Sa{}class Ia extends Sa{constructor(e){super(),this.elements=e}}function ja(e,t){const n=Oa(t);for(const r of e.elements)n.some(e=>Zs(e,r))||n.push(r);return{arrayValue:{values:n}}}class Aa extends Sa{constructor(e){super(),this.elements=e}}function Pa(e,t){let n=Oa(t);for(const r of e.elements)n=n.filter(e=>!Zs(e,r));return{arrayValue:{values:n}}}class Da extends Sa{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Ra(e){return Os(e.integerValue||e.doubleValue)}function Oa(e){return li(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class La{constructor(e,t){this.version=e,this.transformResults=t}}class Ma{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ma}static exists(e){return new Ma(void 0,e)}static updateTime(e){return new Ma(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fa(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ua{}function Va(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ja(e.key,Ma.none()):new Wa(e.key,e.data,Ma.none());{const n=e.data,r=pi.empty();let s=new Ts(yr.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Ka(e.key,r,new js(s.toArray()),Ma.none())}}function za(e,t,n){e instanceof Wa?function(e,t,n){const r=e.value.clone(),s=Qa(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ka?function(e,t,n){if(!Fa(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Qa(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Ga(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ba(e,t,n,r){return e instanceof Wa?function(e,t,n,r){if(!Fa(e.precondition,t))return n;const s=e.value.clone(),i=Xa(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ka?function(e,t,n,r){if(!Fa(e.precondition,t))return n;const s=Xa(e.fieldTransforms,r,t),i=t.data;return i.setAll(Ga(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Fa(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qa(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Ca(r.transform,e||null);null!=s&&(null===n&&(n=pi.empty()),n.set(r.field,s))}return n||null}function Ha(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fr(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ia&&t instanceof Ia||e instanceof Aa&&t instanceof Aa?fr(e.elements,t.elements,Zs):e instanceof Da&&t instanceof Da?Zs(e.Ee,t.Ee):e instanceof Ta&&t instanceof Ta}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Wa extends Ua{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ka extends Ua{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ga(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Qa(e,t,n){const r=new Map;Gn(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,_a(a,o,n[s]))}return r}function Xa(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Ea(e,i,t))}return r}class Ja extends Ua{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ya extends Ua{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $a{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&za(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ba(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ba(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ma();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Va(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Ar.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ya())}isEqual(e){return this.batchId===e.batchId&&fr(this.mutations,e.mutations,(e,t)=>Ha(e,t))&&fr(this.baseMutations,e.baseMutations,(e,t)=>Ha(e,t))}}class Za{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Gn(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=ga;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Za(e,t,n,r)}}class eo{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class to{constructor(e,t){this.count=e,this.unchangedNames=t}}var no,ro;function so(e){switch(e){case Xn.OK:return Wn(64938);case Xn.CANCELLED:case Xn.UNKNOWN:case Xn.DEADLINE_EXCEEDED:case Xn.RESOURCE_EXHAUSTED:case Xn.INTERNAL:case Xn.UNAVAILABLE:case Xn.UNAUTHENTICATED:return!1;case Xn.INVALID_ARGUMENT:case Xn.NOT_FOUND:case Xn.ALREADY_EXISTS:case Xn.PERMISSION_DENIED:case Xn.FAILED_PRECONDITION:case Xn.ABORTED:case Xn.OUT_OF_RANGE:case Xn.UNIMPLEMENTED:case Xn.DATA_LOSS:return!0;default:return Wn(15467,{code:e})}}function io(e){if(void 0===e)return Bn("GRPC error has no .code"),Xn.UNKNOWN;switch(e){case no.OK:return Xn.OK;case no.CANCELLED:return Xn.CANCELLED;case no.UNKNOWN:return Xn.UNKNOWN;case no.DEADLINE_EXCEEDED:return Xn.DEADLINE_EXCEEDED;case no.RESOURCE_EXHAUSTED:return Xn.RESOURCE_EXHAUSTED;case no.INTERNAL:return Xn.INTERNAL;case no.UNAVAILABLE:return Xn.UNAVAILABLE;case no.UNAUTHENTICATED:return Xn.UNAUTHENTICATED;case no.INVALID_ARGUMENT:return Xn.INVALID_ARGUMENT;case no.NOT_FOUND:return Xn.NOT_FOUND;case no.ALREADY_EXISTS:return Xn.ALREADY_EXISTS;case no.PERMISSION_DENIED:return Xn.PERMISSION_DENIED;case no.FAILED_PRECONDITION:return Xn.FAILED_PRECONDITION;case no.ABORTED:return Xn.ABORTED;case no.OUT_OF_RANGE:return Xn.OUT_OF_RANGE;case no.UNIMPLEMENTED:return Xn.UNIMPLEMENTED;case no.DATA_LOSS:return Xn.DATA_LOSS;default:return Wn(39323,{code:e})}}(ro=no||(no={}))[ro.OK=0]="OK",ro[ro.CANCELLED=1]="CANCELLED",ro[ro.UNKNOWN=2]="UNKNOWN",ro[ro.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ro[ro.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ro[ro.NOT_FOUND=5]="NOT_FOUND",ro[ro.ALREADY_EXISTS=6]="ALREADY_EXISTS",ro[ro.PERMISSION_DENIED=7]="PERMISSION_DENIED",ro[ro.UNAUTHENTICATED=16]="UNAUTHENTICATED",ro[ro.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ro[ro.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ro[ro.ABORTED=10]="ABORTED",ro[ro.OUT_OF_RANGE=11]="OUT_OF_RANGE",ro[ro.UNIMPLEMENTED=12]="UNIMPLEMENTED",ro[ro.INTERNAL=13]="INTERNAL",ro[ro.UNAVAILABLE=14]="UNAVAILABLE",ro[ro.DATA_LOSS=15]="DATA_LOSS";let ao=null;const oo=new xn([4294967295,4294967295],0);function lo(e){const t=or().encode(e),n=new kn;return n.update(t),new Uint8Array(n.digest())}function co(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new xn([n,r],0),new xn([s,i],0)]}class uo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ho("Invalid padding: ".concat(t));if(n<0)throw new ho("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ho("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ho("Invalid padding when bitmap length is 0: ".concat(t));this.fe=8*e.length-t,this.ge=xn.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(xn.fromNumber(n)));return 1===r.compare(oo)&&(r=new xn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=lo(e),[n,r]=co(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new uo(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.fe)return;const t=lo(e),[n,r]=co(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fo{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,mo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new fo(Ar.min(),r,new Es(cr),ca(),ya())}}class mo{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new mo(n,t,ya(),ya(),ya())}}class po{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class go{constructor(e,t){this.targetId=e,this.De=t}}class vo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ps.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yo{constructor(){this.ve=0,this.Ce=xo(),this.Fe=Ps.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ya(),t=ya(),n=ya();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wn(38017,{changeType:s})}}),new mo(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=xo()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Gn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bo{constructor(e){this.We=e,this.Ge=new Map,this.ze=ca(),this.je=wo(),this.Je=wo(),this.He=new Es(cr)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:Wn(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const s=r.target;if(Hi(s))if(0===n){const e=new br(s.path);this.Xe(t,e,vi.newNoDocument(e,Ar.min()))}else Gn(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),s=n?this.ut(n,e,r):1;if(0!==s){this.rt(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==ao||ao.ct(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.De,this.We.lt(),n,s))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Ls(n).toUint8Array()}catch(e){if(e instanceof As)return qn("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new uo(i,r,s)}catch(e){return qn(e instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.fe?null:a}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.We.lt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const s=this.st(r);if(s){if(n.current&&Hi(s.target)){const t=new br(s.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,vi.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=ya();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new fo(e,t,this.He,this.ze,n);return this.ze=ca(),this.je=wo(),this.Je=wo(),this.He=new Es(cr),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new yo,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ts(cr),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ts(cr),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||zn("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new yo),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function wo(){return new Es(br.comparator)}function xo(){return new Es(br.comparator)}const ko={asc:"ASCENDING",desc:"DESCENDING"},No={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},So={and:"AND",or:"OR"};class Eo{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _o(e,t){return e.useProto3Json||Kr(t)?t:{value:t}}function Co(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function To(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Io(e,t){return Co(e,t.toTimestamp())}function jo(e){return Gn(!!e,49232),Ar.fromTimestamp(function(e){const t=Rs(e);return new jr(t.seconds,t.nanos)}(e))}function Ao(e,t){return Po(e,t).canonicalString()}function Po(e,t){const n=function(e){return new gr(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Do(e){const t=gr.fromString(e);return Gn(Zo(t),10190,{key:t.toString()}),t}function Ro(e,t){return Ao(e.databaseId,t.path)}function Oo(e,t){const n=Do(t);if(n.get(1)!==e.databaseId.projectId)throw new Jn(Xn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Jn(Xn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new br(Uo(n))}function Lo(e,t){return Ao(e.databaseId,t)}function Mo(e){const t=Do(e);return 4===t.length?gr.emptyPath():Uo(t)}function Fo(e){return new gr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uo(e){return Gn(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Vo(e,t,n){return{name:Ro(e,t),fields:n.value.mapValue.fields}}function zo(e,t){let n;if(t instanceof Wa)n={update:Vo(e,t.key,t.value)};else if(t instanceof Ja)n={delete:Ro(e,t.key)};else if(t instanceof Ka)n={update:Vo(e,t.key,t.data),updateMask:$o(t.fieldMask)};else{if(!(t instanceof Ya))return Wn(16599,{Rt:t.type});n={verify:Ro(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ta)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ia)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Aa)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Da)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw Wn(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Io(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wn(27497)}(e,t.precondition)),n}function Bo(e,t){return{documents:[Lo(e,t.path)]}}function qo(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lo(e,s);const i=function(e){if(0!==e.length)return Yo(Ei.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Xo(e.field),direction:Ko(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=_o(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:s}}function Ho(e){let t=Mo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Gn(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Wo(e);return t instanceof Ei&&Ci(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new xi(Jo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Kr(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new yi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new yi(n,t)}(n.endAt)),Ki(t,s,a,i,o,"F",l,c)}function Wo(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jo(e.unaryFilter.field);return Si.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Jo(e.unaryFilter.field);return Si.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Jo(e.unaryFilter.field);return Si.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Jo(e.unaryFilter.field);return Si.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Wn(61313);default:return Wn(60726)}}(e):void 0!==e.fieldFilter?function(e){return Si.create(Jo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Wn(58110);default:return Wn(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ei.create(e.compositeFilter.filters.map(e=>Wo(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wn(1026)}}(e.compositeFilter.op))}(e):Wn(30097,{filter:e})}function Ko(e){return ko[e]}function Go(e){return No[e]}function Qo(e){return So[e]}function Xo(e){return{fieldPath:e.canonicalString()}}function Jo(e){return yr.fromServerFormat(e.fieldPath)}function Yo(e){return e instanceof Si?function(e){if("=="===e.op){if(ui(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NAN"}};if(ci(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ui(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NOT_NAN"}};if(ci(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(e.field),op:Go(e.op),value:e.value}}}(e):e instanceof Ei?function(e){const t=e.getFilters().map(e=>Yo(e));return 1===t.length?t[0]:{compositeFilter:{op:Qo(e.op),filters:t}}}(e):Wn(54877,{filter:e})}function $o(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zo(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class el{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ar.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ar.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ps.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new el(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tl{constructor(e){this.gt=e}}function nl(e){const t=Ho({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zi(t,t.limit,"L"):t}class rl{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Os(e.integerValue));else if("doubleValue"in e){const n=Os(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Gr(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=Rs(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ls(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?mi(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):hi(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Wn(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const s=e.fields||{};this.Ct(t,53);const i=Ys,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(Os(a)),this.xt(i,t),this.Dt(s[i],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),br.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}rl.Ut=new rl;class sl{constructor(){this.Dn=new il}addToCollectionParentIndex(e,t){return this.Dn.add(t),zr.resolve()}getCollectionParents(e,t){return zr.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return zr.resolve()}deleteFieldIndex(e,t){return zr.resolve()}deleteAllFieldIndexes(e){return zr.resolve()}createTargetIndexes(e,t){return zr.resolve()}getDocumentsMatchingTarget(e,t){return zr.resolve(null)}getIndexType(e,t){return zr.resolve(0)}getFieldIndexes(e,t){return zr.resolve([])}getNextCollectionGroupToUpdate(e){return zr.resolve(null)}getMinOffset(e,t){return zr.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,t){return zr.resolve(Lr.min())}updateCollectionGroup(e,t,n){return zr.resolve()}updateIndexEntries(e,t){return zr.resolve()}}class il{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ts(gr.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ts(gr.comparator)).toArray()}}new Uint8Array(0);const al={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ol=41943040;class ll{static withCacheSize(e){return new ll(e,ll.DEFAULT_COLLECTION_PERCENTILE,ll.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}ll.DEFAULT_COLLECTION_PERCENTILE=10,ll.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ll.DEFAULT=new ll(ol,ll.DEFAULT_COLLECTION_PERCENTILE,ll.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ll.DISABLED=new ll(-1,0,0);class cl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new cl(0)}static ur(){return new cl(-1)}}const ul="LruGarbageCollector",dl=1048576;function hl(e,t){let[n,r]=e,[s,i]=t;const a=cr(n,s);return 0===a?cr(r,i):a}class fl{constructor(e){this.Tr=e,this.buffer=new Ts(hl),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();hl(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ml{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){zn(ul,"Garbage collection scheduled in ".concat(e,"ms")),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){qr(e)?zn(ul,"Ignoring IndexedDB error during garbage collection: ",e):await Vr(e)}await this.Rr(3e5)})}}class pl{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return zr.resolve(Hr.ue);const n=new fl(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(zn("LruGarbageCollector","Garbage collection skipped; disabled"),zr.resolve(al)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(zn("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),al):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(zn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Vn()<=Ye.DEBUG&&zn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),zr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function gl(e,t){return new pl(e,t)}class vl{constructor(){this.changes=new oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?zr.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yl{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bl{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ba(n.mutation,e,js.empty(),jr.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ya()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ya();const r=fa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=da();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=fa();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ya()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=ca();const i=pa(),a=pa();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Ka)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Ba(a.mutation,t,a.mutation.getFieldMask(),jr.now())):i.set(t.key,js.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new yl(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=pa();let r=new Es((e,t)=>e-t),s=ya();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||js.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||ya()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=ma();l.forEach(e=>{if(!s.has(e)){const r=Va(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return zr.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return br.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):zr.resolve(fa());let a=Pr,o=s;return i.next(t=>zr.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?zr.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,ya())).next(e=>({batchId:a,changes:ha(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new br(t)).next(e=>{let t=da();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=da();return this.indexManager.getCollectionParents(e,s).next(a=>zr.forEach(a,a=>{const o=function(e,t){return new Wi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,vi.newInvalidDocument(r)))});let n=da();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Ba(i.mutation,r,js.empty(),jr.now()),ra(t,r)&&(n=n.insert(e,r))}),n})}}class wl{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return zr.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:jo(e.createTime)}}(t)),zr.resolve()}getNamedQuery(e,t){return zr.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:nl(e.bundledQuery),readTime:jo(e.readTime)}}(t)),zr.resolve()}}class xl{constructor(){this.overlays=new Es(br.comparator),this.kr=new Map}getOverlay(e,t){return zr.resolve(this.overlays.get(t))}getOverlays(e,t){const n=fa();return zr.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),zr.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),zr.resolve()}getOverlaysForCollection(e,t,n){const r=fa(),s=t.length+1,i=new br(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return zr.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Es((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=fa(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=fa(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return zr.resolve(a)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new eo(t,n));let s=this.kr.get(t);void 0===s&&(s=ya(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}}class kl{constructor(){this.sessionToken=Ps.EMPTY_BYTE_STRING}getSessionToken(e){return zr.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,zr.resolve()}}class Nl{constructor(){this.qr=new Ts(Sl.Qr),this.$r=new Ts(Sl.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new Sl(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Sl(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new br(new gr([])),n=new Sl(t,e),r=new Sl(t,e+1),s=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),s.push(e.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new br(new gr([])),n=new Sl(t,e),r=new Sl(t,e+1);let s=ya();return this.$r.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Sl(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Sl{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return br.comparator(e.key,t.key)||cr(e.Hr,t.Hr)}static Ur(e,t){return cr(e.Hr,t.Hr)||br.comparator(e.key,t.key)}}class El{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ts(Sl.Qr)}checkEmpty(e){return zr.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new $a(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Yr=this.Yr.add(new Sl(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return zr.resolve(i)}lookupMutationBatch(e,t){return zr.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),s=r<0?0:r;return zr.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return zr.resolve(0===this.mutationQueue.length?Wr:this.er-1)}getAllMutationBatches(e){return zr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sl(t,0),r=new Sl(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);s.push(t)}),zr.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ts(cr);return t.forEach(e=>{const t=new Sl(e,0),r=new Sl(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),zr.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;br.isDocumentKey(s)||(s=s.child(""));const i=new Sl(new br(s),0);let a=new Ts(cr);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},i),zr.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Gn(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return zr.forEach(t.mutations,r=>{const s=new Sl(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new Sl(t,0),r=this.Yr.firstAfterOrEqual(n);return zr.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,zr.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _l{constructor(e){this.ni=e,this.docs=new Es(br.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return zr.resolve(n?n.document.mutableCopy():vi.newInvalidDocument(t))}getEntries(e,t){let n=ca();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():vi.newInvalidDocument(e))}),zr.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=ca();const i=t.path,a=new br(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Mr(Or(a),n)<=0||(r.has(a.key)||ra(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return zr.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Wn(9500)}ri(e,t){return zr.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Cl(this)}getSize(e){return zr.resolve(this.size)}}class Cl extends vl{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),zr.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class Tl{constructor(e){this.persistence=e,this.ii=new oa(e=>Bi(e),qi),this.lastRemoteSnapshotVersion=Ar.min(),this.highestTargetId=0,this.si=0,this.oi=new Nl,this.targetCount=0,this._i=cl.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),zr.resolve()}getLastRemoteSnapshotVersion(e){return zr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return zr.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),zr.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),zr.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new cl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,zr.resolve()}updateTargetData(e,t){return this.hr(t),zr.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,zr.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ii.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),zr.waitFor(s).next(()=>r)}getTargetCount(e){return zr.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return zr.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),zr.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),zr.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),zr.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return zr.resolve(n)}containsKey(e,t){return zr.resolve(this.oi.containsKey(t))}}class Il{constructor(e,t){this.ai={},this.overlays={},this.ui=new Hr(0),this.ci=!1,this.ci=!0,this.li=new kl,this.referenceDelegate=e(this),this.hi=new Tl(this),this.indexManager=new sl,this.remoteDocumentCache=function(e){return new _l(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new tl(t),this.Ti=new wl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xl,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new El(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){zn("MemoryPersistence","Starting transaction:",e);const r=new jl(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return zr.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class jl extends Ur{constructor(e){super(),this.currentSequenceNumber=e}}class Al{constructor(e){this.persistence=e,this.Ai=new Nl,this.Ri=null}static Vi(e){return new Al(e)}get mi(){if(this.Ri)return this.Ri;throw Wn(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),zr.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),zr.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),zr.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zr.forEach(this.mi,n=>{const r=br.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,Ar.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return zr.or([()=>zr.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Pl{constructor(e,t){this.persistence=e,this.gi=new oa(e=>Jr(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=gl(this,t)}static Vi(e,t){return new Pl(e,t)}Ii(){}di(e){return zr.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return zr.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?zr.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Ar.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),zr.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),zr.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),zr.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),zr.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ai(e.data.value)),t}Sr(e,t,n){return zr.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return zr.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Dl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=ya(),r=ya();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Dl(e,t.fromCache,n,r)}}class Rl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ol{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=De()?8:Br(Ae())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ps(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Rl;return this.ws(e,t,n).next(r=>{if(s.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(Vn()<=Ye.DEBUG&&zn("QueryEngine","SDK will not create cache indexes for query:",na(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),zr.resolve()):(Vn()<=Ye.DEBUG&&zn("QueryEngine","Query:",na(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(Vn()<=Ye.DEBUG&&zn("QueryEngine","The SDK decides to create cache indexes for query:",na(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(t))):zr.resolve())}ps(e,t){if(Qi(t))return zr.resolve(null);let n=Yi(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Zi(t,null,"F"),n=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ya(...r);return this.gs.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.bs(t,r);return this.Ds(t,i,s,n.readTime)?this.ps(e,Zi(t,null,"F")):this.vs(e,i,t,n)}))})))}ys(e,t,n,r){return Qi(t)||r.isEqual(Ar.min())?zr.resolve(null):this.gs.getDocuments(e,n).next(s=>{const i=this.bs(t,s);return this.Ds(t,i,n,r)?zr.resolve(null):(Vn()<=Ye.DEBUG&&zn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),na(t)),this.vs(e,i,t,Rr(r,Pr)).next(e=>e))})}bs(e,t){let n=new Ts(ia(e));return t.forEach((t,r)=>{ra(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return Vn()<=Ye.DEBUG&&zn("QueryEngine","Using full collection scan to execute query:",na(t)),this.gs.getDocumentsMatchingQuery(e,t,Lr.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ll="LocalStore";class Ml{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Es(cr),this.Ms=new oa(e=>Bi(e),qi),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bl(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Fl(e,t,n,r){return new Ml(e,t,n,r)}async function Ul(e,t){const n=Qn(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=ya();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Vl(e){const t=Qn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function zl(e,t,n){let r=ya(),s=ya();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ca();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Ar.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):zn(Ll,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ls:r,ks:s}})}function Bl(e,t){const n=Qn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Wr),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function ql(e,t){const n=Qn(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(s=>s?(r=s,zr.resolve(r)):n.hi.allocateTargetId(e).next(s=>(r=new el(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function Hl(e,t,n){const r=Qn(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!qr(e))throw e;zn(Ll,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function Wl(e,t,n){const r=Qn(e);let s=Ar.min(),i=ya();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Qn(e),s=r.Ms.get(n);return void 0!==s?zr.resolve(r.Fs.get(s)):r.hi.getTargetData(t,n)}(r,e,Yi(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?s:Ar.min(),n?i:ya())).next(e=>(Kl(r,sa(t),e),{documents:e,qs:i})))}function Kl(e,t,n){let r=e.xs.get(t)||Ar.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class Gl{constructor(){this.activeTargetIds=wa()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ql{constructor(){this.Fo=new Gl,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Gl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xl{xo(e){}shutdown(){}}const Jl="ConnectivityMonitor";class Yl{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){zn(Jl,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){zn(Jl,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let $l=null;function Zl(){return null===$l?$l=268435456+Math.round(2147483648*Math.random()):$l++,"0x"+$l.toString(16)}const ec="RestConnection",tc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nc{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.Ko=this.databaseId.database===Ws?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,s){const i=Zl(),a=this.Go(e,t.toUriEncodedString());zn(ec,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,r,s);const{host:l}=new URL(a),c=_e(l);return this.jo(e,a,o,n,c).then(t=>(zn(ec,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw qn(ec,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Jo(e,t,n,r,s,i){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=tc[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class rc{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const sc="WebChannelConnection";class ic extends nc{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){const i=Zl();return new Promise((s,a)=>{const o=new En;o.setWithCredentials(!0),o.listenOnce(Cn.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Tn.NO_ERROR:const t=o.getResponseJson();zn(sc,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Tn.TIMEOUT:zn(sc,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Jn(Xn.DEADLINE_EXCEEDED,"Request time out"));break;case Tn.HTTP_ERROR:const n=o.getStatus();if(zn(sc,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Xn).indexOf(t)>=0?t:Xn.UNKNOWN}(t.status);a(new Jn(e,t.message))}else a(new Jn(Xn.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Jn(Xn.UNAVAILABLE,"Connection failed."));break;default:Wn(9055,{c_:e,streamId:i,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{zn(sc,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);zn(sc,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Zl(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Pn(),a=An(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");zn(sc,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.T_(u);let d=!1,h=!1;const f=new rc({Ho:t=>{h?zn(sc,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(zn(sc,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),zn(sc,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Yo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,_n.EventType.OPEN,()=>{h||(zn(sc,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.s_())}),m(u,_n.EventType.CLOSE,()=>{h||(h=!0,zn(sc,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.__(),this.I_(u))}),m(u,_n.EventType.ERROR,t=>{h||(h=!0,qn(sc,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.__(new Jn(Xn.UNAVAILABLE,"The operation could not be completed")))}),m(u,_n.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Gn(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){zn(sc,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=no[e];if(void 0!==t)return io(t)}(t),s=a.message;void 0===n&&(n=Xn.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.__(new Jn(n,s)),u.close()}else zn(sc,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.a_(s)}}),m(a,jn.STAT_EVENT,t=>{t.stat===In.PROXY?zn(sc,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===In.NOPROXY&&zn(sc,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function ac(){return"undefined"!=typeof document?document:null}function oc(e){return new Eo(e,!0)}class lc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&zn("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const cc="PersistentStream";class uc{constructor(e,t,n,r,s,i,a,o){this.Fi=e,this.w_=n,this.S_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new lc(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===Xn.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Xn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new Jn(Xn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return zn(cc,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(zn(cc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dc extends uc{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wn(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Gn(void 0===t||"string"==typeof t,58123),Ps.fromBase64String(t||"")):(Gn(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Ps.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Xn.UNKNOWN:io(e.code);return new Jn(t,e.message||"")}(a);n=new vo(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Oo(e,r.document.name),i=jo(r.document.updateTime),a=r.document.createTime?jo(r.document.createTime):Ar.min(),o=new pi({mapValue:{fields:r.document.fields}}),l=vi.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new po(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Oo(e,r.document),i=r.readTime?jo(r.readTime):Ar.min(),a=vi.newNoDocument(s,i),o=r.removedTargetIds||[];n=new po([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Oo(e,r.document),i=r.removedTargetIds||[];n=new po([],i,s,null)}else{if(!("filter"in t))return Wn(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new to(r,s),a=e.targetId;n=new go(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ar.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ar.min():t.readTime?jo(t.readTime):Ar.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=Fo(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Hi(r)?{documents:Bo(e,r)}:{query:qo(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=To(e,t.resumeToken);const r=_o(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ar.min())>0){n.readTime=Co(e,t.snapshotVersion.toTimestamp());const r=_o(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wn(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=Fo(this.serializer),t.removeTarget=e,this.k_(t)}}class hc extends uc{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Gn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Gn(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){Gn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(Gn(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?jo(e.updateTime):jo(t);return n.isEqual(Ar.min())&&(n=jo(t)),new La(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=jo(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=Fo(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>zo(this.serializer,e))};this.k_(t)}}class fc{}class mc extends fc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Jn(Xn.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Wo(e,Po(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Xn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jn(Xn.UNKNOWN,e.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Jo(e,Po(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Xn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jn(Xn.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class pc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(Bn(t),this._a=!1):zn("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const gc="RemoteStore";class vc{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{_c(this)&&(zn(gc,"Restarting streams for network reachability change."),await async function(e){const t=Qn(e);t.Ia.add(4),await bc(t),t.Aa.set("Unknown"),t.Ia.delete(4),await yc(t)}(this))})}),this.Aa=new pc(n,r)}}async function yc(e){if(_c(e))for(const t of e.da)await t(!0)}async function bc(e){for(const t of e.da)await t(!1)}function wc(e,t){const n=Qn(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Ec(n)?Sc(n):Wc(n).x_()&&kc(n,t))}function xc(e,t){const n=Qn(e),r=Wc(n);n.Ta.delete(t),r.x_()&&Nc(n,t),0===n.Ta.size&&(r.x_()?r.B_():_c(n)&&n.Aa.set("Unknown"))}function kc(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ar.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wc(e).H_(t)}function Nc(e,t){e.Ra.$e(t),Wc(e).Y_(t)}function Sc(e){e.Ra=new bo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Wc(e).start(),e.Aa.aa()}function Ec(e){return _c(e)&&!Wc(e).M_()&&e.Ta.size>0}function _c(e){return 0===Qn(e).Ia.size}function Cc(e){e.Ra=void 0}async function Tc(e){e.Aa.set("Online")}async function Ic(e){e.Ta.forEach((t,n)=>{kc(e,t)})}async function jc(e,t){Cc(e),Ec(e)?(e.Aa.la(t),Sc(e)):e.Aa.set("Unknown")}async function Ac(e,t,n){if(e.Aa.set("Online"),t instanceof vo&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){zn(gc,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Pc(e,n)}else if(t instanceof po?e.Ra.Ye(t):t instanceof go?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Ar.min()))try{const t=await Vl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ta.get(r);s&&e.Ta.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(Ps.EMPTY_BYTE_STRING,r.snapshotVersion)),Nc(e,t);const s=new el(r.target,t,n,r.sequenceNumber);kc(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){zn(gc,"Failed to raise snapshot:",t),await Pc(e,t)}}async function Pc(e,t,n){if(!qr(t))throw t;e.Ia.add(1),await bc(e),e.Aa.set("Offline"),n||(n=()=>Vl(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{zn(gc,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await yc(e)})}function Dc(e,t){return t().catch(n=>Pc(e,n,t))}async function Rc(e){const t=Qn(e),n=Kc(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Wr;for(;Oc(t);)try{const e=await Bl(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,Lc(t,e)}catch(e){await Pc(t,e)}Mc(t)&&Fc(t)}function Oc(e){return _c(e)&&e.Pa.length<10}function Lc(e,t){e.Pa.push(t);const n=Kc(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function Mc(e){return _c(e)&&!Kc(e).M_()&&e.Pa.length>0}function Fc(e){Kc(e).start()}async function Uc(e){Kc(e).na()}async function Vc(e){const t=Kc(e);for(const n of e.Pa)t.X_(n.mutations)}async function zc(e,t,n){const r=e.Pa.shift(),s=Za.from(r,t,n);await Dc(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Rc(e)}async function Bc(e,t){t&&Kc(e).Z_&&await async function(e,t){if(function(e){return so(e)&&e!==Xn.ABORTED}(t.code)){const n=e.Pa.shift();Kc(e).N_(),await Dc(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Rc(e)}}(e,t),Mc(e)&&Fc(e)}async function qc(e,t){const n=Qn(e);n.asyncQueue.verifyOperationInProgress(),zn(gc,"RemoteStore received new credentials");const r=_c(n);n.Ia.add(3),await bc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await yc(n)}async function Hc(e,t){const n=Qn(e);t?(n.Ia.delete(2),await yc(n)):t||(n.Ia.add(2),await bc(n),n.Aa.set("Unknown"))}function Wc(e){return e.Va||(e.Va=function(e,t,n){const r=Qn(e);return r.ia(),new dc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Tc.bind(null,e),e_:Ic.bind(null,e),n_:jc.bind(null,e),J_:Ac.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),Ec(e)?Sc(e):e.Aa.set("Unknown")):(await e.Va.stop(),Cc(e))})),e.Va}function Kc(e){return e.ma||(e.ma=function(e,t,n){const r=Qn(e);return r.ia(),new hc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Uc.bind(null,e),n_:Bc.bind(null,e),ea:Vc.bind(null,e),ta:zc.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Rc(e)):(await e.ma.stop(),e.Pa.length>0&&(zn(gc,"Stopping write stream with ".concat(e.Pa.length," pending writes")),e.Pa=[]))})),e.ma}class Gc{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Gc(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jn(Xn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qc(e,t){if(Bn("AsyncQueue","".concat(t,": ").concat(e)),qr(e))return new Jn(Xn.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Xc{static emptySet(e){return new Xc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||br.comparator(t.key,n.key):(e,t)=>br.comparator(e.key,t.key),this.keyedMap=da(),this.sortedSet=new Es(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Xc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Jc{constructor(){this.fa=new Es(br.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Wn(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Yc{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Yc(e,t,Xc.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ea(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class $c{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Zc{constructor(){this.queries=eu(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=Qn(e),r=n.queries;n.queries=eu(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new Jn(Xn.ABORTED,"Firestore shutting down"))}}function eu(){return new oa(e=>ta(e),ea)}async function tu(e,t){const n=Qn(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new $c,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Qc(e,"Initialization of query '".concat(na(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&iu(n)}async function nu(e,t){const n=Qn(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.wa.indexOf(t);e>=0&&(i.wa.splice(e,1),0===i.wa.length?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ru(e,t){const n=Qn(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(s)&&(r=!0);t.ya=s}}r&&iu(n)}function su(e,t,n){const r=Qn(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function iu(e){e.Da.forEach(e=>{e.next()})}var au,ou;(ou=au||(au={})).Fa="default",ou.Cache="cache";class lu{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Yc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==au.Cache}}class cu{constructor(e){this.key=e}}class uu{constructor(e){this.key=e}}class du{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ya(),this.mutatedKeys=ya(),this.Xa=ia(e),this.eu=new Xc(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Jc,r=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ra(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.iu(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Xa(u,o)>0||l&&this.Xa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{eu:i,ru:n,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const i=e.ru.pa();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wn(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const a=t&&!r?this.ou():[],o=0===this.Za.size&&this.current&&!r?1:0,l=o!==this.Ya;return this.Ya=o,0!==i.length||l?{snapshot:new Yc(this.query,e.eu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Jc,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ya(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new uu(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new cu(n))}),t}uu(e){this.Ha=e.qs,this.Za=ya();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Yc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const hu="SyncEngine";class fu{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class mu{constructor(e){this.key=e,this.lu=!1}}class pu{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.hu={},this.Pu=new oa(e=>ta(e),ea),this.Tu=new Map,this.Iu=new Set,this.du=new Es(br.comparator),this.Eu=new Map,this.Au=new Nl,this.Ru={},this.Vu=new Map,this.mu=cl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function gu(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Mu(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await yu(r,t,n,!0),s}async function vu(e,t){const n=Mu(e);await yu(n,t,!0,!1)}async function yu(e,t,n,r){const s=await ql(e.localStore,Yi(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await bu(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&wc(e.remoteStore,s),o}async function bu(e,t,n,r,s){e.gu=(t,n,r)=>async function(e,t,n,r){let s=t.view.nu(n);s.Ds&&(s=await Wl(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Au(e,t.targetId,o._u),o.snapshot}(e,t,n,r);const i=await Wl(e.localStore,t,!0),a=new du(t,i.qs),o=a.nu(i.documents),l=mo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Au(e,n,c._u);const u=new fu(t,n,a);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function wu(e,t,n){const r=Qn(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(e=>!ea(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Hl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xc(r.remoteStore,s.targetId),Iu(r,s.targetId)}).catch(Vr)):(Iu(r,s.targetId),await Hl(r.localStore,s.targetId,!0))}async function xu(e,t){const n=Qn(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xc(n.remoteStore,r.targetId))}async function ku(e,t){const n=Qn(e);try{const e=await function(e,t){const n=Qn(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.hi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.hi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ps.EMPTY_BYTE_STRING,Ar.min()).withLastLimboFreeSnapshotVersion(Ar.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.hi.updateTargetData(e,c))});let o=ca(),l=ya();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(zl(e,i,t.documentUpdates).next(e=>{o=e.Ls,l=e.ks})),!r.isEqual(Ar.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return zr.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Fs=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(Gn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?Gn(r.lu,14607):e.removedDocuments.size>0&&(Gn(r.lu,42227),r.lu=!1))}),await Ru(n,e,t)}catch(e){await Vr(e)}}function Nu(e,t,n){const r=Qn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Qn(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.wa)s.va(t)&&(r=!0)}),r&&iu(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Su(e,t,n){const r=Qn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new Es(br.comparator);e=e.insert(i,vi.newNoDocument(i,Ar.min()));const n=ya().add(i),s=new fo(Ar.min(),new Map,new Es(cr),e,n);await ku(r,s),r.du=r.du.remove(i),r.Eu.delete(t),Du(r)}else await Hl(r.localStore,t,!1).then(()=>Iu(r,t,n)).catch(Vr)}async function Eu(e,t){const n=Qn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Qn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=zr.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Gn(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ya();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Tu(n,r,null),Cu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ru(n,e)}catch(e){await Vr(e)}}async function _u(e,t,n){const r=Qn(e);try{const e=await function(e,t){const n=Qn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Gn(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Tu(r,t,n),Cu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ru(r,e)}catch(n){await Vr(n)}}function Cu(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function Tu(e,t,n){const r=Qn(e);let s=r.Ru[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function Iu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||ju(e,t)})}function ju(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(xc(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Du(e))}function Au(e,t,n){for(const r of n)r instanceof cu?(e.Au.addReference(r.key,t),Pu(e,r)):r instanceof uu?(zn(hu,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||ju(e,r.key)):Wn(19791,{yu:r})}function Pu(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(zn(hu,"New document in limbo: "+n),e.Iu.add(r),Du(e))}function Du(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new br(gr.fromString(t)),r=e.mu.next();e.Eu.set(r,new mu(n)),e.du=e.du.insert(n,r),wc(e.remoteStore,new el(Yi(Gi(n.path)),r,"TargetPurposeLimboResolution",Hr.ue))}}async function Ru(e,t,n){const r=Qn(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((e,o)=>{a.push(r.gu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Dl.Es(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.hu.J_(s),await async function(e,t){const n=Qn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>zr.forEach(t,t=>zr.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>zr.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!qr(e))throw e;zn(Ll,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,s)}}}(r.localStore,i))}async function Ou(e,t){const n=Qn(e);if(!n.currentUser.isEqual(t)){zn(hu,"User change. New user:",t.toKey());const e=await Ul(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new Jn(Xn.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ru(n,e.Bs)}}function Lu(e,t){const n=Qn(e),r=n.Eu.get(t);if(r&&r.lu)return ya().add(r.key);{let e=ya();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function Mu(e){const t=Qn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ku.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Su.bind(null,t),t.hu.J_=ru.bind(null,t.eventManager),t.hu.pu=su.bind(null,t.eventManager),t}function Fu(e){const t=Qn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Eu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_u.bind(null,t),t}class Uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Fl(this.persistence,new Ol,e.initialUser,this.serializer)}Du(e){return new Il(Al.Vi,this.serializer)}bu(e){return new Ql}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uu.provider={build:()=>new Uu};class Vu extends Uu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Gn(this.persistence.referenceDelegate instanceof Pl,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ml(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?ll.withCacheSize(this.cacheSizeBytes):ll.DEFAULT;return new Il(e=>Pl.Vi(e,t),this.serializer)}}class zu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ou.bind(null,this.syncEngine),await Hc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zc}createDatastore(e){const t=oc(e.databaseInfo.databaseId),n=function(e){return new ic(e)}(e.databaseInfo);return function(e,t,n,r){return new mc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new vc(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Nu(this.syncEngine,e,0),Yl.C()?new Yl:new Xl)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new pu(e,t,n,r,s,i);return a&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Qn(e);zn(gc,"RemoteStore shutting down."),t.Ia.add(5),await bc(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}zu.provider={build:()=>new zu};class Bu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const qu="FirestoreClient";class Hu{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Mn.UNAUTHENTICATED,this.clientId=lr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{zn(qu,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(zn(qu,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Qc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Wu(e,t){e.asyncQueue.verifyOperationInProgress(),zn(qu,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ul(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{qn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{zn("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{qn("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function Ku(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Gu(e);zn(qu,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>qc(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>qc(t.remoteStore,n)),e._onlineComponents=t}async function Gu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){zn(qu,"Using user provided OfflineComponentProvider");try{await Wu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Xn.FAILED_PRECONDITION||e.code===Xn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;qn("Error using user provided cache. Falling back to memory cache: "+n),await Wu(e,new Uu)}}else zn(qu,"Using default OfflineComponentProvider"),await Wu(e,new Vu(void 0));return e._offlineComponents}async function Qu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(zn(qu,"Using user provided OnlineComponentProvider"),await Ku(e,e._uninitializedComponentsProvider._online)):(zn(qu,"Using default OnlineComponentProvider"),await Ku(e,new zu))),e._onlineComponents}function Xu(e){return Qu(e).then(e=>e.syncEngine)}async function Ju(e){const t=await Qu(e),n=t.eventManager;return n.onListen=gu.bind(null,t.syncEngine),n.onUnlisten=wu.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=vu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xu.bind(null,t.syncEngine),n}function Yu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Bu({next:o=>{i.Ou(),t.enqueueAndForget(()=>nu(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Jn(Xn.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Jn(Xn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new lu(Gi(n.path),i,{includeMetadataChanges:!0,ka:!0});return tu(e,a)}(await Ju(e),e.asyncQueue,t,n,r)),r.promise}function $u(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Zu=new Map,ed="firestore.googleapis.com",td=!0;class nd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jn(Xn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ed,this.ssl=td}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:td;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ol;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<dl)throw new Jn(Xn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Jn(Xn.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$u(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Jn(Xn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Jn(Xn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Jn(Xn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Jn(Xn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jn(Xn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Zn;switch(e.type){case"firstParty":return new rr(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Jn(Xn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zu.get(e);t&&(zn("ComponentProvider","Removing Datastore"),Zu.delete(e),t.terminate())}(this),Promise.resolve()}}function sd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=Er(e,rd);const i=_e(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&(Ce("https://".concat(l)),je("Firestore",!0)),a.host!==ed&&a.host!==l&&qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:i,emulatorOptions:r});if(!Fe(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Mn.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Jn(Xn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Mn(i)}e._authCredentials=new er(new $n(t,n))}}class id{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new id(this.firestore,e,this._query)}}class ad{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new od(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ad(this.firestore,e,this._key)}toJSON(){return{type:ad._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Cr(t,ad._jsonSchema))return new ad(e,n||null,new br(gr.fromString(t.referencePath)))}}ad._jsonSchemaVersion="firestore/documentReference/1.0",ad._jsonSchema={type:_r("string",ad._jsonSchemaVersion),referencePath:_r("string")};class od extends id{constructor(e,t,n){super(e,t,Gi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ad(this.firestore,null,new br(e))}withConverter(e){return new od(this.firestore,e,this._path)}}function ld(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=We(e),wr("collection","path",t),e instanceof rd){const n=gr.fromString(t,...r);return kr(n),new od(e,null,n)}{if(!(e instanceof ad||e instanceof od))throw new Jn(Xn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gr.fromString(t,...r));return kr(n),new od(e.firestore,null,n)}}function cd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=We(e),1===arguments.length&&(t=lr.newId()),wr("doc","path",t),e instanceof rd){const n=gr.fromString(t,...r);return xr(n),new ad(e,null,new br(n))}{if(!(e instanceof ad||e instanceof od))throw new Jn(Xn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gr.fromString(t,...r));return xr(n),new ad(e.firestore,e instanceof od?e.converter:null,new br(n))}}const ud="AsyncQueue";class dd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new lc(this,"async_queue_retry"),this.oc=()=>{const e=ac();e&&zn(ud,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=ac();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ac();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Yn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qr(e))throw e;zn(ud,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,Bn("INTERNAL UNHANDLED ERROR: ",hd(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Gc.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&Wn(47125,{hc:hd(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function hd(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function fd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class md extends rd{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new dd,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dd(e),this._firestoreClient=void 0,await e}}}function pd(e){if(e._terminated)throw new Jn(Xn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||gd(e),e._firestoreClient}function gd(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Hs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$u(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Hu(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class vd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vd(Ps.fromBase64String(e))}catch(e){throw new Jn(Xn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vd(Ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vd._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cr(e,vd._jsonSchema))return vd.fromBase64String(e.bytes)}}vd._jsonSchemaVersion="firestore/bytes/1.0",vd._jsonSchema={type:_r("string",vd._jsonSchemaVersion),bytes:_r("string")};class yd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Jn(Xn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bd{constructor(e){this._methodName=e}}class wd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jn(Xn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jn(Xn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return cr(this._lat,e._lat)||cr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wd._jsonSchemaVersion}}static fromJSON(e){if(Cr(e,wd._jsonSchema))return new wd(e.latitude,e.longitude)}}wd._jsonSchemaVersion="firestore/geoPoint/1.0",wd._jsonSchema={type:_r("string",wd._jsonSchemaVersion),latitude:_r("number"),longitude:_r("number")};class xd{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cr(e,xd._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new xd(e.vectorValues);throw new Jn(Xn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xd._jsonSchemaVersion="firestore/vectorValue/1.0",xd._jsonSchema={type:_r("string",xd._jsonSchemaVersion),vectorValues:_r("object")};const kd=/^__.*__$/;class Nd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wa(e,this.data,t,this.fieldTransforms)}}function Sd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wn(40011,{Ec:e})}}class Ed{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ed(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ld(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(Sd(this.Ec)&&kd.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _d{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||oc(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ed({Ec:e,methodName:t,bc:n,path:yr.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cd(e){const t=e._freezeSettings(),n=oc(e._databaseId);return new _d(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Td(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Pd("Data must be an object, but it was:",a,r);const o=jd(r,a);let l,c;if(i.merge)l=new js(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Dd(t,r,n);if(!a.contains(s))throw new Jn(Xn.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Md(e,s)||e.push(s)}l=new js(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Nd(new pi(o),l,c)}function Id(e,t){if(Ad(e=We(e)))return Pd("Unsupported field value:",t,e),jd(e,t);if(e instanceof bd)return function(e,t){if(!Sd(t.Ec))throw t.wc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.wc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Id(s,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=We(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Na(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=jr.fromDate(e);return{timestampValue:Co(t.serializer,n)}}if(e instanceof jr){const n=new jr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Co(t.serializer,n)}}if(e instanceof wd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vd)return{bytesValue:To(t.serializer,e._byteString)};if(e instanceof ad){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ao(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof xd)return function(e,t){return{mapValue:{fields:{[Gs]:{stringValue:Js},[Ys]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return xa(t.serializer,e)})}}}}}}(e,t);throw t.wc("Unsupported field value: ".concat(Sr(e)))}(e,t)}function jd(e,t){const n={};return Ss(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ns(e,(e,r)=>{const s=Id(r,t.Vc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Ad(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jr||e instanceof wd||e instanceof vd||e instanceof ad||e instanceof bd||e instanceof xd)}function Pd(e,t,n){if(!Ad(n)||!Nr(n)){const r=Sr(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Dd(e,t,n){if((t=We(t))instanceof yd)return t._internalPath;if("string"==typeof t)return Od(e,t);throw Ld("Field path arguments must be of type string or ",e,!1,void 0,n)}const Rd=new RegExp("[~\\*/\\[\\]]");function Od(e,t,n){if(t.search(Rd)>=0)throw Ld("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new yd(...t.split("."))._internalPath}catch(r){throw Ld("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ld(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Jn(Xn.INVALID_ARGUMENT,o+e+l)}function Md(e,t){return e.some(e=>e.isEqual(t))}class Fd{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ad(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ud(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ud extends Fd{data(){return super.data()}}function Vd(e,t){return"string"==typeof t?Od(e,t):t instanceof yd?t._internalPath:t._delegate._internalPath}function zd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Jn(Xn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Os(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Wn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ns(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ys].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Os(e.doubleValue));return new xd(s)}convertGeoPoint(e){return new wd(Os(e.latitude),Os(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qs(e));default:return null}}convertTimestamp(e){const t=Rs(e);return new jr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=gr.fromString(e);Gn(Zo(n),9688,{name:e});const r=new Ks(n.get(1),n.get(3)),s=new br(n.popFirst(5));return r.isEqual(t)||Bn("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function qd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Hd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wd extends Fd{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Vd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Jn(Xn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Wd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wd._jsonSchema={type:_r("string",Wd._jsonSchemaVersion),bundleSource:_r("string","DocumentSnapshot"),bundleName:_r("string"),bundle:_r("string")};class Kd extends Wd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Gd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Hd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Kd(this._firestore,this._userDataWriter,n.key,n,new Hd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Jn(Xn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Kd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Hd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Kd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Hd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Qd(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Jn(Xn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lr.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Qd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wn(61501,{type:e})}}function Xd(e){e=Er(e,ad);const t=Er(e.firestore,md);return Yu(pd(t),e._key).then(n=>th(t,e,n))}Gd._jsonSchemaVersion="firestore/querySnapshot/1.0",Gd._jsonSchema={type:_r("string",Gd._jsonSchemaVersion),bundleSource:_r("string","QuerySnapshot"),bundleName:_r("string"),bundle:_r("string")};class Jd extends Bd{constructor(e){super(),this.firestore=e}convertBytes(e){return new vd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ad(this.firestore,null,t)}}function Yd(e,t,n){e=Er(e,ad);const r=Er(e.firestore,md),s=qd(e.converter,t,n);return eh(r,[Td(Cd(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Ma.none())])}function $d(e){return eh(Er(e.firestore,md),[new Ja(e._key,Ma.none())])}function Zd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=We(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||fd(n[l])||(o=n[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(fd(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof ad)d=Er(e.firestore,md),h=Gi(e._key.path),u={next:t=>{n[l]&&n[l](th(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Er(e,id);d=Er(t.firestore,md),h=t._query;const r=new Jd(d);u={next:e=>{n[l]&&n[l](new Gd(d,r,t,e))},error:n[l+1],complete:n[l+2]},zd(e._query)}return function(e,t,n,r){const s=new Bu(r),i=new lu(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>tu(await Ju(e),i)),()=>{s.Ou(),e.asyncQueue.enqueueAndForget(async()=>nu(await Ju(e),i))}}(pd(d),h,c,u)}function eh(e,t){return function(e,t){const n=new Yn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Fu(e);try{const e=await function(e,t){const n=Qn(e),r=jr.now(),s=t.reduce((e,t)=>e.add(t.key),ya());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=ca(),l=ya();return n.Os.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=qa(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Ka(e.key,t,gi(t.value.mapValue),Ma.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:ha(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new Es(cr)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ru(r,e.changes),await Rc(r.remoteStore)}catch(e){const t=Qc(e,"Failed to persist write");n.reject(t)}}(await Xu(e),t,n)),n.promise}(pd(e),t)}function th(e,t,n){const r=n.docs.get(t._key),s=new Jd(e);return new Wd(e,s,t._key,r,new Hd(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Fn=e}(on),tn(new Ke("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new md(new tr(e.getProvider("auth-internal")),new ir(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Jn(Xn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),un(On,Ln,e),un(On,Ln,"esm2017")}();un("firebase","11.10.0","app");function nh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function rh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sh=rh,ih=new Le("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ah=new nt("@firebase/auth");function oh(e){if(ah.logLevel<=Ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ah.error("Auth (".concat(on,"): ").concat(e),...n)}}function lh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fh(e,...n)}function ch(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fh(e,...n)}function uh(e,t,n){const r=Object.assign(Object.assign({},sh()),{[t]:n});return new Le("auth","Firebase",r).create(t,{appName:e.name})}function dh(e){return uh(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hh(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&lh(e,"argument-error"),uh(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ih.create(e,...n)}function mh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw fh(t,...r)}}function ph(e){const t="INTERNAL ASSERTION FAILED: "+e;throw oh(t),new Error(t)}function gh(e,t){e||ph(t)}function vh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yh(){return"http:"===bh()||"https:"===bh()}function bh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function wh(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yh()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class xh{constructor(e,t){this.shortDelay=e,this.longDelay=t,gh(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return wh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kh(e,t){gh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Nh{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ph("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ph("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ph("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Eh=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_h=new xh(3e4,6e4);function Ch(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Th(e,t,n,r){return Ih(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=Ve(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&_e(e.emulatorConfig.host)&&(l.credentials="include"),Nh.fetch()(await Ah(e,e.config.apiHost,n,a),l)})}async function Ih(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Sh),t);try{const t=new Dh(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Rh(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Rh(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Rh(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Rh(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw uh(e,o,a);lh(e,o)}}catch(s){if(s instanceof Oe)throw s;lh(e,"network-request-failed",{message:String(s)})}}async function jh(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Th(e,t,n,r,s);return"mfaPendingCredential"in i&&lh(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Ah(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?kh(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(Eh.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Ph(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dh{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ch(this.auth,"network-request-failed")),_h.get())})}}function Rh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ch(e,t,r);return s.customData._tokenResponse=n,s}function Oh(e){return void 0!==e&&void 0!==e.enterprise}class Lh{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ph(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mh(e,t){return Th(e,"GET","/v2/recaptchaConfig",Ch(e,t))}async function Fh(e,t){return Th(e,"POST","/v1/accounts:lookup",t)}function Uh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Vh(e){return 1e3*Number(e)}function zh(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const e=be(n);return e?JSON.parse(e):(oh("Failed to decode base64 JWT payload"),null)}catch(s){return oh("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function Bh(e){const t=zh(e);return mh(t,"internal-error"),mh("undefined"!==typeof t.exp,"internal-error"),mh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function qh(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Oe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Hh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Wh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uh(this.lastLoginAt),this.creationTime=Uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kh(e){var t;const n=e.auth,r=await e.getIdToken(),s=await qh(e,Fh(n,{idToken:r}));mh(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Gh(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Gh(e){return e.map(e=>{var{providerId:t}=e,n=nh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Qh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mh(e.idToken,"internal-error"),mh("undefined"!==typeof e.idToken,"internal-error"),mh("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Bh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mh(0!==e.length,"internal-error");const t=Bh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(mh(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Ih(e,{},async()=>{const n=Ve({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Ah(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&_e(e.emulatorConfig.host)&&(o.credentials="include"),Nh.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Qh;return n&&(mh("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(mh("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(mh("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qh,this.toJSON())}_performRefresh(){return ph("not implemented")}}function Xh(e,t){mh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Jh{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=nh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await qh(this,this.stsTokenManager.getToken(this.auth,e));return mh(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=We(e),r=await n.getIdToken(t),s=zh(r);mh(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Uh(Vh(s.auth_time)),issuedAtTime:Uh(Vh(s.iat)),expirationTime:Uh(Vh(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=We(e);await Kh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(mh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){mh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Kh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(dh(this.auth));const e=await this.getIdToken();return await qh(this,async function(e,t){return Th(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;mh(y&&k,e,"internal-error");const N=Qh.fromJSON(this.name,k);mh("string"===typeof y,e,"internal-error"),Xh(u,e.name),Xh(d,e.name),mh("boolean"===typeof b,e,"internal-error"),mh("boolean"===typeof w,e,"internal-error"),Xh(h,e.name),Xh(f,e.name),Xh(m,e.name),Xh(p,e.name),Xh(g,e.name),Xh(v,e.name);const S=new Jh({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:N,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),p&&(S._redirectEventId=p),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qh;r.updateFromServerResponse(t);const s=new Jh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Kh(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];mh(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Gh(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Qh;a.updateFromIdToken(n);const o=new Jh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Wh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Yh=new Map;function $h(e){gh(e instanceof Function,"Expected a class definition");let t=Yh.get(e);return t?(gh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Yh.set(e,t),t)}class Zh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zh.type="NONE";const ef=Zh;function tf(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class nf{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=tf(this.userKey,r.apiKey,s),this.fullPersistenceKey=tf("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Fh(this.auth,{idToken:e}).catch(()=>{});return t?Jh._fromGetAccountInfoResponse(this.auth,t,e):null}return Jh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new nf($h(ef),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||$h(ef);const i=tf(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await Fh(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Jh._fromGetAccountInfoResponse(e,r,t)}else n=Jh._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new nf(s,e,n)):new nf(s,e,n)}}function rf(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lf(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(sf(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(uf(t))return"Blackberry";if(df(t))return"Webos";if(af(t))return"Safari";if((t.includes("chrome/")||of(t))&&!t.includes("edge/"))return"Chrome";if(cf(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function sf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return/firefox\//i.test(e)}function af(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function of(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return/crios\//i.test(e)}function lf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return/iemobile/i.test(e)}function cf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return/android/i.test(e)}function uf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return/blackberry/i.test(e)}function df(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return/webos/i.test(e)}function hf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ff(){return function(){const e=Ae();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function mf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae();return hf(e)||cf(e)||df(e)||uf(e)||/windows phone/i.test(e)||lf(e)}function pf(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=rf(Ae());break;case"Worker":t="".concat(rf(Ae()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(on,"/").concat(r)}class gf{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class vf{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class yf{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wf(this),this.idTokenSubscription=new wf(this),this.beforeStateQueue=new gf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ih,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$h(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await nf.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Fh(this,{idToken:e}),n=await Jh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(rn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return mh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kh(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(dh(this));const t=e?We(e):null;return t&&mh(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&mh(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(dh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(dh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($h(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Th(e,"GET","/v2/passwordPolicy",Ch(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new vf(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Le("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Th(e,"POST","/v2/accounts:revokeToken",Ch(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$h(e)||this._popupRedirectResolver;mh(t,this,"argument-error"),this.redirectPersistenceManager=await nf.create(this,[$h(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mh(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ah.logLevel<=Ye.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ah.warn("Auth (".concat(on,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function bf(e){return We(e)}class wf{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new qe(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return mh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kf(e){return xf.loadJS(e)}function Nf(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Sf{constructor(){this.enterprise=new Ef}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ef{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _f="NO_RECAPTCHA";class Cf{constructor(e){this.type="recaptcha-enterprise",this.auth=bf(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Oh(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(_f)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Sf).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Mh(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Lh(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Oh(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xf.recaptchaEnterpriseScript;0!==t.length&&(t+=s),kf(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Tf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Cf(e);let a;if(s)a=_f;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function If(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Tf(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Tf(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await Tf(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Tf(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Tf(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function jf(e){const t=bf(e),n=await Mh(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Lh(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Cf(t).verify()}}function Af(e,t,n){const r=bf(e);mh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Pf(t),{host:a,port:o}=function(e){const t=Pf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Df(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Df(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return mh(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void mh(Fe(c,r.config.emulator)&&Fe(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,_e(a)?(Ce("".concat(i,"//").concat(a).concat(l)),je("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Df(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Rf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ph("not implemented")}_getIdTokenResponse(e){return ph("not implemented")}_linkToIdToken(e,t){return ph("not implemented")}_getReauthenticationResolver(e){return ph("not implemented")}}async function Of(e,t){return Th(e,"POST","/v1/accounts:signUp",t)}async function Lf(e,t){return jh(e,"POST","/v1/accounts:signInWithPassword",Ch(e,t))}class Mf extends Rf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Mf(e,t,"password")}static _fromEmailAndCode(e,t){return new Mf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return If(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Lf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return jh(e,"POST","/v1/accounts:signInWithEmailLink",Ch(e,t))}(e,{email:this._email,oobCode:this._password});default:lh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return If(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Of,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return jh(e,"POST","/v1/accounts:signInWithEmailLink",Ch(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:lh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ff(e,t){return jh(e,"POST","/v1/accounts:signInWithIdp",Ch(e,t))}class Uf extends Rf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Uf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=nh(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Uf(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Ff(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ff(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ff(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ve(t)}return e}}async function Vf(e,t){return Th(e,"POST","/v1/accounts:sendVerificationCode",Ch(e,t))}const zf={USER_NOT_FOUND:"user-not-found"};class Bf extends Rf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Bf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Bf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return jh(e,"POST","/v1/accounts:signInWithPhoneNumber",Ch(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await jh(e,"POST","/v1/accounts:signInWithPhoneNumber",Ch(e,t));if(n.temporaryProof)throw Rh(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return jh(e,"POST","/v1/accounts:signInWithPhoneNumber",Ch(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),zf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Bf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class qf{constructor(e){var t,n,r,s,i,a;const o=ze(Be(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);mh(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=ze(Be(e)).link,n=t?ze(Be(t)).deep_link_id:null,r=ze(Be(e)).deep_link_id;return(r?ze(Be(r)).link:null)||r||n||t||e}(e);try{return new qf(t)}catch(n){return null}}}class Hf{constructor(){this.providerId=Hf.PROVIDER_ID}static credential(e,t){return Mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qf.parseLink(t);return mh(n,"argument-error"),Mf._fromEmailAndCode(e,n.code,n.tenantId)}}Hf.PROVIDER_ID="password",Hf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Hf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Kf extends Wf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gf extends Kf{constructor(){super("facebook.com")}static credential(e){return Uf._fromParams({providerId:Gf.PROVIDER_ID,signInMethod:Gf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gf.credentialFromTaggedObject(e)}static credentialFromError(e){return Gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gf.credential(t.oauthAccessToken)}catch(n){return null}}}Gf.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gf.PROVIDER_ID="facebook.com";class Qf extends Kf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Uf._fromParams({providerId:Qf.PROVIDER_ID,signInMethod:Qf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qf.credentialFromTaggedObject(e)}static credentialFromError(e){return Qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Qf.credential(n,r)}catch(s){return null}}}Qf.GOOGLE_SIGN_IN_METHOD="google.com",Qf.PROVIDER_ID="google.com";class Xf extends Kf{constructor(){super("github.com")}static credential(e){return Uf._fromParams({providerId:Xf.PROVIDER_ID,signInMethod:Xf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xf.credentialFromTaggedObject(e)}static credentialFromError(e){return Xf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Xf.credential(t.oauthAccessToken)}catch(n){return null}}}Xf.GITHUB_SIGN_IN_METHOD="github.com",Xf.PROVIDER_ID="github.com";class Jf extends Kf{constructor(){super("twitter.com")}static credential(e,t){return Uf._fromParams({providerId:Jf.PROVIDER_ID,signInMethod:Jf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Jf.credentialFromTaggedObject(e)}static credentialFromError(e){return Jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Jf.credential(n,r)}catch(s){return null}}}async function Yf(e,t){return jh(e,"POST","/v1/accounts:signUp",Ch(e,t))}Jf.TWITTER_SIGN_IN_METHOD="twitter.com",Jf.PROVIDER_ID="twitter.com";class $f{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Jh._fromIdTokenResponse(e,n,r),i=Zf(n);return new $f({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Zf(n);return new $f({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Zf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class em extends Oe{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,em.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new em(e,t,n,r)}}function tm(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw em._fromErrorAndOperation(e,n,t,r);throw n})}async function nm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await qh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return $f._forOperation(e,"link",r)}async function rm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(rn(r.app))return Promise.reject(dh(r));const s="reauthenticate";try{const i=await qh(e,tm(r,s,t,e),n);mh(i.idToken,r,"internal-error");const a=zh(i.idToken);mh(a,r,"internal-error");const{sub:o}=a;return mh(e.uid===o,r,"user-mismatch"),$f._forOperation(e,s,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&lh(r,"user-mismatch"),i}}async function sm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(rn(e.app))return Promise.reject(dh(e));const r="signIn",s=await tm(e,r,t),i=await $f._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function im(e,t){return sm(bf(e),t)}async function am(e){const t=bf(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function om(e,t,n){return rn(e.app)?Promise.reject(dh(e)):im(We(e),Hf.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&am(e),t})}async function lm(e,t){const n={identifier:t,continueUri:yh()?vh():"http://localhost"},{signinMethods:r}=await async function(e,t){return Th(e,"POST","/v1/accounts:createAuthUri",Ch(e,t))}(We(e),n);return r||[]}async function cm(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=We(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await qh(s,async function(e,t){return Th(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function um(e){return We(e).signOut()}function dm(e,t){return Th(e,"POST","/v2/accounts/mfaEnrollment:start",Ch(e,t))}new WeakMap;const hm="__sak";class fm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hm,"1"),this.storage.removeItem(hm),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class mm extends fm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mf(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);ff()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mm.type="LOCAL";const pm=mm;function gm(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function vm(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class ym{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=vm(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return gm(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=vm(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=vm(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=gm(n);const s=setInterval(()=>{const e=gm(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ym.type="COOKIE";class bm extends fm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bm.type="SESSION";const wm=bm;class xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new xm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function km(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}xm.receivers=[];class Nm{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=km("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Sm(){return window}function Em(){return"undefined"!==typeof Sm().WorkerGlobalScope&&"function"===typeof Sm().importScripts}const _m="firebaseLocalStorageDb",Cm="firebaseLocalStorage",Tm="fbase_key";class Im{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jm(e,t){return e.transaction([Cm],t?"readwrite":"readonly").objectStore(Cm)}function Am(){const e=indexedDB.open(_m,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Cm,{keyPath:Tm})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Cm)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(_m);return new Im(e).toPromise()}(),t(await Am()))})})}async function Pm(e,t,n){const r=jm(e,!0).put({[Tm]:t,value:n});return new Im(r).toPromise()}function Dm(e,t){const n=jm(e,!0).delete(t);return new Im(n).toPromise()}class Rm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Am()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Em()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xm._getInstance(Em()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Nm(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Am();return await Pm(e,hm,"1"),await Dm(e,hm),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pm(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=jm(e,!1).get(t),r=await new Im(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=jm(e,!1).getAll();return new Im(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rm.type="LOCAL";const Om=Rm;function Lm(e,t){return Th(e,"POST","/v2/accounts/mfaSignIn:start",Ch(e,t))}Nf("rcb"),new xh(3e4,6e4);const Mm="recaptcha";async function Fm(e,t,n){var r;if(!e._getRecaptchaConfig())try{await jf(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){mh("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=If(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===_f){mh((null===n||void 0===n?void 0:n.type)===Mm,e,"argument-error");return dm(e,await Um(e,t,n))}return dm(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{mh("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;mh(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=If(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===_f){mh((null===n||void 0===n?void 0:n.type)===Mm,e,"argument-error");return Lm(e,await Um(e,t,n))}return Lm(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=If(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===_f){mh((null===n||void 0===n?void 0:n.type)===Mm,e,"argument-error");return Vf(e,await Um(e,t,n))}return Vf(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Um(e,t,n){mh(n.type===Mm,e,"argument-error");const r=await n.verify();mh("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Vm{constructor(e){this.providerId=Vm.PROVIDER_ID,this.auth=bf(e)}verifyPhoneNumber(e,t){return Fm(this.auth,e,We(t))}static credential(e,t){return Bf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Vm.credentialFromTaggedObject(t)}static credentialFromError(e){return Vm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Bf._fromTokenResponse(n,r):null}}function zm(e,t){return t?$h(t):(mh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Vm.PROVIDER_ID="phone",Vm.PHONE_SIGN_IN_METHOD="phone";class Bm extends Rf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ff(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ff(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ff(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qm(e){return sm(e.auth,new Bm(e),e.bypassAuthState)}function Hm(e){const{auth:t,user:n}=e;return mh(n,t,"internal-error"),rm(n,new Bm(e),e.bypassAuthState)}async function Wm(e){const{auth:t,user:n}=e;return mh(n,t,"internal-error"),nm(n,new Bm(e),e.bypassAuthState)}class Km{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qm;case"linkViaPopup":case"linkViaRedirect":return Wm;case"reauthViaPopup":case"reauthViaRedirect":return Hm;default:lh(this.auth,"internal-error")}}resolve(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gm=new xh(2e3,1e4);class Qm extends Km{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Qm.currentPopupAction&&Qm.currentPopupAction.cancel(),Qm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mh(e,this.auth,"internal-error"),e}async onExecution(){gh(1===this.filter.length,"Popup operations only handle one event");const e=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ch(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ch(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ch(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Gm.get())};e()}}Qm.currentPopupAction=null;const Xm=new Map;class Jm extends Km{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Xm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Zm(t),r=$m(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Xm.set(this.auth._key(),e)}return this.bypassAuthState||Xm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ym(e,t){Xm.set(e._key(),t)}function $m(e){return $h(e._redirectPersistence)}function Zm(e){return tf("pendingRedirect",e.config.apiKey,e.name)}async function ep(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(rn(e.app))return Promise.reject(dh(e));const r=bf(e),s=zm(r,t),i=new Jm(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class tp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!rp(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ch(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(np(e))}saveEventToCache(e){this.cachedEventUids.add(np(e)),this.lastProcessedEventTime=Date.now()}}function np(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function rp(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const sp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ip=/^https?/;async function ap(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Th(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(op(r))return}catch(n){}lh(e,"unauthorized-domain")}function op(e){const t=vh(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!ip.test(n))return!1;if(sp.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const lp=new xh(3e4,6e4);function cp(){const e=Sm().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function up(e){return new Promise((t,n)=>{var r,s,i;function a(){cp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cp(),n(ch(e,"network-request-failed"))},timeout:lp.get()})}if(null===(s=null===(r=Sm().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Sm().gapi)||void 0===i?void 0:i.load)){const t=Nf("iframefcb");return Sm()[t]=()=>{gapi.load?a():n(ch(e,"network-request-failed"))},kf("".concat(xf.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw dp=null,e})}let dp=null;const hp=new xh(5e3,15e3),fp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pp(e){const t=e.config;mh(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kh(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:on},s=mp.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(Ve(r).slice(1))}async function gp(e){const t=await function(e){return dp=dp||up(e),dp}(e),n=Sm().gapi;return mh(n,e,"internal-error"),t.open({where:document.body,url:pp(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fp,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=ch(e,"network-request-failed"),i=Sm().setTimeout(()=>{r(s)},hp.get());function a(){Sm().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const vp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function bp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},vp),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Ae().toLowerCase();n&&(o=of(c)?"_blank":n),sf(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return hf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new yp(null);const d=window.open(t||"",o,u);mh(d,e,"popup-blocked");try{d.focus()}catch(h){}return new yp(d)}const wp="__/auth/handler",xp="emulator/auth/handler",kp=encodeURIComponent("fac");async function Np(e,t,n,r,s,i){mh(e.config.authDomain,e,"auth-domain-config-required"),mh(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:on,eventId:s};if(t instanceof Wf){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Kf){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(kp,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(wp);return kh(t,xp)}(e),"?").concat(Ve(o).slice(1)).concat(c)}const Sp="webStorageSupport";const Ep=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wm,this._completeRedirectFn=ep,this._overrideRedirectResult=Ym}async _openPopup(e,t,n,r){var s;gh(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return bp(e,await Np(e,t,n,vh(),r),km())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Sm().location.href=e}(await Np(e,t,n,vh(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await gp(e),n=new tp(e);return t.register("authEvent",t=>{mh(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sp,{type:Sp},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Sp];void 0!==s&&t(!!s),lh(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ap(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mf()||af()||hf()}};var _p="@firebase/auth",Cp="1.10.8";class Tp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ip=Se("authIdTokenMaxAge")||300;let jp=null;var Ap;xf={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ch("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ap="Browser",tn(new Ke("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;mh(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Ap,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pf(Ap)},c=new yf(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($h);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),tn(new Ke("auth-internal",e=>(e=>new Tp(e))(bf(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),un(_p,Cp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ap)),un(_p,Cp,"esm2017");const Pp={apiKey:"AIzaSyDnzOKxBx-iL72sHkdk6kniU6YXDyNnhUk",authDomain:"appp-1c3f4.firebaseapp.com",projectId:"appp-1c3f4",storageBucket:"appp-1c3f4.firebasestorage.app",messagingSenderId:"954917805897",appId:"1:954917805897:web:e58cacfd8a6372b0050498"},Dp=Object.values(Pp).every(Boolean);let Rp=null,Op=null,Lp=null;Dp&&(Rp=ln(Pp),Op=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn();const t=nn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=nn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Fe(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;lh(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ep,persistence:[Om,pm,wm]}),r=Se("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ip)return;const r=null===t||void 0===t?void 0:t.token;jp!==r&&(jp=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){We(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){We(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=ke("auth");return i&&Af(n,"http://".concat(i)),n}(Rp),Lp=function(e,t){const n="object"==typeof e?e:cn(),r="string"==typeof e?e:t||Ws,s=nn(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(()=>{const e=ke("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&sd(s,...e)}return s}(Rp));const Mp=new Qf;function Fp(e){let{currentUser:t,allUsers:n,permissions:s,persistUser:i,showAlert:a,shopCategories:o,shopProducts:l,persistShop:c}=e;const u=(0,r.useCallback)(async e=>{let{userId:t,requiredPermission:r,mutator:o,successMessage:l}=e;if(null===s||void 0===s||!s[r])return a("danger","\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0446\u0456\u0454\u0457 \u0434\u0456\u0457."),!1;const c=n.find(e=>e.id===t);if(!c)return a("warning","\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."),!1;if(!s.isOwner&&c.isAdmin)return a("danger","\u0417\u043c\u0456\u043d\u0438 owner-\u0430\u043a\u0430\u0443\u043d\u0442\u0430 \u0437\u0430\u0431\u043e\u0440\u043e\u043d\u0435\u043d\u0456."),!1;const u=JSON.parse(JSON.stringify(c)),h=o(u)||u,f=V(d(d({},h),{},{id:t}));(f.email||"").toLowerCase()===C&&(f.isAdmin=!0,f.email=C),s.canManageRoles||(f.roles=c.roles);const m=await i(t,f,{errorMessage:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430."});return m&&l&&a("success",l),m},[n,s,i,a]),h=(0,r.useCallback)(async(e,t)=>u({userId:e,requiredPermission:"canManageUsers",mutator:e=>d(d({},e),t),successMessage:"\u0414\u0430\u043d\u0456 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e."}),[u]),f=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.find(t=>t.id===e);if(!r)return a("warning","\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."),!1;const s=!r.isBanned,i=String(t.reason||"").trim(),o=String(t.description||"").trim(),l=Number(t.durationDays||0);if(s&&!i)return a("warning","\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u043b\u043e\u043a\u0443\u0432\u0430\u043d\u043d\u044f."),!1;let c=null;const h=await u({userId:e,requiredPermission:"canBanDeleteUsers",mutator:e=>{if(e.isAdmin)return e;if(e.isBanned)return d(d({},e),{},{isBanned:!1,banReason:"",banDescription:"",banExpiresAt:null,bannedAt:null});const t=new Date,n=Number.isFinite(l)&&l>0?new Date(t.getTime()+24*l*60*60*1e3).toISOString():null;return c={email:e.email,name:e.name,reason:i,description:o,banExpiresAt:n},d(d({},e),{},{isBanned:!0,banReason:i,banDescription:o,banExpiresAt:n,bannedAt:t.toISOString()})},successMessage:s?"\u0410\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e.":"\u0410\u043a\u0430\u0443\u043d\u0442 \u0440\u043e\u0437\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e."});if(!h||!s||!c||!Lp)return h;try{const e=c.banExpiresAt?new Date(c.banExpiresAt).toLocaleString("uk-UA"):"\u0431\u0435\u0437\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e",t=c.description?"\u041e\u043f\u0438\u0441: ".concat(c.description):"\u041e\u043f\u0438\u0441: \u043d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e.";await function(e,t){const n=Er(e.firestore,md),r=cd(e),s=qd(e.converter,t);return eh(n,[Td(Cd(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Ma.exists(!1))]).then(()=>r)}(ld(Lp,"mail"),{to:[c.email],message:{subject:"TaskFlow: \u0432\u0430\u0448 \u0430\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e",text:"\u0412\u0456\u0442\u0430\u0454\u043c\u043e, ".concat(c.name,". \u0412\u0430\u0448 \u0430\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e. \u041f\u0440\u0438\u0447\u0438\u043d\u0430: ").concat(c.reason,". ").concat(t," \u0422\u0435\u0440\u043c\u0456\u043d \u0431\u043b\u043e\u043a\u0443\u0432\u0430\u043d\u043d\u044f: ").concat(e,"."),html:'\n              <div style="font-family:Arial,sans-serif;line-height:1.5;">\n                <h3>\u0410\u043a\u0430\u0443\u043d\u0442 TaskFlow \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e</h3>\n                <p>\u0412\u0456\u0442\u0430\u0454\u043c\u043e, <strong>'.concat(c.name,"</strong>.</p>\n                <p><strong>\u041f\u0440\u0438\u0447\u0438\u043d\u0430:</strong> ").concat(c.reason,"</p>\n                <p><strong>\u041e\u043f\u0438\u0441:</strong> ").concat(c.description||"\u043d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e","</p>\n                <p><strong>\u0422\u0435\u0440\u043c\u0456\u043d \u0431\u043b\u043e\u043a\u0443\u0432\u0430\u043d\u043d\u044f:</strong> ").concat(e,"</p>\n              </div>\n            ")},createdAt:(new Date).toISOString()})}catch(f){a("warning","\u0410\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e, \u0430\u043b\u0435 email-\u0441\u043f\u043e\u0432\u0456\u0449\u0435\u043d\u043d\u044f \u043d\u0435 \u043d\u0430\u0434\u0456\u0441\u043b\u0430\u043d\u043e (\u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 Firebase Trigger Email).")}return h},[n,a,u]);return{onSaveUser:h,onToggleBan:f,onDeleteUser:(0,r.useCallback)(async e=>u({userId:e,requiredPermission:"canBanDeleteUsers",mutator:e=>e.isAdmin?e:d(d({},e),{},{name:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u0438\u0439 \u0430\u043a\u0430\u0443\u043d\u0442 (".concat(e.id.slice(0,6),")"),phone:"",avatar:"",points:0,subscription:"free",paymentLinked:!1,tasks:[],cart:[],purchases:[],pointLedger:[],settings:{reminders:!1,weeklyDigest:!1,pushAlerts:!1},roles:[],flags:[],isBanned:!0,banReason:"\u0410\u043a\u0430\u0443\u043d\u0442 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c/\u0430\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c",banDescription:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u043e\u0447\u0438\u0449\u0435\u043d\u043e \u0442\u0430 \u0434\u0435\u0430\u043a\u0442\u0438\u0432\u043e\u0432\u0430\u043d\u043e.",banExpiresAt:null,bannedAt:(new Date).toISOString()}),successMessage:"\u0410\u043a\u0430\u0443\u043d\u0442 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e: \u0434\u0430\u043d\u0456 \u043e\u0447\u0438\u0449\u0435\u043d\u0456 \u0442\u0430 \u0434\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u0438\u0439."}),[u]),onSaveRawUser:(0,r.useCallback)(async(e,t)=>{if(!s.canUseRawJson)return void a("danger","\u0421\u0438\u0440\u0438\u0439 JSON \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u043b\u0438\u0448\u0435 \u0432\u043b\u0430\u0441\u043d\u0438\u043a\u0443.");let n;try{n=JSON.parse(t)}catch(r){return void a("danger","JSON \u043c\u0456\u0441\u0442\u0438\u0442\u044c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u043d\u0443 \u043f\u043e\u043c\u0438\u043b\u043a\u0443.")}await u({userId:e,requiredPermission:"canUseRawJson",mutator:()=>d(d({},n),{},{id:e}),successMessage:"JSON \u0437\u0430\u0441\u0442\u043e\u0441\u043e\u0432\u0430\u043d\u043e."})},[s.canUseRawJson,a,u]),onSaveTask:(0,r.useCallback)(async(e,t)=>{let n=!1;return await u({userId:e,requiredPermission:"canModerateTasks",mutator:e=>{const r=U(t),s=e.tasks.findIndex(e=>Number(e.id)===Number(r.id));return s>=0?e.tasks[s]=r:(e.tasks.unshift(r),n=!0),e},successMessage:n?"\u0417\u0430\u0434\u0430\u0447\u0443 \u0434\u043e\u0434\u0430\u043d\u043e \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0443.":"\u0417\u0430\u0434\u0430\u0447\u0443 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e."})},[u]),onDeleteTask:(0,r.useCallback)(async(e,t)=>u({userId:e,requiredPermission:"canModerateTasks",mutator:e=>d(d({},e),{},{tasks:e.tasks.filter(e=>Number(e.id)!==Number(t))}),successMessage:"\u0417\u0430\u0434\u0430\u0447\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e."}),[u]),onFlagUser:(0,r.useCallback)(async(e,n)=>{const r="string"===typeof n?n:null===n||void 0===n?void 0:n.reason,i=String(r||"").trim(),o=Array.isArray(null===n||void 0===n?void 0:n.tags)?n.tags:[];return i?u({userId:e,requiredPermission:"canFlagAccounts",mutator:e=>d(d({},e),{},{flags:[...Array.isArray(e.flags)?e.flags:[],{id:"flag-".concat(Date.now()),reason:i,tags:o,createdAt:(new Date).toISOString(),createdByUid:(null===t||void 0===t?void 0:t.id)||"",createdByName:(null===t||void 0===t?void 0:t.name)||"\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440",createdByEmail:(null===t||void 0===t?void 0:t.email)||"",createdByRole:s.isOwner?"owner":"staff"}]}),successMessage:"\u041f\u043e\u0437\u043d\u0430\u0447\u043a\u0443 \u0434\u043e\u0434\u0430\u043d\u043e."}):(a("warning","\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u043f\u043e\u0437\u043d\u0430\u0447\u043a\u0438."),!1)},[null===t||void 0===t?void 0:t.email,null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.name,s.isOwner,a,u]),onResolveFlag:(0,r.useCallback)(async(e,t)=>u({userId:e,requiredPermission:"canResolveFlags",mutator:e=>d(d({},e),{},{flags:(Array.isArray(e.flags)?e.flags:[]).filter(e=>e.id!==t)}),successMessage:"\u041f\u043e\u0437\u043d\u0430\u0447\u043a\u0443 \u0437\u043d\u044f\u0442\u043e."}),[u]),onAddCategory:(0,r.useCallback)(async e=>{if(!s.canManageShop)return a("danger","\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u0440\u0430\u0432 \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0456\u044e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443."),!1;const t=z(e);return t?o.includes(t)?(a("warning","\u0422\u0430\u043a\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454."),!1):c([...o,t],l,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u0434\u043e\u0434\u0430\u043d\u043e."):(a("warning","\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457."),!1)},[s.canManageShop,c,o,l,a]),onDeleteCategory:(0,r.useCallback)(async e=>{if(!s.canManageShop)return a("danger","\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u0440\u0430\u0432 \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0456\u044e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443."),!1;if(!o.includes(e))return!1;const t=o.filter(t=>t!==e),n=l.filter(t=>t.category!==e);return 0===t.length?(a("warning","\u041d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043e\u0441\u0442\u0430\u043d\u043d\u044e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443."),!1):c(t,n,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e.")},[s.canManageShop,c,o,l,a]),onSaveProduct:(0,r.useCallback)(async e=>{if(!s.canManageShop)return a("danger","\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u0440\u0430\u0432 \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0456\u044e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443."),!1;const t=B(e);if(!t.name)return a("warning","\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0442\u043e\u0432\u0430\u0440\u0443."),!1;if(!Number.isFinite(t.price)||t.price<=0)return a("warning","\u0426\u0456\u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u0443 \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 \u0431\u0456\u043b\u044c\u0448\u043e\u044e \u0437\u0430 0."),!1;if(!t.category)return a("warning","\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e \u0442\u043e\u0432\u0430\u0440\u0443."),!1;const n=Number.isFinite(Number(null===e||void 0===e?void 0:e.id)),r=n?Number(e.id):l.reduce((e,t)=>Math.max(e,Number(t.id)||0),0)+1,i=d(d({},t),{},{id:r}),u=n?l.map(e=>e.id===r?i:e):[...l,i],h=o.includes(i.category)?o:[...o,i.category];return c(h,u,n?"\u0422\u043e\u0432\u0430\u0440 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e.":"\u0422\u043e\u0432\u0430\u0440 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e.")},[s.canManageShop,c,o,l,a]),onDeleteProduct:(0,r.useCallback)(async e=>{if(!s.canManageShop)return a("danger","\u0423 \u0432\u0430\u0441 \u043d\u0435\u043c\u0430\u0454 \u043f\u0440\u0430\u0432 \u043d\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0456\u044e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443."),!1;const t=l.filter(t=>t.id!==e);return t.length!==l.length&&c(o,t,"\u0422\u043e\u0432\u0430\u0440 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e.")},[s.canManageShop,c,o,l,a])}}Mp.setCustomParameters({prompt:"select_account"});const Up="users",Vp="presence",zp=()=>({identifier:"",password:"",name:"",email:"",phone:""}),Bp=e=>{switch(null===e||void 0===e?void 0:e.code){case"auth/invalid-credential":return"\u041d\u0435\u0432\u0456\u0440\u043d\u0438\u0439 email \u0430\u0431\u043e \u043f\u0430\u0440\u043e\u043b\u044c.";case"auth/user-not-found":return"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0437 \u0442\u0430\u043a\u0438\u043c email \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e.";case"auth/wrong-password":return"\u041d\u0435\u0432\u0456\u0440\u043d\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c.";case"auth/email-already-in-use":return"\u0426\u0435\u0439 email \u0432\u0436\u0435 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0454\u0442\u044c\u0441\u044f.";case"auth/invalid-email":return"\u041d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email.";case"auth/weak-password":return"\u041f\u0430\u0440\u043e\u043b\u044c \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u0449\u043e\u043d\u0430\u0439\u043c\u0435\u043d\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432.";case"auth/operation-not-allowed":return"\u0423 Firebase \u043d\u0435 \u0432\u0432\u0456\u043c\u043a\u043d\u0435\u043d\u043e \u0446\u0435\u0439 \u0441\u043f\u043e\u0441\u0456\u0431 \u0432\u0445\u043e\u0434\u0443.";case"auth/unauthorized-domain":return"\u041f\u043e\u0442\u043e\u0447\u043d\u0438\u0439 \u0434\u043e\u043c\u0435\u043d \u043d\u0435 \u0434\u043e\u0434\u0430\u043d\u043e \u0434\u043e Authorized domains \u0443 Firebase Auth.";case"auth/popup-blocked":return"\u0411\u0440\u0430\u0443\u0437\u0435\u0440 \u0437\u0430\u0431\u043b\u043e\u043a\u0443\u0432\u0430\u0432 \u0432\u0456\u043a\u043d\u043e \u0432\u0445\u043e\u0434\u0443. \u0414\u043e\u0437\u0432\u043e\u043b\u044c\u0442\u0435 pop-up \u0456 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437.";case"auth/popup-closed-by-user":return"\u0412\u0456\u043a\u043d\u043e \u0432\u0445\u043e\u0434\u0443 \u0447\u0435\u0440\u0435\u0437 Google \u0437\u0430\u043a\u0440\u0438\u0442\u043e.";case"auth/cancelled-popup-request":return"\u0417\u0430\u043f\u0438\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u0457 \u0447\u0435\u0440\u0435\u0437 Google \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e.";case"auth/account-exists-with-different-credential":return"\u0414\u043b\u044f \u0446\u044c\u043e\u0433\u043e email \u0443\u0436\u0435 \u0454 \u0432\u0445\u0456\u0434 \u0456\u043d\u0448\u0438\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c. \u0423\u0432\u0456\u0439\u0434\u0456\u0442\u044c \u043d\u0438\u043c \u0456 \u043f\u0440\u0438\u0432'\u044f\u0436\u0456\u0442\u044c Google.";case"auth/network-request-failed":return"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f \u0434\u043e \u0456\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443.";case"auth/user-disabled":return"\u0426\u0435\u0439 \u0430\u043a\u0430\u0443\u043d\u0442 \u0432\u0438\u043c\u043a\u043d\u0435\u043d\u043e.";default:return"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u0442\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u044e. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437."}},qp=e=>{if(null===e||void 0===e||!e.isBanned||null!==e&&void 0!==e&&e.isAdmin)return!1;if(null===e||void 0===e||!e.banExpiresAt)return!0;const t=new Date(e.banExpiresAt).getTime();return!!Number.isNaN(t)||t>Date.now()},Hp=e=>{var t,n;const r=(null===e||void 0===e||null===(t=e.banReason)||void 0===t?void 0:t.trim())||"\u0410\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e \u0430\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c.",s=null===e||void 0===e||null===(n=e.banDescription)||void 0===n?void 0:n.trim(),i=(e=>{if(!e)return"\u0411\u0435\u0437\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e";const t=new Date(e);return Number.isNaN(t.getTime())?"\u0411\u0435\u0437\u0441\u0442\u0440\u043e\u043a\u043e\u0432\u043e":t.toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})(null===e||void 0===e?void 0:e.banExpiresAt);return s?"".concat(r," \u041e\u043f\u0438\u0441: ").concat(s,". \u0422\u0435\u0440\u043c\u0456\u043d: ").concat(i,"."):"".concat(r," \u0422\u0435\u0440\u043c\u0456\u043d: ").concat(i,".")};function Wp(e){var t,n;const[s,i]=(0,r.useState)("login"),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(zp),[f,m]=(0,r.useState)(!Dp),[p,g]=(0,r.useState)(!Dp),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(null),[x,k]=(0,r.useState)([]),[N,S]=(0,r.useState)(0),E=Boolean((null===b||void 0===b?void 0:b.isAdmin)||(null===b||void 0===b||null===(t=b.roles)||void 0===t?void 0:t.includes("operator"))||(null===b||void 0===b||null===(n=b.roles)||void 0===n?void 0:n.includes("task_moderator"))),_=(0,r.useCallback)(e=>{i(e),c("")},[]),I=(0,r.useCallback)((e,t)=>{h(n=>d(d({},n),{},{[e]:t}))},[]);(0,r.useEffect)(()=>{if(!Dp||!Op)return;const e=function(e,t,n,r){return We(e).onAuthStateChanged(t,n,r)}(Op,e=>{y(e),m(!0),e&&c(""),g(!1),e||(w(null),k([]),S(0))});return e},[]),(0,r.useEffect)(()=>{if(!Dp||!v||!Lp)return void(v||g(!0));let t=!1,n=null;return(async()=>{const r=cd(Lp,Up,v.uid),s=(v.email||"").trim().toLowerCase(),i=s===C&&Boolean(v.emailVerified);try{const a=await Xd(r);let o=null;if(a.exists()){const e=a.data()||{},t={};e.id||(t.id=v.uid),!e.email&&s&&(t.email=s),!e.name&&v.displayName&&(t.name=v.displayName),!e.avatar&&v.photoURL&&(t.avatar=v.photoURL),i&&!e.isAdmin&&(t.isAdmin=!0),Object.keys(t).length>0&&await Yd(r,t,{merge:!0}),o=d(d(d({},e),t),{},{id:v.uid})}else{if(!s)return e("danger","\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u0438 email \u0430\u043a\u0430\u0443\u043d\u0442\u0430."),void await um(Op);const t=F({id:v.uid,name:v.displayName||(i?T:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"),email:s,phone:"",avatar:v.photoURL||"",isAdmin:i});await Yd(r,t,{merge:!1}),o=t}if(t||!o)return;const l=V(d(d({},o),{},{id:v.uid,email:o.email||s,isAdmin:i}));if(l.isBanned&&!l.isAdmin&&qp(l)){const t=Hp(l);return w(null),g(!0),c(t),e("danger",t),void await um(Op)}w(l),g(!0),n=Zd(r,async t=>{var n;if(!t.exists())return w(null),void g(!0);const r=V(d(d({},t.data()),{},{id:v.uid,email:(null===(n=t.data())||void 0===n?void 0:n.email)||s,isAdmin:i}));if(r.isBanned&&!r.isAdmin&&qp(r)){const t=Hp(r);return w(null),g(!0),c(t),e("danger",t),void await um(Op)}w(r),g(!0)},async()=>{w(null),g(!0),e("danger","\u041d\u0435\u043c\u0430\u0454 \u0434\u043e\u0441\u0442\u0443\u043f\u0443 \u0434\u043e \u043f\u0440\u043e\u0444\u0456\u043b\u044e \u0443 Firestore. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0431\u0435\u0437\u043f\u0435\u043a\u0438."),await um(Op)})}catch(a){w(null),g(!0),e("danger","\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u043f\u0440\u043e\u0444\u0456\u043b\u044c \u0456\u0437 \u0431\u0430\u0437\u0438 \u0434\u0430\u043d\u0438\u0445."),await um(Op)}})(),()=>{t=!0,n&&n()}},[v,e]),(0,r.useEffect)(()=>{if(!v||!E||!Lp)return void k([]);return Zd(ld(Lp,Up),e=>{const t=e.docs.map(e=>V(d(d({},e.data()),{},{id:e.id}))).sort((e,t)=>e.isAdmin!==t.isAdmin?Number(t.isAdmin)-Number(e.isAdmin):new Date(t.joinedAt).getTime()-new Date(e.joinedAt).getTime());k(t)},()=>{k([]),e("warning","\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432 \u0434\u043b\u044f \u0430\u0434\u043c\u0456\u043d\u043a\u0438.")})},[v,E,e]),(0,r.useEffect)(()=>{if(!v||!Lp)return void S(0);const e=ld(Lp,Vp);let t=[];const n=()=>{const e=Date.now(),n=t.filter(t=>{const n=new Date(t.lastSeenAt||0).getTime();return Number.isFinite(n)&&e-n<=15e3});S(n.length)},r=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{await Yd(cd(Lp,Vp,v.uid),{uid:v.uid,name:(null===b||void 0===b?void 0:b.name)||v.displayName||"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447",avatar:(null===b||void 0===b?void 0:b.avatar)||v.photoURL||"",lastSeenAt:(new Date).toISOString(),isOnline:e},{merge:!0})}catch(t){}},s=Zd(e,e=>{t=e.docs.map(e=>e.data()),n()},()=>{S(0)}),i=setInterval(n,5e3),a=setInterval(()=>{r(!0)},5e3);r(!0);const o=()=>{r(!1)};return window.addEventListener("beforeunload",o),()=>{window.removeEventListener("beforeunload",o),clearInterval(i),clearInterval(a),s(),r(!1)}},[v,null===b||void 0===b?void 0:b.avatar,null===b||void 0===b?void 0:b.name]);const j=(0,r.useCallback)(async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Lp)return!1;const s=V(d(d({},n),{},{id:t}));r.lockIdentity&&b&&(s.email=b.email,s.isAdmin=b.isAdmin,s.roles=b.roles,s.flags=b.flags,s.isBanned=b.isBanned,s.banReason=b.banReason,s.banDescription=b.banDescription,s.banExpiresAt=b.banExpiresAt,s.bannedAt=b.bannedAt);try{return await Yd(cd(Lp,Up,t),s,{merge:!1}),!0}catch(i){return e("danger",r.errorMessage||"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430."),!1}},[b,e]),A=(0,r.useCallback)(async(t,n)=>{if(!b)return!1;const r=await j(b.id,t,{lockIdentity:!b.isAdmin,errorMessage:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0432\u0430\u0448\u0456 \u0437\u043c\u0456\u043d\u0438 \u0443 \u0431\u0430\u0437\u0456 \u0434\u0430\u043d\u0438\u0445."});return r&&n&&e("success",n),r},[b,j,e]),P=(0,r.useCallback)(async t=>{if(t.preventDefault(),!Op||!Lp)return;const n=u.name.trim(),r=u.email.trim().toLowerCase(),s=u.phone.trim(),a=u.password;if(n)if(r)if(a.length<6)c("\u041f\u0430\u0440\u043e\u043b\u044c \u043c\u0430\u0454 \u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u0449\u043e\u043d\u0430\u0439\u043c\u0435\u043d\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432.");else{o(!0),c("");try{if((await lm(Op,r)).length>0)try{const e=await om(Op,r,a),t=await Xd(cd(Lp,Up,e.user.uid));if(t.exists()){const n=V(d(d({},t.data()),{},{id:e.user.uid}));if(qp(n)){const e=Hp(n);return c(e),void await um(Op)}}await um(Op)}catch(l){}const t=await async function(e,t,n){if(rn(e.app))return Promise.reject(dh(e));const r=bf(e),s=If(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yf,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&am(e),t}),a=await $f._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(Op,r,a);await cm(t.user,{displayName:n});const o=F({id:t.user.uid,name:n,email:r,phone:s,avatar:t.user.photoURL||"",isAdmin:r===C&&Boolean(t.user.emailVerified)});await Yd(cd(Lp,Up,t.user.uid),o,{merge:!1}),h({identifier:"",password:"",name:"",email:"",phone:""}),i("login"),e("success","\u0410\u043a\u0430\u0443\u043d\u0442 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e.")}catch(f){c(Bp(f))}finally{o(!1)}}else c("\u0412\u0432\u0435\u0434\u0456\u0442\u044c email \u0434\u043b\u044f \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457.");else c("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043c'\u044f \u0434\u043b\u044f \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457.")},[u,e]),D=(0,r.useCallback)(async e=>{if(e.preventDefault(),!Op||!Lp)return;const t=u.identifier.trim().toLowerCase(),n=u.password;if(t&&n){o(!0),c("");try{const e=await om(Op,t,n),r=await Xd(cd(Lp,Up,e.user.uid));if(r.exists()){const t=V(d(d({},r.data()),{},{id:e.user.uid}));if(qp(t)){const e=Hp(t);return c(e),void await um(Op)}}h({identifier:"",password:"",name:"",email:"",phone:""})}catch(r){c(Bp(r))}finally{o(!1)}}else c("\u0412\u0432\u0435\u0434\u0456\u0442\u044c email \u0442\u0430 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443.")},[u,Lp]),R=(0,r.useCallback)(async()=>{if(Op){o(!0),c("");try{await async function(e,t,n){if(rn(e.app))return Promise.reject(ch(e,"operation-not-supported-in-this-environment"));const r=bf(e);hh(e,t,Wf);const s=zm(r,n);return new Qm(r,"signInViaPopup",t,s).executeNotNull()}(Op,Mp),h({identifier:"",password:"",name:"",email:"",phone:""})}catch(e){c(Bp(e))}finally{o(!1)}}},[]),O=(0,r.useCallback)(async()=>{if(Op)try{Lp&&Op.currentUser&&await Yd(cd(Lp,Vp,Op.currentUser.uid),{isOnline:!1,lastSeenAt:(new Date).toISOString()},{merge:!0}),await um(Op),e("success","\u0412\u0438 \u0432\u0438\u0439\u0448\u043b\u0438 \u0437 \u0430\u043a\u0430\u0443\u043d\u0442\u0430.")}catch(t){e("danger","\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u0441\u0435\u0441\u0456\u044e.")}},[e]),L=(0,r.useCallback)(async()=>{if(!Op||!Lp||!Op.currentUser||!b)return!1;if(b.isAdmin)return e("warning","\u041d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 owner-\u0430\u043a\u0430\u0443\u043d\u0442 \u0456\u0437 \u043a\u043b\u0456\u0454\u043d\u0442\u0430."),!1;if(!window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0430\u043a\u0430\u0443\u043d\u0442? \u0426\u044e \u0434\u0456\u044e \u043d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0441\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438."))return!1;try{await $d(cd(Lp,Up,b.id)),await $d(cd(Lp,Vp,b.id))}catch(t){return e("danger","\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043f\u0440\u043e\u0444\u0456\u043b\u044c \u0443 \u0431\u0430\u0437\u0456 \u0434\u0430\u043d\u0438\u0445."),!1}try{return await async function(e){return We(e).delete()}(Op.currentUser),e("success","\u0410\u043a\u0430\u0443\u043d\u0442 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e."),!0}catch(n){"auth/requires-recent-login"===(null===n||void 0===n?void 0:n.code)?e("warning","\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e, \u0430\u043b\u0435 \u0434\u043b\u044f \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u043e\u0431\u043b\u0456\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0438\u0441\u0443 Firebase \u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u0438\u0439 \u0432\u0445\u0456\u0434."):e("warning","\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e, \u0430\u043b\u0435 \u043d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043e\u0431\u043b\u0456\u043a\u043e\u0432\u0438\u0439 \u0437\u0430\u043f\u0438\u0441 Firebase Auth.");try{await um(Op)}catch(r){}return!1}},[b,e]);return{authMode:s,authBusy:a,authError:l,authForm:u,isAuthReady:f,isProfileReady:p,sessionUser:v,currentUser:b,allUsers:x,liveUsersCount:N,setAuthMode:_,onAuthFormChange:I,onLogin:D,onRegister:P,onGoogleSignIn:R,onLogout:O,onDeleteAccount:L,persistUser:j,persistCurrentUser:A}}const Kp="shop",Gp=e=>{const t=Array.isArray(null===e||void 0===e?void 0:e.categories)?e.categories.map(e=>z(e)).filter(Boolean):[],n=Array.from(new Set(t)),r=n.length>0?n:f,s=Array.isArray(null===e||void 0===e?void 0:e.products)?e.products.map(e=>B(e)).filter(e=>e.name&&Number.isFinite(e.price)):[],i=r[0],a=(s.length>0?s:m).map(e=>d(d({},e),{},{category:r.includes(e.category)?e.category:i}));return{categories:r,products:a}};const Qp=()=>({title:"",description:"",priority:"medium",dueDate:O(0)}),Xp=()=>({name:"",email:"",phone:"",avatar:""});const Jp=function(){const e=localStorage.getItem(b)||"system",{themeMode:t,setThemeMode:n,effectiveTheme:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system";const t="undefined"!==typeof window&&"function"===typeof window.matchMedia,[n,s]=(0,r.useState)(e),[i,a]=(0,r.useState)(t&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");(0,r.useEffect)(()=>{if(!t)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),n=e=>a(e.matches?"dark":"light");return e.addEventListener?e.addEventListener("change",n):e.addListener(n),()=>{e.removeEventListener?e.removeEventListener("change",n):e.removeListener(n)}},[t]);const o=(0,r.useMemo)(()=>"system"===n?i:n,[n,i]);return(0,r.useEffect)(()=>{document.documentElement.setAttribute("data-theme",o)},[o]),{themeMode:n,setThemeMode:s,effectiveTheme:o}}(e),[o,l]=(0,r.useState)("tracker"),[c,u]=(0,r.useState)("appearance"),[x,k]=(0,r.useState)(!1),[N,_]=(0,r.useState)(null),C=(0,r.useRef)(null),T=(0,r.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3200;_({type:e,text:t}),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{_(null),C.current=null},n)},[]),{authMode:I,authBusy:j,authError:A,authForm:P,isAuthReady:D,isProfileReady:R,sessionUser:O,currentUser:L,allUsers:M,liveUsersCount:F,setAuthMode:V,onAuthFormChange:z,onLogin:B,onRegister:X,onGoogleSignIn:J,onLogout:Y,onDeleteAccount:$,persistUser:Z,persistCurrentUser:ee}=Wp(T),{isShopReady:te,shopCategories:ne,shopProducts:re,persistShop:se}=function(e){var t,n;let{sessionUser:s,currentUser:i,showAlert:a}=e;const[o,l]=(0,r.useState)(!Dp),[c,u]=(0,r.useState)(f),[d,h]=(0,r.useState)(m),p=Boolean((null===i||void 0===i?void 0:i.isAdmin)||(null===i||void 0===i||null===(t=i.roles)||void 0===t?void 0:t.includes("shop_moderator"))||(null===i||void 0===i||null===(n=i.roles)||void 0===n?void 0:n.includes("operator")));return(0,r.useEffect)(()=>{if(!Dp||!s||!Lp)return void(s||l(!0));const e=cd(Lp,"app",Kp);return Zd(e,t=>{if(!t.exists()){if(p){const t=Gp({categories:f,products:m});Yd(e,{categories:t.categories,products:t.products,updatedAt:(new Date).toISOString()},{merge:!1}).catch(()=>{a("warning","\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043c\u0430\u0433\u0430\u0437\u0438\u043d \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445.")})}return u(f),h(m),void l(!0)}const n=Gp(t.data());u(n.categories),h(n.products),l(!0)},()=>{l(!0),u(f),h(m),a("warning","\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043c\u0430\u0433\u0430\u0437\u0438\u043d \u0438\u0437 \u0431\u0430\u0437\u044b. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.")})},[s,p,a]),{isShopReady:o,shopCategories:c,shopProducts:d,persistShop:(0,r.useCallback)(async(e,t,n)=>{if(!p||!Lp)return a("danger","\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430."),!1;const r=Gp({categories:e,products:t});try{return await Yd(cd(Lp,"app",Kp),{categories:r.categories,products:r.products,updatedAt:(new Date).toISOString()},{merge:!1}),n&&a("success",n),!0}catch(s){return a("danger","\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430."),!1}},[p,a])}}({sessionUser:O,currentUser:L,showAlert:T}),{taskForm:ie,profileDraft:ce,boards:fe,activeBoardId:pe,boardTasks:ge,cartItems:ve,cartTotal:ye,taskStats:be,ledgerStats:we,onTaskFormChange:xe,onSetActiveBoard:ke,onCreateBoard:Ne,onUpdateBoard:Se,onDeleteBoard:Ee,onCreateTask:_e,onTaskStatusChange:Ce,onTaskDelete:Te,onAddToCart:Ie,onChangeCartQuantity:je,onCheckout:Ae,onActivatePlan:Pe,onBuyPoints:De,onProfileChange:Re,onSaveProfile:Oe,onTogglePaymentLink:Le,onToggleSetting:Me}=function(e){let{currentUser:t,shopProducts:n,persistCurrentUser:s,showAlert:i}=e;const[a,o]=(0,r.useState)(Qp),[l,c]=(0,r.useState)(Xp),[u,h]=(0,r.useState)("");(0,r.useEffect)(()=>{var e,n;if(!t)return c({name:"",email:"",phone:"",avatar:""}),void h("");c({name:t.name,email:t.email,phone:t.phone,avatar:t.avatar||""}),h(t.activeBoardId||(null===(e=t.boards)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.id)||"")},[t]);const f=(0,r.useMemo)(()=>Array.isArray(null===t||void 0===t?void 0:t.boards)?t.boards:[],[null===t||void 0===t?void 0:t.boards]),m=(0,r.useMemo)(()=>f.length?f.some(e=>e.id===u)?u:null!==t&&void 0!==t&&t.activeBoardId&&f.some(e=>e.id===t.activeBoardId)?t.activeBoardId:f[0].id:"",[u,f,null===t||void 0===t?void 0:t.activeBoardId]),p=(0,r.useMemo)(()=>t&&m?t.tasks.filter(e=>e.boardId===m):[],[t,m]),g=(0,r.useMemo)(()=>{if(!t)return[];const e=new Map(n.map(e=>[e.id,e]));return t.cart.map(t=>{const n=e.get(t.productId);return n?{product:n,quantity:t.quantity}:null}).filter(Boolean)},[t,n]),y=(0,r.useMemo)(()=>g.reduce((e,t)=>e+q(t.product)*t.quantity,0),[g]),b=(0,r.useMemo)(()=>t?{total:t.tasks.length,done:t.tasks.filter(e=>"done"===e.status).length}:{total:0,done:0},[t]),w=(0,r.useMemo)(()=>t?t.pointLedger.reduce((e,t)=>("income"===t.type?e.income+=t.amount:e.spent+=t.amount,e),{income:0,spent:0}):{income:0,spent:0},[t]),x=(0,r.useCallback)(async e=>{if(!t||!e||e===m)return!1;const n=d(d({},t),{},{activeBoardId:e}),r=await s(n);return r&&h(e),r},[t,s,m]),k=(0,r.useCallback)(async e=>{if(!t)return!1;const n=String((null===e||void 0===e?void 0:e.name)||"").trim(),r=String((null===e||void 0===e?void 0:e.icon)||"bi-kanban").trim(),a=String((null===e||void 0===e?void 0:e.colorId)||"blue").trim();if(!n)return i("warning","\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0434\u043e\u0448\u043a\u0438."),!1;const o={id:"board-".concat(Date.now()),name:n,icon:r,colorId:a,createdAt:(new Date).toISOString()},l=d(d({},t),{},{boards:[...f,o],activeBoardId:o.id}),c=await s(l,"\u0414\u043e\u0448\u043a\u0443 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e.");return c&&h(o.id),c},[f,t,s,i]),N=(0,r.useCallback)(async(e,n)=>{if(!t||!e)return!1;const r=String((null===n||void 0===n?void 0:n.name)||"").trim(),a=String((null===n||void 0===n?void 0:n.icon)||"bi-kanban").trim(),o=String((null===n||void 0===n?void 0:n.colorId)||"blue").trim();if(!r)return i("warning","\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0434\u043e\u0448\u043a\u0438."),!1;if(!f.some(t=>t.id===e))return i("warning","\u0414\u043e\u0448\u043a\u0443 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."),!1;const l=f.map(t=>t.id===e?d(d({},t),{},{name:r,icon:a,colorId:o}):t);return s(d(d({},t),{},{boards:l}),"\u0414\u043e\u0448\u043a\u0443 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e.")},[f,t,s,i]),S=(0,r.useCallback)(async e=>{if(!t||!e)return!1;if(f.length<=1)return i("warning","\u041d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043e\u0441\u0442\u0430\u043d\u043d\u044e \u0434\u043e\u0448\u043a\u0443."),!1;if(!f.find(t=>t.id===e))return i("warning","\u0414\u043e\u0448\u043a\u0443 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."),!1;const n=f.find(t=>t.id!==e);if(!n)return i("warning","\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u0438 \u0434\u043e\u0448\u043a\u0443 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d\u043d\u044f \u0437\u0430\u0434\u0430\u0447."),!1;const r=f.filter(t=>t.id!==e),a=t.tasks.map(t=>t.boardId===e?d(d({},t),{},{boardId:n.id}):t),o=m===e?n.id:m,l=await s(d(d({},t),{},{boards:r,tasks:a,activeBoardId:o}),"\u0414\u043e\u0448\u043a\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e. \u0417\u0430\u0434\u0430\u0447\u0456 \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0435\u043d\u043e.");return l&&h(o),l},[f,t,s,m,i]),E=(0,r.useCallback)((e,t)=>{o(n=>d(d({},n),{},{[e]:t}))},[]),_=(0,r.useCallback)(async e=>{var n;if(e.preventDefault(),!t)return;if(!m)return void i("warning","\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u043e\u0448\u043a\u0443 \u0434\u043b\u044f \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0437\u0430\u0434\u0430\u0447\u0456.");const r=a.title.trim(),l=a.description.trim();if(!r)return void i("warning","\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0437\u0430\u0434\u0430\u0447\u0456.");const c=(null===(n=v[a.priority])||void 0===n?void 0:n.reward)||v.medium.reward,u=U({id:Date.now(),title:r,description:l,priority:a.priority,dueDate:a.dueDate,status:"todo",points:c,boardId:m,rewardClaimed:!1,createdAt:(new Date).toISOString(),completedAt:null}),h=d(d({},t),{},{tasks:[u,...t.tasks]});await s(h,"\u0417\u0430\u0434\u0430\u0447\u0443 \u0434\u043e\u0434\u0430\u043d\u043e.")&&o(Qp())},[t,s,m,i,a]),C=(0,r.useCallback)(async(e,n)=>{if(!t)return;const r=(new Date).toISOString();let i=0,a="";const o=t.tasks.map(t=>{if(t.id!==e)return t;const s=d(d({},t),{},{status:n,completedAt:"done"===n?t.completedAt||r:null});return"done"!==n||t.rewardClaimed||(i=t.points,a=t.title,s.rewardClaimed=!0),U(s)}),l=[...t.pointLedger];let c=t.points;i>0&&(c+=i,l.unshift({id:"task-reward-".concat(Date.now()),type:"income",source:"task",amount:i,label:"\u041d\u0430\u0433\u043e\u0440\u043e\u0434\u0430 \u0437\u0430 \u0437\u0430\u0434\u0430\u0447\u0443: ".concat(a),createdAt:r}));const u=d(d({},t),{},{tasks:o,points:c,pointLedger:l});await s(u,i>0?"\u041d\u0430\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u043e +".concat(i," \u0431\u0430\u043b\u0456\u0432."):"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u0434\u0430\u0447\u0456 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e.")},[t,s]),T=(0,r.useCallback)(async e=>{if(!t)return;const n=d(d({},t),{},{tasks:t.tasks.filter(t=>t.id!==e)});await s(n,"\u0417\u0430\u0434\u0430\u0447\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e.")},[t,s]),I=(0,r.useCallback)(async e=>{if(!t)return;if(!n.find(t=>t.id===e))return void i("warning","\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e.");const r=t.cart.find(t=>t.productId===e)?t.cart.map(t=>t.productId===e?d(d({},t),{},{quantity:t.quantity+1}):t):[...t.cart,{productId:e,quantity:1}],a=d(d({},t),{},{cart:r});await s(a,"\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0434\u0430\u043d\u043e \u0434\u043e \u043a\u043e\u0448\u0438\u043a\u0430.")},[t,s,n,i]),j=(0,r.useCallback)(async(e,n)=>{if(!t)return;const r=t.cart.map(t=>t.productId!==e?t:d(d({},t),{},{quantity:t.quantity+n})).filter(e=>e.quantity>0),i=d(d({},t),{},{cart:r});await s(i)},[t,s]),A=(0,r.useCallback)(async()=>{if(!t)return!1;if(0===g.length)return i("warning","\u041a\u043e\u0448\u0438\u043a \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u0439."),!1;if(t.points<y)return i("danger","\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043d\u044c\u043e \u0431\u0430\u043b\u0456\u0432 \u0434\u043b\u044f \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f \u043f\u043e\u043a\u0443\u043f\u043a\u0438."),!1;const e=(new Date).toISOString(),n=g.map(t=>({id:"purchase-".concat(Date.now(),"-").concat(t.product.id),name:t.product.name,quantity:t.quantity,total:q(t.product)*t.quantity,createdAt:e})),r=d(d({},t),{},{points:t.points-y,cart:[],purchases:[...n,...t.purchases],pointLedger:[{id:"checkout-".concat(Date.now()),type:"expense",source:"shop",amount:y,label:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0432 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0456 (".concat(g.length," \u043f\u043e\u0437.)"),createdAt:e},...t.pointLedger]});return s(r,"\u041f\u043e\u043a\u0443\u043f\u043a\u0443 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043e.")},[g,y,t,s,i]),P=(0,r.useCallback)(async e=>{if(!t||t.subscription===e)return;const n=d(d({},t),{},{subscription:e});await s(n,"\u0422\u0430\u0440\u0438\u0444 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e.")},[t,s]),D=(0,r.useCallback)(async e=>{if(!t)return;const n=(new Date).toISOString(),r=d(d({},t),{},{points:t.points+e.points,pointLedger:[{id:"pack-".concat(Date.now()),type:"income",source:"purchase",amount:e.points,label:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u043f\u0430\u043a\u0435\u0442\u0430 \u0431\u0430\u043b\u0456\u0432: ".concat(e.title),createdAt:n},...t.pointLedger]});await s(r,"\u0411\u0430\u043b\u0430\u043d\u0441 \u043f\u043e\u043f\u043e\u0432\u043d\u0435\u043d\u043e \u043d\u0430 ".concat(e.points," \u0431\u0430\u043b\u0456\u0432."))},[t,s]),R=(0,r.useCallback)((e,t)=>{c(n=>d(d({},n),{},{[e]:t}))},[]),O=(0,r.useCallback)(async e=>{if(e.preventDefault(),!t||null===Op||void 0===Op||!Op.currentUser)return;const n=l.name.trim(),r=l.phone.trim(),a=l.avatar.trim();if(!n)return void i("warning","\u0406\u043c'\u044f \u043d\u0435 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u043f\u043e\u0440\u043e\u0436\u043d\u0456\u043c.");try{Op.currentUser.displayName!==n&&await cm(Op.currentUser,{displayName:n})}catch(c){i("warning","\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0443\u0432\u0430\u0442\u0438 \u0456\u043c'\u044f \u0443 Firebase Auth.")}const o=d(d({},t),{},{name:n,phone:r,avatar:a});await s(o,"\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e.")},[t,s,l,i]),L=(0,r.useCallback)(async()=>{if(!t)return;const e=!t.paymentLinked,n=d(d({},t),{},{paymentLinked:e});await s(n,e?"\u041a\u0430\u0440\u0442\u043a\u0443 \u043f\u0440\u0438\u0432'\u044f\u0437\u0430\u043d\u043e.":"\u041a\u0430\u0440\u0442\u043a\u0443 \u0432\u0456\u0434'\u0432\u044f\u0437\u0430\u043d\u043e.")},[t,s]),M=(0,r.useCallback)(async e=>{if(!t)return;const n=d(d({},t),{},{settings:d(d({},t.settings),{},{[e]:!t.settings[e]})});await s(n)},[t,s]);return{taskForm:a,profileDraft:l,boards:f,activeBoardId:m,boardTasks:p,cartItems:g,cartTotal:y,taskStats:b,ledgerStats:w,onSetActiveBoard:x,onCreateBoard:k,onUpdateBoard:N,onDeleteBoard:S,onTaskFormChange:E,onCreateTask:_,onTaskStatusChange:C,onTaskDelete:T,onAddToCart:I,onChangeCartQuantity:j,onCheckout:A,onActivatePlan:P,onBuyPoints:D,onProfileChange:R,onSaveProfile:O,onTogglePaymentLink:L,onToggleSetting:M}}({currentUser:L,shopProducts:re,persistCurrentUser:ee,showAlert:T}),Fe=(0,r.useMemo)(()=>{const e=Array.isArray(null===L||void 0===L?void 0:L.roles)?L.roles:[],t=t=>e.includes(t),n=Boolean(null===L||void 0===L?void 0:L.isAdmin),r=n||t("task_moderator")||t("operator"),s=n||t("operator"),i=n||t("shop_moderator")||t("operator"),a=n||t("operator");return{isOwner:n,canAccessAdminPanel:n||r||i,canManageRoles:n,canUseRawJson:n,canViewUsers:a||r,canManageUsers:a,canBanDeleteUsers:a,canReviewTasks:r,canModerateTasks:s,canFlagAccounts:r,canViewFlagQueue:n,canResolveFlags:n||t("operator"),canManageShop:i}},[null===L||void 0===L?void 0:L.isAdmin,null===L||void 0===L?void 0:L.roles]),Ue=Fp({currentUser:L,allUsers:M,permissions:Fe,persistUser:Z,showAlert:T,shopCategories:ne,shopProducts:re,persistShop:se});(0,r.useEffect)(()=>{localStorage.setItem(b,t)},[t]),(0,r.useEffect)(()=>()=>{C.current&&clearTimeout(C.current)},[]);const Ve=(0,r.useMemo)(()=>Fe.canAccessAdminPanel?h.some(e=>"admin"===e.key)?h:[...h,{key:"admin",label:"\u0410\u0434\u043c\u0456\u043d\u043a\u0430",icon:"bi-shield-lock"}]:h,[Fe.canAccessAdminPanel]);(0,r.useEffect)(()=>{if(!O)return l("tracker"),void k(!1);var e;"admin"!==o||Fe.canAccessAdminPanel?Ve.some(e=>e.key===o)||l((null===(e=Ve[0])||void 0===e?void 0:e.key)||"tracker"):l("tracker")},[o,Ve,Fe.canAccessAdminPanel,O]);const ze=(0,r.useMemo)(()=>{const e=Ve.find(e=>e.key===o);return(null===e||void 0===e?void 0:e.label)||"TaskFlow"},[o,Ve]),Be=(0,r.useCallback)(e=>{"settings"===e&&u("appearance"),l(e)},[]),qe=(0,r.useCallback)(()=>{u("account"),l("settings")},[]),He=(0,r.useCallback)(()=>{l("profile")},[]);return Dp?D?O?L&&R&&te?(0,i.jsxs)("div",{className:"app-shell",children:[(0,i.jsx)(K,{menuItems:Ve,activePage:o,onNavigate:Be,appVersion:w,liveUsersCount:F}),(0,i.jsxs)("div",{className:"workspace",children:[(0,i.jsx)(G,{pageTitle:ze,user:L,themeMode:t,onThemeChange:n,onOpenPurchase:()=>Be("purchase"),onOpenCart:()=>k(!0),onOpenProfile:He,onOpenSettingsAccount:qe,onLogout:Y}),(0,i.jsx)("main",{className:"content-wrap",children:(()=>{if(!L)return null;switch(o){case"tracker":return(0,i.jsx)(me,{boards:fe,activeBoardId:pe,onSetActiveBoard:ke,onCreateBoard:Ne,onUpdateBoard:Se,onDeleteBoard:Ee,taskForm:ie,onTaskFormChange:xe,onCreateTask:_e,tasks:ge,allTasks:L.tasks,onTaskStatusChange:Ce,onTaskDelete:Te,priorityMeta:v,statusMeta:y});case"shop":return(0,i.jsx)(de,{products:re,categories:ne,onAddToCart:Ie});case"stats":return(0,i.jsx)(he,{taskStats:be,ledgerStats:we,pointLedger:L.pointLedger,formatDateTime:H});case"settings":return(0,i.jsx)(ue,{currentUser:L,profileDraft:ce,themeMode:t,effectiveTheme:s,onThemeChange:n,onToggleSetting:Me,onProfileChange:Re,onSaveProfile:Oe,onTogglePaymentLink:Le,onLogout:Y,onDeleteAccount:$,initialSection:c});case"about":default:return(0,i.jsx)(Q,{});case"purchase":return(0,i.jsx)(le,{plans:p,packs:g,currentSubscription:L.subscription,onActivatePlan:Pe,onBuyPoints:De});case"profile":return(0,i.jsx)(oe,{currentUser:L,plans:p,formatDateTime:H});case"admin":return Fe.canAccessAdminPanel?(0,i.jsx)(ae,{users:M,currentUserId:L.id,roleOptions:E,permissions:Fe,shopProducts:re,shopCategories:ne,onSaveUser:Ue.onSaveUser,onToggleBan:Ue.onToggleBan,onDeleteUser:Ue.onDeleteUser,onSaveRawUser:Ue.onSaveRawUser,onSaveTask:Ue.onSaveTask,onDeleteTask:Ue.onDeleteTask,onFlagUser:Ue.onFlagUser,onResolveFlag:Ue.onResolveFlag,onAddCategory:Ue.onAddCategory,onDeleteCategory:Ue.onDeleteCategory,onSaveProduct:Ue.onSaveProduct,onDeleteProduct:Ue.onDeleteProduct,appVersion:w,releaseNotes:S,formatDateTime:H}):(0,i.jsx)(Q,{})}})()})]}),(0,i.jsx)(W,{open:x,items:ve,total:ye,onClose:()=>k(!1),onChangeQuantity:je,onCheckout:async()=>{await Ae()&&k(!1)}}),N&&(0,i.jsx)("div",{className:"alert alert-".concat(N.type," floating-alert py-2 px-3 mb-0"),role:"alert",children:N.text})]}):(0,i.jsx)("div",{className:"landing-page d-flex align-items-center justify-content-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"spinner-border mb-3",role:"status"}),(0,i.jsx)("div",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0443\u0454\u043c\u043e \u0434\u0430\u043d\u0456 \u0437 \u0431\u0430\u0437\u0438..."})]})}):(0,i.jsx)(a,{authMode:I,authError:A,authBusy:j,authForm:P,onAuthModeChange:V,onAuthFormChange:z,onLogin:B,onRegister:X,onGoogleSignIn:J}):(0,i.jsx)("div",{className:"landing-page d-flex align-items-center justify-content-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"spinner-border mb-3",role:"status"}),(0,i.jsx)("div",{children:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u044f\u0454\u043c\u043e \u0441\u0435\u0441\u0456\u044e..."})]})}):(0,i.jsx)("div",{className:"landing-page d-flex align-items-center",children:(0,i.jsx)("div",{className:"container py-5",children:(0,i.jsx)("div",{className:"card shadow-sm",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h3",{className:"mb-3",children:"TaskFlow: \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 Firebase"}),(0,i.jsx)("p",{className:"mb-2",children:"\u0414\u043b\u044f \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0457 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u0457 \u0442\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445 \u0437\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0437\u043c\u0456\u043d\u043d\u0456 \u043e\u0442\u043e\u0447\u0435\u043d\u043d\u044f \u0443 `.env` \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0456 `.env.example`."}),(0,i.jsxs)("ul",{className:"mb-0",children:[(0,i.jsx)("li",{children:"`REACT_APP_FIREBASE_API_KEY`"}),(0,i.jsx)("li",{children:"`REACT_APP_FIREBASE_AUTH_DOMAIN`"}),(0,i.jsx)("li",{children:"`REACT_APP_FIREBASE_PROJECT_ID`"}),(0,i.jsx)("li",{children:"`REACT_APP_FIREBASE_STORAGE_BUCKET`"}),(0,i.jsx)("li",{children:"`REACT_APP_FIREBASE_MESSAGING_SENDER_ID`"}),(0,i.jsx)("li",{children:"`REACT_APP_FIREBASE_APP_ID`"})]})]})})})})},Yp=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)})};s.createRoot(document.getElementById("root")).render((0,i.jsx)(r.StrictMode,{children:(0,i.jsx)(Jp,{})})),Yp()})();
//# sourceMappingURL=main.1a81225b.js.map